+++
title = "Solana æ™ºèƒ½åˆçº¦ç»ˆæéƒ¨ç½²æŒ‡å—ï¼šä»å…¥é—¨åˆ°ä¸»ç½‘ï¼Œå®šåˆ¶ä½ çš„ä¸“å±é“å· Program ID"
description = "Solana æ™ºèƒ½åˆçº¦ç»ˆæéƒ¨ç½²æŒ‡å—ï¼šä»å…¥é—¨åˆ°ä¸»ç½‘ï¼Œå®šåˆ¶ä½ çš„ä¸“å±é“å· Program ID"
date = 2025-06-29T10:17:15Z
[taxonomies]
categories = ["Web3", "Solana"]
tags = ["Solana", "Anchor", "Web3"]
+++

<!-- more -->

# **Solana æ™ºèƒ½åˆçº¦ç»ˆæéƒ¨ç½²æŒ‡å—ï¼šä»å…¥é—¨åˆ°ä¸»ç½‘ï¼Œå®šåˆ¶ä½ çš„ä¸“å±é“å· Program ID**

> **ä¿å§†çº§æ•™ç¨‹ï¼šåŸºäº Anchor æ¡†æ¶ï¼Œå¸¦ä½ ä¸æ»‘å®Œæˆå¯†é’¥ç®¡ç†ã€å¤šç¯å¢ƒéƒ¨ç½²ä¸å®æˆ˜é¿å‘**

è¿˜åœ¨ä¸º Solana åˆçº¦éƒ¨ç½²çš„ç¹çæµç¨‹è€Œå¤´ç–¼å—ï¼Ÿè¿˜åœ¨ç¾¡æ…•åˆ«äººçš„é¡¹ç›®æ‹¥æœ‰ä¸€ä¸ªä»¥é¡¹ç›®åå¼€å¤´ã€ç‚«é…·åˆæ˜“è®°çš„åˆçº¦åœ°å€ï¼ˆProgram IDï¼‰å—ï¼Ÿ

æœ¬ç¯‡æ–‡ç« å°†ä¸ºä½ æ­å¼€ Solana å¼€å‘çš„ç¥ç§˜é¢çº±ï¼Œé€šè¿‡å¼ºå¤§çš„ Anchor æ¡†æ¶ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œä¸ä»…èƒ½è½»æ¾éƒ¨ç½²ä½ çš„ç¬¬ä¸€ä¸ªæ™ºèƒ½åˆçº¦ï¼Œæ›´èƒ½æŒæ¡å®šåˆ¶ä¸“å±é“å·åœ°å€çš„ç‹¬å®¶ç§˜ç¬ˆï¼æ— è®ºä½ æ˜¯ Solana å¼€å‘æ–°æ‰‹ï¼Œè¿˜æ˜¯å¸Œæœ›ä¼˜åŒ–éƒ¨ç½²æµç¨‹çš„èµ„æ·±ç©å®¶ï¼Œè¿™ç¯‡â€œä¿å§†çº§â€å®æ“æ•™ç¨‹éƒ½å°†æ˜¯ä½ ä¸å¯é”™è¿‡çš„å®å…¸ã€‚è®©æˆ‘ä»¬ä¸€èµ·å‘Šåˆ«éšæœºç”Ÿæˆçš„æ— åºåœ°å€ï¼Œè®©ä½ çš„é¡¹ç›®ä»ä¸€ä¸ªä¼˜é›…çš„ Program ID å¼€å§‹ï¼

æœ¬æ–‡æ˜¯ä¸€ç¯‡é¢å‘ Solana å¼€å‘è€…çš„å…¨æµç¨‹å®æˆ˜æŒ‡å—ï¼Œè¯¦ç»†ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ Anchor æ¡†æ¶éƒ¨ç½²æ™ºèƒ½åˆçº¦ï¼Œå¹¶é‡ç‚¹è®²è§£äº†å¦‚ä½•ä¸ºåˆçº¦è®¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰çš„â€œé“å·â€åœ°å€ï¼ˆProgram IDï¼‰ã€‚

æ–‡ç« å†…å®¹è¦†ç›–äº†ä»ç”Ÿæˆä¸€ä¸ªå…·æœ‰ç‰¹å®šå‰ç¼€ï¼ˆå¦‚ `Red...`ï¼‰çš„é“å·å¯†é’¥å¯¹ï¼Œåˆ°å¦‚ä½•å°†å…¶æ­£ç¡®é…ç½®åˆ° Anchor é¡¹ç›®çš„ `lib.rs` å’Œ `Anchor.toml` æ–‡ä»¶ä¸­çš„æ¯ä¸€æ­¥ã€‚æ­¤å¤–ï¼Œæ•™ç¨‹è¿˜æ·±å…¥æ¢è®¨äº†å¼€å‘è€…å¿…å¤‡çš„å¯†é’¥ç®¡ç†æŠ€å·§ï¼ŒåŒ…æ‹¬å¦‚ä½•ä» Phantom ç­‰é’±åŒ…å¯¼å‡ºç§é’¥ï¼Œå¹¶ç”Ÿæˆä¸ `solana-cli` å…¼å®¹çš„ `.json` å¯†é’¥æ–‡ä»¶ï¼ŒåŒæ—¶æ¸…æ™°åœ°è¾¨æäº† `solana-keygen` å’Œ `solana address` å‘½ä»¤çš„å·®å¼‚ä¸é€‚ç”¨åœºæ™¯ã€‚

æœ€åï¼Œæ–‡ç« é€šè¿‡æœ¬åœ°ç½‘ç»œï¼ˆLocalnetï¼‰å’Œå¼€å‘ç½‘ç»œï¼ˆDevnetï¼‰çš„çœŸå®éƒ¨ç½²æ¡ˆä¾‹ï¼Œæ¼”ç¤ºäº†å®Œæ•´çš„éƒ¨ç½²æµç¨‹ï¼Œå¹¶æŒ‡å‡ºäº†åœ¨æœ¬åœ°ç¯å¢ƒä¸­å¯èƒ½é‡åˆ°çš„æƒé™é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆï¼Œç¡®ä¿è¯»è€…èƒ½å¤Ÿé¡ºåˆ©åœ°å°†è‡ªå·±çš„åˆçº¦å‘å¸ƒåˆ° Solana çš„å…¬å…±ç½‘ç»œä¸Šã€‚

## è‡ªå®šä¹‰åœ°å€ï¼ˆé“å·åœ°å€ï¼‰è®¾ç½®æˆé¡¹ç›®åˆçº¦åœ°å€ï¼ˆProgram IDï¼‰å®æ“ ï¼ˆå¯çœç•¥ï¼‰

### ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºä¸€ä¸ªä»¥ `Red` å¼€å¤´çš„ã€æ˜“äºè¯†åˆ«çš„ç¨‹åºID (Program ID)

```bash
âœ solana-keygen grind --starts-with Red:1
Searching with 12 threads for:
        1 pubkey that starts with 'Red' and ends with ''
Searched 1000000 keypairs in 1s. 0 matches found.
Searched 2000000 keypairs in 2s. 0 matches found.
Searched 3000000 keypairs in 4s. 0 matches found.
Searched 4000000 keypairs in 6s. 0 matches found.
Searched 5000000 keypairs in 7s. 0 matches found.
Wrote keypair to RedGJbeNejUtP6vMEPDkG55yRf7oAbkMFGeDjXaNfe1.json

```

**ä½¿ç”¨ `solana-keygen grind` å‘½ä»¤ç”Ÿæˆä»¥ç‰¹å®šå‰ç¼€å¼€å¤´çš„ Solana å¯†é’¥å¯¹**

`solana-keygen new` å’Œ `solana-keygen grind` ç”Ÿæˆçš„éƒ½æ˜¯é€šç”¨çš„å¯†é’¥å¯¹ã€‚è¿™ä¸ªå¯†é’¥å¯¹æ—¢å¯ä»¥è¢«å½“æˆé’±åŒ…æ¥æ¥æ”¶èµ„äº§ï¼Œä¹Ÿå¯ä»¥è¢«ç”¨æ¥éƒ¨ç½²åˆçº¦è€Œæˆä¸ºåˆçº¦åœ°å€ã€‚å®ƒåˆ°åº•æ˜¯ä»€ä¹ˆï¼Œå®Œå…¨å–å†³äºä½ å¦‚ä½•å»ä½¿ç”¨å®ƒã€‚

### ç¬¬äºŒæ­¥ï¼šæ›¿æ¢æ–‡ä»¶

å°†æ‚¨ç”¨ `grind` ç”Ÿæˆçš„é“å·å¯†é’¥å¯¹æ–‡ä»¶ï¼Œå¤åˆ¶å¹¶é‡å‘½åï¼Œè¦†ç›–æ‰ `target/deploy/` ç›®å½•ä¸‹çš„é‚£ä¸ªä¸´æ—¶æ–‡ä»¶ã€‚

```bash
cp -a RedGJbeNejUtP6vMEPDkG55yRf7oAbkMFGeDjXaNfe1.json ../target/deploy/red_packet-keypair.json
```

### ç¬¬ä¸‰æ­¥ï¼šæŸ¥è¯¢ç¨‹åºID

```bash
âœ solana address -k ./target/deploy/red_packet-keypair.json 
RedGJbeNejUtP6vMEPDkG55yRf7oAbkMFGeDjXaNfe1

```

### ç¬¬å››æ­¥ï¼š **æ›´æ–° `lib.rs` æ–‡ä»¶**

ä»ä½ çš„é“å·å¯†é’¥å¯¹ä¸­å¤åˆ¶å‡º**å…¬é’¥ï¼ˆåœ°å€ï¼‰**ï¼Œç„¶åç²˜è´´åˆ° `src/lib.rs` æ–‡ä»¶é¡¶éƒ¨çš„ `declare_id!` å®é‡Œé¢ã€‚

```rust
use anchor_lang::prelude::*;

declare_id!("RedGJbeNejUtP6vMEPDkG55yRf7oAbkMFGeDjXaNfe1");
```

### ç¬¬äº”æ­¥ï¼šæ›´æ–° `Anchor.toml` æ–‡ä»¶

å°†æ–°åœ°å€æ›´æ–°åˆ°é¡¹ç›®é…ç½®æ–‡ä»¶ä¸­ã€‚è¿™èƒ½ç¡®ä¿ä½ çš„æµ‹è¯•å’Œå®¢æˆ·ç«¯ä»£ç èƒ½æ­£ç¡®æ‰¾åˆ°ç¨‹åºã€‚

```toml
# Anchor.toml

[programs.Mainnet]
red_packet = "RedGJbeNejUtP6vMEPDkG55yRf7oAbkMFGeDjXaNfe1"

[programs.devnet]
red_packet = "RedGJbeNejUtP6vMEPDkG55yRf7oAbkMFGeDjXaNfe1"

[programs.localnet]
red_packet = "RedGJbeNejUtP6vMEPDkG55yRf7oAbkMFGeDjXaNfe1"
```

## ä½¿ç”¨è„šæœ¬ç”Ÿæˆ Solana å¯†é’¥æ–‡ä»¶

é»˜è®¤æƒ…å†µä¸‹ï¼Œ`anchor` å’Œ `solana` çš„å‘½ä»¤è¡Œå·¥å…·ä¼šä½¿ç”¨æ‚¨ç³»ç»Ÿé»˜è®¤çš„é’±åŒ…åœ°å€ï¼Œé€šå¸¸ä½äº `~/.config/solana/id.json`ã€‚è¿™ä¸ªé’±åŒ…åœ°å€ä¸»è¦ç”¨äº**æ”¯ä»˜éƒ¨ç½²å’Œäº¤æ˜“çš„ Gas è´¹**ï¼Œå¹¶ä¸”ä¼šæˆä¸ºæ‚¨éƒ¨ç½²çš„ç¨‹åºçš„**å‡çº§æƒé™ç®¡ç†è€…** (Upgrade Authority)ã€‚

### ç¬¬ä¸€æ­¥ï¼šä» Phantom é’±åŒ…å¯¼å‡ºç§é’¥

![image-20250629175131406](/images/image-20250629175131406.png)

```mermaid
graph TD
A[å¼€å§‹] --> B[è®¾ç½®]
B --> C[ç®¡ç†è´¦æˆ·]
C --> D[é€‰æ‹©è´¦æˆ·]
D --> E[æ˜¾ç¤ºç§é’¥]
E --> F[è¾“å…¥å¯†ç ]
F --> G[å‹¾é€‰ åŒæ„é£é™©è­¦å‘Š ç»§ç»­]
G --> H[å¤åˆ¶ç§é’¥]
H --> I[ç»“æŸ]

```

![image-20250629111221163](/images/image-20250629111221163.png)

### ç¬¬äºŒæ­¥ï¼šä½¿ç”¨è„šæœ¬ç”Ÿæˆå¯†é’¥æ–‡ä»¶ï¼ˆå¦‚æœ‰å¯å¿½ç•¥ï¼‰

ä»å·²æœ‰çš„ç§é’¥ç”Ÿæˆ Solana å’Œ Anchor å·¥å…·æ‰€éœ€è¦çš„ `.json` å¯†é’¥æ–‡ä»¶ã€‚

#### åˆ›å»ºé¡¹ç›®å¹¶åˆå§‹åŒ–

```bash
mkdir solana-wallet-demo && cd solanan-wallet-demo
pnpm init
```

#### å®‰è£…ä¾èµ–

```bash
pnpm add @solana/web3.js bs58
```

#### create-wallet.ts æ–‡ä»¶

```ts
import { Keypair } from "@solana/web3.js";
import bs58 from "bs58";
import fs from "fs";

// --- æ­¥éª¤ 1: åœ¨è¿™é‡Œç²˜è´´ä½ çš„ Base58 æ ¼å¼ç§é’¥ ---
const privateKeyBase58 =
  "5xcxxxxxxxxxxxxxxxxxxxxxxxx";

try {
  // æ­¥éª¤ 2: å°† Base58 ç§é’¥è§£ç ä¸ºå­—èŠ‚æ•°ç»„ (Uint8Array)
  const secretKeyBytes = bs58.decode(privateKeyBase58);

  // æ­¥éª¤ 3: ä»è§£ç åçš„å¯†é’¥åˆ›å»º Keypair å¯¹è±¡
  // Keypair.fromSecretKey ä¼šè‡ªåŠ¨å¤„ç†ï¼Œæ— è®ºè¾“å…¥æ˜¯32å­—èŠ‚çš„çº¯ç§é’¥è¿˜æ˜¯64å­—èŠ‚çš„å¯†é’¥å¯¹
  const keypair = Keypair.fromSecretKey(secretKeyBytes);

  // æ­¥éª¤ 4: å°†å®Œæ•´çš„å¯†é’¥å¯¹ï¼ˆ64å­—èŠ‚ï¼‰è½¬æ¢ä¸ºæ•°ç»„æ ¼å¼
  const keypairArray = Array.from(keypair.secretKey);

  // æ­¥éª¤ 5: å°†æ•°ç»„å†™å…¥ .json æ–‡ä»¶
  const fileName = "6SWBzQWZndeaCKg3AzbY3zkvapCu9bHFZv12iiRoGvCD.json";
  fs.writeFileSync(fileName, JSON.stringify(keypairArray));

  console.log(`âœ… æ–‡ä»¶ ${fileName} å·²æˆåŠŸç”Ÿæˆ!`);
  console.log(`ğŸ”‘ ä½ çš„é’±åŒ…åœ°å€ (å…¬é’¥) æ˜¯: ${keypair.publicKey.toBase58()}`);
  console.log("è¯·éªŒè¯è¿™ä¸ªåœ°å€æ˜¯å¦ä¸æ‚¨é¢„æœŸçš„åœ°å€ä¸€è‡´ã€‚");
} catch (error) {
  if (error instanceof Error) {
    console.error("âŒ ç”Ÿæˆå¤±è´¥ï¼Œè¯·æ£€æŸ¥ä½ çš„ç§é’¥æ ¼å¼æ˜¯å¦æ­£ç¡®ã€‚", error.message);
  } else {
    console.error("âŒ ç”Ÿæˆå¤±è´¥ï¼Œè¯·æ£€æŸ¥ä½ çš„ç§é’¥æ ¼å¼æ˜¯å¦æ­£ç¡®ã€‚", error);
  }
}

```

#### æ‰§è¡Œè„šæœ¬ç”Ÿæˆå¯†é’¥æ–‡ä»¶

```bash
Code/Solana/solana-wallet-demo is ğŸ“¦ 1.0.0 via â¬¢ v23.11.0 on ğŸ³ v28.2.2 (orbstack) 
âœ ts-node src/create-wallet.ts 
âœ… æ–‡ä»¶ 6SWBzQWZndeaCKg3AzbY3zkvapCu9bHFZv12iiRoGvCD.json å·²æˆåŠŸç”Ÿæˆ!
ğŸ”‘ ä½ çš„é’±åŒ…åœ°å€ (å…¬é’¥) æ˜¯: 6SWBzQWZndeaCKg3AzbY3zkvapCu9bHFZv12iiRoGvCD
è¯·éªŒè¯è¿™ä¸ªåœ°å€æ˜¯å¦ä¸æ‚¨é¢„æœŸçš„åœ°å€ä¸€è‡´ã€‚

```

è„šæœ¬æ‰§è¡Œåï¼ŒåŒæ ·ä¼šç”Ÿæˆä¸€ä¸ª `.json` æ–‡ä»¶ï¼Œå¹¶ä¸”ä¼šæ‰“å°å‡ºå¯¹åº”çš„é’±åŒ…åœ°å€ï¼ˆå…¬é’¥ï¼‰ï¼Œæ‚¨å¯ä»¥ç”¨æ¥æ ¸å¯¹æ˜¯å¦æ­£ç¡®ã€‚

### ç¬¬ä¸‰æ­¥ï¼šæŸ¥çœ‹ç¡®è®¤é’±åŒ…åœ°å€

```bash
Code/Solana/solana-wallet-demo is ğŸ“¦ 1.0.0 via â¬¢ v23.11.0 on ğŸ³ v28.2.2 (orbstack) 
âœ solana-keygen pubkey 6SWBzQWZndeaCKg3AzbY3zkvapCu9bHFZv12iiRoGvCD.json
6SWBzQWZndeaCKg3AzbY3zkvapCu9bHFZv12iiRoGvCD

Code/Solana/solana-wallet-demo is ğŸ“¦ 1.0.0 via â¬¢ v23.11.0 on ğŸ³ v28.2.2 (orbstack) 
âœ solana address -k 6SWBzQWZndeaCKg3AzbY3zkvapCu9bHFZv12iiRoGvCD.json   
6SWBzQWZndeaCKg3AzbY3zkvapCu9bHFZv12iiRoGvCD

```

ç®€å•æ¥è¯´ï¼š`solana-keygen` æ˜¯ä¸€ä¸ª**ä¸“ç§‘åŒ»ç”Ÿ**ï¼Œåªè´Ÿè´£å¤„ç†å¯†é’¥å¯¹ï¼›è€Œ `solana` æ˜¯ä¸€ä¸ª**å…¨ç§‘åŒ»ç”Ÿ**ï¼Œè´Ÿè´£æ‰€æœ‰ä¸é“¾ä¸Šäº¤äº’çš„äº‹æƒ…ï¼ŒæŸ¥è¯¢åœ°å€åªæ˜¯å®ƒä¼—å¤šåŠŸèƒ½ä¸­çš„ä¸€é¡¹ã€‚

ä¸‹é¢æˆ‘ä»¬ç”¨ä¸€ä¸ªè¡¨æ ¼æ¥è¯¦ç»†å¯¹æ¯”ï¼š

| ç‰¹æ€§         | `solana-keygen pubkey ...`                                   | `solana address -k ...`                                      |
| ------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **å·¥å…·å½’å±** | `solana-keygen`                                              | `solana` (ä¸»å‘½ä»¤è¡Œå·¥å…·)                                      |
| **æ ¸å¿ƒèŒè´£** | **å¯†é’¥å¯¹ç®¡ç†å·¥å…·** çº¯ç²¹çš„å¯†ç å­¦æ“ä½œ                          | **å…¨åŠŸèƒ½ç½‘ç»œäº¤äº’å®¢æˆ·ç«¯** ä¸é“¾ä¸ŠçŠ¶æ€å’Œé…ç½®æ‰“äº¤é“              |
| **æ ¸å¿ƒåŠŸèƒ½** | ä»ä¸€ä¸ªå¯†é’¥å¯¹æ–‡ä»¶ä¸­**æå–å¹¶æ˜¾ç¤ºå…¬é’¥**ã€‚å®ƒåªå…³å¿ƒæ–‡ä»¶æœ¬èº«ï¼Œä¸å…³å¿ƒä»»ä½•å¤–éƒ¨é…ç½®ã€‚ | **æ˜¾ç¤ºé’±åŒ…åœ°å€**ã€‚å®ƒçš„ä¸»è¦å·¥ä½œæ˜¯æ˜¾ç¤ºä½ **å½“å‰é…ç½®çš„é»˜è®¤é’±åŒ…**çš„åœ°å€ã€‚ |
| **çµæ´»æ€§**   | **ä¸çµæ´»**ã€‚ å¿…é¡»æ˜¾å¼æä¾›ä¸€ä¸ªå¯†é’¥å¯¹æ–‡ä»¶çš„è·¯å¾„ä½œä¸ºå‚æ•°ã€‚      | **éå¸¸çµæ´»**ã€‚ 1. **ä¸å¸¦ `-k`**ï¼šç›´æ¥è¿è¡Œ `solana address`ï¼Œä¼šæ˜¾ç¤ºä½ é»˜è®¤é’±åŒ…çš„åœ°å€ã€‚<br>2. **å¸¦ `-k`**ï¼šä½¿ç”¨ `-k` å‚æ•°å¯ä»¥**ä¸´æ—¶è¦†ç›–**é»˜è®¤è®¾ç½®ï¼ŒæŸ¥è¯¢æŒ‡å®šæ–‡ä»¶çš„åœ°å€ã€‚ |

### æ·±å…¥è§£æ

#### `solana-keygen pubkey`ï¼šå¯†ç å­¦ä¸“å®¶

æ‚¨å¯ä»¥æŠŠ `solana-keygen` çœ‹ä½œä¸€ä¸ªç‹¬ç«‹çš„ã€ä¸“æ³¨äºå¯†ç å­¦çš„å·¥å…·ç®±ã€‚å®ƒçš„æ‰€æœ‰åŠŸèƒ½éƒ½å›´ç»•ç€**å¯†é’¥å¯¹ï¼ˆKeypairï¼‰**çš„åˆ›å»ºã€æ¢å¤ã€æŸ¥çœ‹å’Œç­¾åç­‰æœ¬åœ°æ“ä½œã€‚

- **å®ƒçš„ä¸–ç•Œé‡Œåªæœ‰â€œå¯†é’¥å¯¹â€**ï¼šå½“æ‚¨è¿è¡Œ `solana-keygen pubkey` æ—¶ï¼Œå®ƒåšçš„äº‹æƒ…éå¸¸çº¯ç²¹ï¼š
  1. è¯»å–æ‚¨æä¾›çš„ `.json` æ–‡ä»¶ã€‚
  2. ä»æ–‡ä»¶ä¸­çš„ 64 å­—èŠ‚æ•°æ®é‡Œï¼Œè§£æå‡ºå 32 å­—èŠ‚çš„å…¬é’¥ã€‚
  3. å°†å…¬é’¥è¿›è¡Œ Base58 ç¼–ç åæ‰“å°å‡ºæ¥ã€‚
- å®ƒå®Œå…¨ä¸å…³å¿ƒæ‚¨çš„ Solana CLI é…ç½®ï¼Œä¹Ÿä¸çŸ¥é“å“ªä¸ªæ˜¯æ‚¨çš„â€œé»˜è®¤é’±åŒ…â€ã€‚å®ƒå°±åƒä¸€ä¸ªåªä¼šå¼€é”å’ŒéªŒé”çš„é”åŒ ï¼Œä½ ç»™å®ƒä¸€æŠŠé’¥åŒ™ï¼ˆç§é’¥æ–‡ä»¶ï¼‰ï¼Œå®ƒå°±å‘Šè¯‰ä½ è¿™æŠŠé’¥åŒ™å¯¹åº”çš„é”å¤´ï¼ˆå…¬é’¥ï¼‰é•¿ä»€ä¹ˆæ ·ã€‚

#### `solana address`ï¼šå…¨èƒ½çš„é’±åŒ…ç®¡å®¶

æ‚¨å¯ä»¥æŠŠ `solana` çœ‹ä½œæ˜¯æ‚¨ä¸ Solana ç½‘ç»œäº¤äº’çš„â€œç‘å£«å†›åˆ€â€ã€‚å®ƒçš„æ‰€æœ‰æ“ä½œéƒ½é»˜è®¤ä¸æ‚¨**å½“å‰è®¾ç½®çš„é’±åŒ…**ç›¸å…³è”ã€‚

- **å®ƒçš„ä¸–ç•Œé‡Œæœ‰â€œé»˜è®¤é’±åŒ…â€çš„æ¦‚å¿µ**ï¼š
  - å½“æ‚¨ç›´æ¥è¿è¡Œ `solana address` æ—¶ï¼Œå®ƒä¼šå»æŸ¥æ‰¾æ‚¨çš„ Solana é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°æ‚¨è®¾ç½®çš„é»˜è®¤é’±åŒ…è·¯å¾„ï¼ˆé€šå¸¸æ˜¯ `~/.config/solana/id.json`ï¼‰ï¼Œç„¶åæ˜¾ç¤ºé‚£ä¸ªé’±åŒ…çš„åœ°å€ã€‚è¿™æ˜¯å®ƒæœ€ä¸»è¦çš„ç”¨æ³•ã€‚
  - å½“æ‚¨ä½¿ç”¨ `-k` æˆ– `--keypair` å‚æ•°æ—¶ï¼Œæ‚¨æ˜¯åœ¨å¯¹å®ƒè¯´ï¼šâ€œ**å…ˆåˆ«ç®¡æˆ‘çš„é»˜è®¤é’±åŒ…ï¼Œè¯·ä¸´æ—¶å¸®æˆ‘çœ‹ä¸€ä¸‹è¿™ä¸ªç‰¹å®šæ–‡ä»¶çš„åœ°å€æ˜¯ä»€ä¹ˆ**â€ã€‚æ‰€ä»¥ï¼Œ`-k` æ˜¯ä¸€ä¸ªä¸´æ—¶çš„â€œè¦†ç›–â€é€‰é¡¹ã€‚

#### ä½¿ç”¨åœºæ™¯æ€»ç»“

- **ä»€ä¹ˆæ—¶å€™ç”¨ `solana-keygen pubkey`ï¼Ÿ**
  - å½“ä½ åœ¨ç¼–å†™è„šæœ¬ï¼Œéœ€è¦ä¸€ä¸ªç®€å•ã€æ— ä¾èµ–ã€çº¯ç²¹çš„æ–¹å¼ä»æ–‡ä»¶ä¸­è·å–å…¬é’¥æ—¶ã€‚
  - å½“ä½ åªæƒ³è¿›è¡Œæœ¬åœ°å¯†é’¥æ“ä½œï¼Œä¸æƒ³ä¸ä»»ä½• Solana é…ç½®æˆ–ç½‘ç»œçŠ¶æ€æ‰¯ä¸Šå…³ç³»æ—¶ã€‚
- **ä»€ä¹ˆæ—¶å€™ç”¨ `solana address`ï¼Ÿ**
  - å½“ä½ æƒ³å¿«é€ŸæŸ¥çœ‹**è‡ªå·±å½“å‰é»˜è®¤é’±åŒ…çš„åœ°å€**æ—¶ï¼ˆç›´æ¥è¿è¡Œ `solana address`ï¼‰ã€‚
  - å½“ä½ æƒ³åœ¨ä¸€ä¸ªâ€œé’±åŒ…ç®¡ç†â€çš„è¯­å¢ƒä¸‹ï¼Œä¸´æ—¶æŸ¥çœ‹å¦ä¸€ä¸ªå¯†é’¥æ–‡ä»¶çš„åœ°å€æ—¶ï¼ˆä½¿ç”¨ `-k`ï¼‰ã€‚è¿™æ˜¯æ—¥å¸¸å¼€å‘å’ŒæŸ¥è¯¢ä¸­æœ€å¸¸ç”¨çš„å‘½ä»¤ã€‚

#### ç»“è®º

è™½ç„¶æ®Šé€”åŒå½’ï¼Œä½† solana-keygen pubkey æ˜¯ä¸€ä¸ªæ›´åº•å±‚ã€æ›´çº¯ç²¹çš„å¯†ç å­¦å·¥å…·ï¼Œè€Œ solana address æ˜¯ä¸€ä¸ªæ›´é«˜å±‚ã€é¢å‘ç”¨æˆ·é’±åŒ…é…ç½®çš„ä¾¿æ·å·¥å…·ã€‚æ‚¨è¿™æ¬¡çš„ç”¨æ³•æ­£å¥½å‘½ä¸­äº†å®ƒä»¬åŠŸèƒ½çš„äº¤é›†ï¼Œæ‰€ä»¥å¾—åˆ°äº†ç›¸åŒçš„ç»“æœã€‚

## **é€šè¿‡åŠ©è®°è¯ç”Ÿæˆ Solana å¯†é’¥æ–‡ä»¶**

#### **é€šè¿‡åŠ©è®°è¯ç”Ÿæˆ Solana å¯†é’¥å¯¹**

```bash
solana-keygen recover -o custom-wallet.json
[recover] seed phrase: 
[recover] If this seed phrase has an associated passphrase, enter it now. Otherwise, press ENTER to continue: 
Recovered pubkey `"6SWBzQWZndeaCKg3AzbY3zkvapCu9bHFZv12iiRoGvCD"`. Continue? (y/n): 
y
Wrote recovered keypair to custom-wallet.json
```

æŒ‰æç¤ºè¾“å…¥åŠ©è®°è¯ã€‚

#### æ ¹æ®æ‚¨çš„ `ls -l` è¾“å‡ºï¼Œ`custom-wallet.json` æ–‡ä»¶æƒé™å’Œå±æ€§æ˜¾ç¤ºå¦‚ä¸‹

```bash
ls -l custom-wallet.json 
-rw-------@ 1 qiaopengjun  staff  226 Jun 29 13:46 custom-wallet.json
```

#### æŸ¥çœ‹æ–‡ä»¶å†…å®¹

```bash
cat custom-wallet.json
[4,70,183,17, ... 230,246]%                                                                                   
```

### éªŒè¯å¯†é’¥å¯¹

```bash
solana-keygen verify 6SWBzQWZndeaCKg3AzbY3zkvapCu9bHFZv12iiRoGvCD custom-wallet.json
Verification for public key: 6SWBzQWZndeaCKg3AzbY3zkvapCu9bHFZv12iiRoGvCD: Success
```

æ ¹æ®æ‚¨çš„éªŒè¯ç»“æœï¼Œ`custom-wallet.json` æ–‡ä»¶ä¸­çš„å¯†é’¥å¯¹å·²æˆåŠŸé€šè¿‡éªŒè¯ï¼Œå¯¹åº”çš„å…¬é’¥ä¸º `6SWBzQWZndeaCKg3AzbY3zkvapCu9bHFZv12iiRoGvCD`ã€‚

#### **ä»å¯†é’¥æ–‡ä»¶ `custom-wallet.json` ä¸­æå–å¹¶æ˜¾ç¤ºå¯¹åº”çš„ Solana å…¬é’¥åœ°å€**

```bash
solana address -k custom-wallet.json 
6SWBzQWZndeaCKg3AzbY3zkvapCu9bHFZv12iiRoGvCD
```

#### **æŸ¥è¯¢æŒ‡å®šå¯†é’¥æ–‡ä»¶å¯¹åº”çš„ Solana åŒºå—é“¾è´¦æˆ·ä¿¡æ¯**

```bash
solana account custom-wallet.json

Public Key: 6SWBzQWZndeaCKg3AzbY3zkvapCu9bHFZv12iiRoGvCD
Balance: 102.70584242 SOL
Owner: 11111111111111111111111111111111
Executable: false
Rent Epoch: 18446744073709551615

```

## æŒ‡å®šé’±åŒ…åœ°å€éƒ¨ç½² Solana åˆçº¦

### ä¿®æ”¹é…ç½®æ–‡ä»¶

ç›´æ¥ä¿®æ”¹é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `Anchor.toml` æ–‡ä»¶ã€‚

åœ¨æ–‡ä»¶æœ«å°¾æ‰¾åˆ°æˆ–æ·»åŠ  `[provider]` éƒ¨åˆ†ï¼Œå¹¶æŒ‡å®š `wallet` çš„è·¯å¾„ã€‚

```toml
[provider]
cluster = "localnet"
# wallet = "~/.config/solana/id.json"
wallet = "/Users/qiaopengjun/Code/Solana/solana-wallet-demo/6SWBzQWZndeaCKg3AzbY3zkvapCu9bHFZv12iiRoGvCD.json"

```

## æœ¬åœ°éƒ¨ç½²

### ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨æœ¬åœ°èŠ‚ç‚¹

```bash
âœ anchor localnet 
    Finished `release` profile [optimized] target(s) in 0.12s
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.12s
     Running unittests src/lib.rs (/Users/.../target/debug/deps/red_packet-5c51beafed6b9bf6)
Ledger location: .anchor/test-ledger
Log: .anchor/test-ledger/validator.log
â ¤ Initializing...                                                                                                                           Waiting for fees to stabilize 1...
Identity: HMfJQKak1CZc23oSnJbdNC7UjF4RoHDLuP3k2J5QLxW5
Genesis Hash: 4Rw2D9RRqHrv1zagY8GgsLSfJDNSFdoWsBuEMoJny3Zo
Version: 2.2.19
Shred Version: 38176
Gossip Address: 127.0.0.1:1024
TPU Address: 127.0.0.1:1027
JSON RPC URL: http://127.0.0.1:8899
WebSocket PubSub URL: ws://127.0.0.1:8900
â ¤ 00:00:17 | Processed Slot: 37 | Confirmed Slot: 37 | Finalized Slot: 6 | Full Snapshot Slot: - | Incremental Snapshot Slot: - | Transactions                       
```

### ç¬¬äºŒæ­¥ï¼š éƒ¨ç½²åˆçº¦

```bash
# æœ¬åœ°éƒ¨ç½²æŠ¥é”™
âœ anchor deploy --provider.cluster localnet 
Deploying cluster: http://127.0.0.1:8899
Upgrade authority: /Users/qiaopengjun/Code/Solana/solana-wallet-demo/6SWBzQWZndeaCKg3AzbY3zkvapCu9bHFZv12iiRoGvCD.json
Deploying program "red_packet"...
Program path: /Users/.../target/deploy/red_packet.so...
Error: Program's authority Some(11111111111111111111111111111111) does not match authority provided 6SWBzQWZndeaCKg3AzbY3zkvapCu9bHFZv12iiRoGvCD
There was a problem deploying: Output { status: ExitStatus(unix_wait_status(256)), stdout: "", stderr: "" }.

# åˆ é™¤
âœ rm -f target/deploy/red_packet-keypair.json            

# æŸ¥çœ‹
âœ anchor keys list                         
red_packet: h5cjZ2zEE64kvwMahe1u4PEKy8pZJ9qHmqD7z1VvZz3

# åŒæ­¥
âœ anchor keys sync
Found incorrect program id declaration in "/Users/.../programs/red_packet/src/lib.rs"
Updated to h5cjZ2zEE64kvwMahe1u4PEKy8pZJ9qHmqD7z1VvZz3

Found incorrect program id declaration in Anchor.toml for the program `red_packet`
Updated to h5cjZ2zEE64kvwMahe1u4PEKy8pZJ9qHmqD7z1VvZz3

All program id declarations are synced.
Please rebuild the program to update the generated artifacts.

# éƒ¨ç½²æˆåŠŸ
âœ anchor deploy                              
Deploying cluster: http://127.0.0.1:8899
Upgrade authority: /Users/qiaopengjun/Code/Solana/solana-wallet-demo/6SWBzQWZndeaCKg3AzbY3zkvapCu9bHFZv12iiRoGvCD.json
Deploying program "red_packet"...
Program path: /Users/.../target/deploy/red_packet.so...
Program Id: h5cjZ2zEE64kvwMahe1u4PEKy8pZJ9qHmqD7z1VvZz3

Signature: FEPLTofdZEcjQ6jpaQQ25BTQT9VDeTTqAWF6VeDCdnB6qpgH62KvoQgDuxvm7RUd6Nr6EAaDmK2WWGdZCgTKakV

Deploy success
```

**æ³¨æ„**ï¼šåœ¨æœ¬åœ°æµ‹è¯•ç½‘ç»œ (`localnet`) ä¸­ï¼Œä½¿ç”¨è‡ªå®šä¹‰ï¼ˆé“å·ï¼‰ç¨‹åºåœ°å€è¿›è¡Œéƒ¨ç½²æ—¶ï¼Œå¯èƒ½ä¼šå› ç½•è§çš„æœ¬åœ°éªŒè¯å™¨ç¯å¢ƒå†²çªï¼Œè€Œå¯¼è‡´æƒé™ä¸åŒ¹é…çš„éƒ¨ç½²å¤±è´¥ã€‚

**ä¸ºè§„é¿æœ¬åœ°ç¯å¢ƒå†²çªï¼Œæœ¬åœ°å¼€å‘ä½¿ç”¨éšæœºåœ°å€ï¼Œä»…åœ¨éƒ¨ç½²åˆ° Devnet/Mainnet æ—¶æ›¿æ¢ä¸ºè‡ªå®šä¹‰åœ°å€ã€‚**

## å¼€å‘æµ‹è¯•ç½‘ Devnet éƒ¨ç½²

### ç¬¬ä¸€æ­¥ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶ cluster = "devnet"

```bash
[toolchain]
package_manager = "yarn"

[features]
resolution = true
skip-lint = false

[programs.devnet]
red_packet = "Red9fb6BSry45DQfDFzwpp55JVV22VAZJtMofStXHBF"

[programs.localnet]
red_packet = "Red9fb6BSry45DQfDFzwpp55JVV22VAZJtMofStXHBF"

[programs.mainnet]
red_packet = "Red9fb6BSry45DQfDFzwpp55JVV22VAZJtMofStXHBF"

[registry]
url = "https://api.apr.dev"

[provider]
cluster = "devnet"
wallet = "~/Code/Solana/solana-wallet-demo/6SWBzQWZndeaCKg3AzbY3zkvapCu9bHFZv12iiRoGvCD.json"

[scripts]
test = "yarn run ts-mocha -p ./tsconfig.json -t 1000000 tests/**/*.ts"

```

### ç¬¬äºŒæ­¥ï¼šéƒ¨ç½²å®æ“

```bash
# ä»¥ä¸‹æ“ä½œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ
âœ anchor keys sync
All program id declarations are synced.

âœ anchor keys list
red_packet: Red9fb6BSry45DQfDFzwpp55JVV22VAZJtMofStXHBF

âœ anchor build                             
    Finished `release` profile [optimized] target(s) in 0.44s
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.39s
     Running unittests src/lib.rs (/Users/qiaopengjun/.../target/debug/deps/red_packet-5c51beafed6b9bf6)

âœ source .env                              

âœ anchor deploy --provider.cluster $RPC_URL
Deploying cluster: https://devnet.helius-rpc.com/?api-key=...
Upgrade authority: /Users/qiaopengjun/Code/Solana/solana-wallet-demo/6SWBzQWZndeaCKg3AzbY3zkvapCu9bHFZv12iiRoGvCD.json
Deploying program "red_packet"...
Program path: /Users/.../target/deploy/red_packet.so...
Program Id: Red9fb6BSry45DQfDFzwpp55JVV22VAZJtMofStXHBF

Signature: 2NGxuVMaBzrsbePk37PniEJWzqTF19qrngeL7xNZXhRCRSYEprqr5hNLXgvaJDBGed8DBpp94rKurV7vJPcKBT4Y

Deploy success
```

ç»ˆäºæˆåŠŸåœ°å°†åˆçº¦éƒ¨ç½²åˆ°äº†å…¬å¼€å¼€å‘ç½‘ï¼ˆDevnetï¼‰ï¼Œè€Œä¸”è¿˜æˆåŠŸåœ°ä½¿ç”¨äº†æ‚¨æƒ³è¦çš„**è‡ªå®šä¹‰é“å·åœ°å€** (`Red9fb...`)ï¼

<https://solscan.io/account/Red9fb6BSry45DQfDFzwpp55JVV22VAZJtMofStXHBF?cluster=devnet>

ä¸»ç½‘ (Mainnet) éƒ¨ç½²å’Œ Devnet ä¸€æ ·ï¼Œåªéœ€ä¿®æ”¹é…ç½®æ–‡ä»¶Anchor.toml ä¸­ `cluster = "mainnet"`å³å¯ã€‚

## æ€»ç»“

ç»è¿‡æœ¬æ–‡çš„é€æ­¥å¼•å¯¼ï¼Œç›¸ä¿¡æ‚¨å·²ç»æˆåŠŸæŒæ¡äº†åœ¨ Solana ç”Ÿæ€ä¸­ä½¿ç”¨ Anchor æ¡†æ¶éƒ¨ç½²æ™ºèƒ½åˆçº¦çš„å…¨å¥—æµç¨‹ã€‚

æˆ‘ä»¬ä»ä¸€ä¸ªç‚«é…·çš„å®æˆ˜æŠ€å·§â€”â€”**ç”Ÿæˆå¹¶é…ç½®è‡ªå®šä¹‰é“å· Program ID**â€”â€”å¼€å§‹ï¼Œè®©æ‚¨çš„é¡¹ç›®åœ¨é“¾ä¸Šæ‹¥æœ‰ç‹¬ä¸€æ— äºŒçš„èº«ä»½æ ‡è¯†ã€‚æ¥ç€ï¼Œæˆ‘ä»¬æ·±å…¥æ¢è®¨äº†**é’±åŒ…å¯†é’¥çš„ç®¡ç†ä¸ä½¿ç”¨**ï¼Œç¡®ä¿æ‚¨èƒ½çµæ´»åœ°å°†ç°æœ‰é’±åŒ…ä½œä¸ºéƒ¨ç½²å’Œå‡çº§æƒé™çš„ç®¡ç†æ–¹ã€‚

åœ¨éƒ¨ç½²å®æ“éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä¸ä»…èµ°é€šäº†**æœ¬åœ°ï¼ˆLocalnetï¼‰å’Œå¼€å‘ç½‘ï¼ˆDevnetï¼‰çš„éƒ¨ç½²**ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬ç‚¹å‡ºäº†æœ¬åœ°éƒ¨ç½²ä¸­å¯èƒ½é‡åˆ°çš„ `authority` æƒé™ä¸åŒ¹é…é—®é¢˜ï¼Œå¹¶ç»™å‡ºäº† `anchor keys sync` ç­‰å‘½ä»¤çš„è§£å†³æ–¹æ¡ˆã€‚è¿™æ­£æ˜¯æ–°æ‰‹åœ¨å®è·µä¸­æœ€å®¹æ˜“å¡ä½çš„ç¯èŠ‚ã€‚

æ€»è€Œè¨€ä¹‹ï¼Œä¸€ä¸ªæˆåŠŸçš„ Solana åˆçº¦éƒ¨ç½² = **æ¸…æ™°çš„é¡¹ç›®é…ç½® + æ­£ç¡®çš„å¯†é’¥ç®¡ç† + ç†Ÿæ‚‰çš„ç¯å¢ƒéƒ¨ç½²å‘½ä»¤**ã€‚ç°åœ¨ï¼Œæ‚¨ä¸ä»…æ‹¥æœ‰äº†å°†é¡¹ç›®å‘å¸ƒåˆ° Devnet çš„èƒ½åŠ›ï¼Œæ›´å¯ä»¥å……æ»¡ä¿¡å¿ƒåœ°å°† `cluster` ä¿®æ”¹ä¸º `mainnet`ï¼Œå‘ç€ä¸»ç½‘çš„æ˜Ÿè¾°å¤§æµ·è¿ˆå‡ºåšå®çš„ä¸€æ­¥ï¼

## å‚è€ƒ

- <https://solana.com/zh/docs/programs/rust>
- <https://www.anchor-lang.com/docs/quickstart/local>
- <https://solscan.io/account/Red9fb6BSry45DQfDFzwpp55JVV22VAZJtMofStXHBF?cluster=devnet>
