+++
title = "Solana æŠ•ç¥¨ DApp å¼€å‘å®æˆ˜ï¼šä»åˆçº¦åˆ°éƒ¨ç½²çš„å®Œæ•´æŒ‡å—"
description = "Solana æŠ•ç¥¨ DApp å¼€å‘å®æˆ˜ï¼šä»åˆçº¦åˆ°éƒ¨ç½²çš„å®Œæ•´æŒ‡å—"
date = 2025-07-21T00:56:45Z
[taxonomies]
categories = ["Web3", "Solana", "Anchor", "DApp"]
tags = ["Web3", "Solana", "Anchor", "DApp"]
+++

<!-- more -->

# Solana æŠ•ç¥¨ DApp å¼€å‘å®æˆ˜ï¼šä»åˆçº¦åˆ°éƒ¨ç½²çš„å®Œæ•´æŒ‡å—

Solana ä»¥å…¶é«˜æ€§èƒ½å’Œä½æˆæœ¬çš„ç‰¹ç‚¹ï¼Œæ­£å¸å¼•ç€è¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…è¿›å…¥å…¶ç”Ÿæ€ã€‚è€Œ Anchor æ¡†æ¶çš„å‡ºç°ï¼Œæ›´æ˜¯æå¤§åœ°é™ä½äº† Solana æ™ºèƒ½åˆçº¦çš„å¼€å‘é—¨æ§›ã€‚ä½†å¯¹äºè®¸å¤šåˆå­¦è€…æ¥è¯´ï¼Œå¦‚ä½•å°†é›¶æ•£çš„çŸ¥è¯†ç‚¹ä¸²è”èµ·æ¥ï¼Œå®Œæˆä¸€ä¸ªä»æ— åˆ°æœ‰çš„å®Œæ•´é¡¹ç›®ï¼Œä»ç„¶æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä¸€èµ·ä»é›¶å¼€å§‹ï¼Œä»¥ä¸€ä¸ªç»å…¸çš„â€œé“¾ä¸ŠæŠ•ç¥¨â€åº”ç”¨ä¸ºç›®æ ‡ï¼Œä½¿ç”¨å¼ºå¤§çš„ Anchor æ¡†æ¶æ¥å®Œæˆè¿™ä¸ªä»»åŠ¡ã€‚æˆ‘ä»¬å°†ä¾æ¬¡ç»å†ä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š

1. **ç¯å¢ƒå‡†å¤‡ä¸é¡¹ç›®åˆå§‹åŒ–**
2. **æ™ºèƒ½åˆçº¦ï¼ˆç¨‹åºï¼‰çš„è¯¦ç»†å®ç°ä¸è®²è§£**
3. **ç¼–å†™å¹¶è¿è¡Œè¦†ç›–æ­£ååœºæ™¯çš„å…¨é¢æµ‹è¯•è„šæœ¬**
4. **ç¼–è¯‘ã€éƒ¨ç½²åˆçº¦åˆ° Solana å¼€å‘ç½‘ç»œå¹¶è¿›è¡Œé“¾ä¸ŠéªŒè¯**

æœ€ç»ˆï¼Œä½ å°†æ‹¥æœ‰ä¸€ä¸ªéƒ¨ç½²åœ¨å…¬é“¾ä¸Šã€å¯ä»¥é€šè¿‡åŒºå—æµè§ˆå™¨éªŒè¯çš„ DAppã€‚æ— è®ºä½ æ˜¯å¸Œæœ›è½¬å‹çš„ Web2 å¼€å‘è€…ï¼Œè¿˜æ˜¯å¯¹ Web3 å……æ»¡å¥½å¥‡çš„å­¦ä¹ è€…ï¼Œç›¸ä¿¡è¿™ç¯‡è¯¦å°½çš„å®æˆ˜æ–‡ç« éƒ½èƒ½ä¸ºä½ ç‚¹äº® Solana å¼€å‘çš„æŠ€èƒ½æ ‘ã€‚

æœ¬æ–‡ä»¥ä¸€ä¸ªé“¾ä¸ŠæŠ•ç¥¨ DApp ä¸ºä¾‹ï¼Œå®Œæ•´æ¼”ç¤ºäº† Solana å¼€å‘å…¨æµç¨‹ã€‚ä½ å°†è·Ÿéšæœ¬æŒ‡å—ï¼Œä½¿ç”¨ Anchor æ¡†æ¶äº²æ‰‹å®Œæˆé¡¹ç›®åˆ›å»ºã€åˆçº¦ç¼–å†™ã€å•å…ƒæµ‹è¯•ä¸æœ€ç»ˆçš„é“¾ä¸Šéƒ¨ç½²ã€‚æ–‡ç« è¯¦å°½è®°å½•äº†æ¯ä¸€æ­¥æ“ä½œä¸å…³é”®ä»£ç ï¼Œæ˜¯å…¥é—¨ Solana ä¸å¯é”™è¿‡çš„ç«¯åˆ°ç«¯å®æˆ˜æ•™ç¨‹ã€‚

## å®æ“

### åˆ›å»ºé¡¹ç›®

```bash
anchor init voting
yarn install v1.22.22
info No lockfile found.
[1/4] ğŸ”  Resolving packages...
info There appears to be trouble with your network connection. Retrying...
info There appears to be trouble with your network connection. Retrying...
warning mocha > glob@7.2.0: Glob versions prior to v9 are no longer supported
warning mocha > glob > inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
[2/4] ğŸšš  Fetching packages...
[3/4] ğŸ”—  Linking dependencies...
[4/4] ğŸ”¨  Building fresh packages...
success Saved lockfile.
âœ¨  Done in 29.40s.
Failed to install node modules
æç¤ºï¼š ä½¿ç”¨ 'master' ä½œä¸ºåˆå§‹åˆ†æ”¯çš„åç§°ã€‚è¿™ä¸ªé»˜è®¤åˆ†æ”¯åç§°å¯èƒ½ä¼šæ›´æ”¹ã€‚è¦åœ¨æ–°ä»“åº“ä¸­
æç¤ºï¼š é…ç½®ä½¿ç”¨åˆå§‹åˆ†æ”¯åï¼Œå¹¶æ¶ˆé™¤è¿™æ¡è­¦å‘Šï¼Œè¯·æ‰§è¡Œï¼š
æç¤ºï¼š
æç¤ºï¼š  git config --global init.defaultBranch <åç§°>
æç¤ºï¼š
æç¤ºï¼š é™¤äº† 'master' ä¹‹å¤–ï¼Œé€šå¸¸é€‰å®šçš„åå­—æœ‰ 'main'ã€'trunk' å’Œ 'development'ã€‚
æç¤ºï¼š å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤é‡å‘½ååˆšåˆ›å»ºçš„åˆ†æ”¯ï¼š
æç¤ºï¼š
æç¤ºï¼š  git branch -m <name>
æç¤ºï¼š
æç¤ºï¼š Disable this message with "git config set advice.defaultBranchName false"
å·²åˆå§‹åŒ–ç©ºçš„ Git ä»“åº“äº /Users/qiaopengjun/Code/Solana/voting/.git/
voting initialized
```

### åˆ‡æ¢åˆ°é¡¹ç›®ç›®å½•å¹¶ç”¨`cursor` æ‰“å¼€é¡¹ç›®

```bash
cd voting
cc # open -a cursor .
```

### æŸ¥çœ‹é¡¹ç›®ç›®å½•ç»“æ„

```bash
voting on î‚  master [!?] via â¬¢ v23.11.0 via ğŸ¦€ 1.88.0 
âœ tree . -L 6 -I "migrations|mochawesome-report|.anchor|docs|target|node_modules"
.
â”œâ”€â”€ Anchor.toml
â”œâ”€â”€ app
â”œâ”€â”€ Cargo.lock
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ cliff.toml
â”œâ”€â”€ idls
â”‚   â””â”€â”€ voting
â”‚       â””â”€â”€ voting-2025-07-18-093219.json
â”œâ”€â”€ Makefile
â”œâ”€â”€ package.json
â”œâ”€â”€ pnpm-lock.yaml
â”œâ”€â”€ programs
â”‚   â””â”€â”€ voting
â”‚       â”œâ”€â”€ Cargo.toml
â”‚       â”œâ”€â”€ src
â”‚       â”‚   â””â”€â”€ lib.rs
â”‚       â””â”€â”€ Xargo.toml
â”œâ”€â”€ tests
â”‚   â””â”€â”€ voting.ts
â”œâ”€â”€ tsconfig.json

18 directories, 37 files

```

### å®ç°ç¨‹åºï¼ˆåˆçº¦ï¼‰ `lib.rs`

```rust
#![allow(unexpected_cfgs, deprecated)]

use anchor_lang::prelude::*;

declare_id!("Doo2arLUifZbfqGVS5Uh7nexAMmsMzaQH5zcwZhSoijz");

#[program]
pub mod voting {
    use super::*;

    // åˆå§‹åŒ–æŠ•ç¥¨æ´»åŠ¨
    pub fn initialize_poll(
        ctx: Context<InitializePoll>,
        name: String,
        description: String,
        start_time: u64,
        end_time: u64,
    ) -> Result<()> {
        let poll_account = &mut ctx.accounts.poll_account;
        poll_account.name = name;
        poll_account.description = description;
        poll_account.start_time = start_time;
        poll_account.end_time = end_time;
        poll_account.authority = ctx.accounts.signer.key();
        poll_account.candidates = Vec::new();

        // å…³é”®ä¿®å¤ï¼šä½¿ç”¨ä¸“é—¨çš„è®¡æ•°å™¨ï¼Œé¿å… Vec.len() çš„è§£é‡Šé”™è¯¯
        poll_account.candidate_count = 0;

        Ok(())
    }

    // æ·»åŠ å€™é€‰äºº
    pub fn add_candidate(ctx: Context<AddCandidate>, candidate_name: String) -> Result<()> {
        require_keys_eq!(
            ctx.accounts.poll_account.authority,
            ctx.accounts.signer.key(),
            ErrorCode::Unauthorized
        );

        let poll_account = &mut ctx.accounts.poll_account;
        let candidate_account = &mut ctx.accounts.candidate_account;

        // æ£€æŸ¥ä¸“é—¨çš„è®¡æ•°å™¨ï¼Œè€Œä¸æ˜¯ Vec.len()
        require!(
            poll_account.candidate_count < 15,
            ErrorCode::MaxCandidatesReached
        );

        candidate_account.name = candidate_name;
        candidate_account.poll = poll_account.key();
        candidate_account.votes = 0;

        poll_account.candidates.push(candidate_account.key());
        // åœ¨æˆåŠŸæ·»åŠ åï¼Œæ‰‹åŠ¨å¢åŠ è®¡æ•°å™¨
        poll_account.candidate_count += 1;

        Ok(())
    }

    // æŠ•ç¥¨
    pub fn vote(ctx: Context<Vote>) -> Result<()> {
        let clock = Clock::get()?;
        let poll_account = &ctx.accounts.poll_account;
        let candidate_account = &mut ctx.accounts.candidate_account;

        if clock.unix_timestamp < poll_account.start_time as i64 {
            return err!(ErrorCode::PollNotStarted);
        }

        if clock.unix_timestamp > poll_account.end_time as i64 {
            return err!(ErrorCode::PollEnded);
        }

        require_keys_eq!(
            candidate_account.poll,
            poll_account.key(),
            ErrorCode::InvalidCandidateForPoll
        );

        candidate_account.votes += 1;

        let receipt = &mut ctx.accounts.voter_receipt;
        receipt.voter = ctx.accounts.signer.key();
        receipt.poll = poll_account.key();

        Ok(())
    }
}

#[derive(Accounts)]
pub struct InitializePoll<'info> {
    #[account(mut)]
    pub signer: Signer<'info>,
    #[account(init, payer = signer, space = 8 + PollAccount::INIT_SPACE)]
    pub poll_account: Account<'info, PollAccount>,
    pub system_program: Program<'info, System>,
}

#[derive(Accounts)]
pub struct AddCandidate<'info> {
    #[account(mut)]
    pub signer: Signer<'info>,
    #[account(mut)]
    pub poll_account: Account<'info, PollAccount>,
    #[account(
        init,
        payer = signer,
        space = 8 + CandidateAccount::INIT_SPACE,
        // seeds ç°åœ¨ä½¿ç”¨æ›´å¯é çš„è®¡æ•°å™¨
        seeds = [b"candidate", poll_account.key().as_ref(), poll_account.candidate_count.to_le_bytes().as_ref()],
        bump
    )]
    pub candidate_account: Account<'info, CandidateAccount>,
    pub system_program: Program<'info, System>,
}

#[derive(Accounts)]
pub struct Vote<'info> {
    #[account(mut)]
    pub signer: Signer<'info>,
    #[account(mut)]
    pub poll_account: Account<'info, PollAccount>,
    #[account(
        mut,
        constraint = candidate_account.poll == poll_account.key() @ ErrorCode::InvalidCandidateForPoll
    )]
    pub candidate_account: Account<'info, CandidateAccount>,
    #[account(
        init,
        payer = signer,
        space = 8 + VoterReceipt::INIT_SPACE,
        seeds = [b"receipt", poll_account.key().as_ref(), signer.key().as_ref()],
        bump
    )]
    pub voter_receipt: Account<'info, VoterReceipt>,
    pub system_program: Program<'info, System>,
}

#[account]
#[derive(InitSpace)]
pub struct PollAccount {
    pub authority: Pubkey,
    #[max_len(32)]
    pub name: String,
    #[max_len(280)]
    pub description: String,
    pub start_time: u64,
    pub end_time: u64,
    // å¢åŠ ä¸“é—¨çš„è®¡æ•°å™¨
    pub candidate_count: u8,
    #[max_len(15, 32)]
    pub candidates: Vec<Pubkey>,
}

#[account]
#[derive(InitSpace)]
pub struct CandidateAccount {
    pub poll: Pubkey,
    #[max_len(32)]
    pub name: String,
    pub votes: u64,
}

#[account]
#[derive(InitSpace)]
pub struct VoterReceipt {
    pub voter: Pubkey,
    pub poll: Pubkey,
}

#[error_code]
pub enum ErrorCode {
    #[msg("Poll not started yet")]
    PollNotStarted,
    #[msg("Poll ended")]
    PollEnded,
    #[msg("Unauthorized: Only the poll authority can perform this action.")]
    Unauthorized,
    #[msg("Maximum number of candidates reached.")]
    MaxCandidatesReached,
    #[msg("This candidate is not valid for this poll.")]
    InvalidCandidateForPoll,
}

```

è¿™æ®µä»£ç ä½¿ç”¨ Solana çš„ Anchor æ¡†æ¶å®ç°äº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„é“¾ä¸ŠæŠ•ç¥¨æ™ºèƒ½åˆçº¦ã€‚å®ƒæ¸…æ™°åœ°å±•ç¤ºäº†å¦‚ä½•å®šä¹‰ç¨‹åºé€»è¾‘ã€ç®¡ç†é“¾ä¸Šæ•°æ®çŠ¶æ€ä»¥åŠå¤„ç†æƒé™éªŒè¯ã€‚åˆçº¦çš„æ ¸å¿ƒåŠŸèƒ½å¯ä»¥åˆ†è§£ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š

### **æ ¸å¿ƒåŠŸèƒ½ (Instructions)**

åˆçº¦å®šä¹‰äº†ä¸‰ä¸ªä¸»è¦çš„å…¬å¼€æŒ‡ä»¤ï¼ˆInstructionsï¼‰ï¼Œå¯¹åº”ç”¨æˆ·å¯ä»¥æ‰§è¡Œçš„æ“ä½œï¼š

1. `initialize_poll(..)`: **åˆå§‹åŒ–æŠ•ç¥¨**ã€‚æ­¤å‡½æ•°ç”¨äºåˆ›å»ºä¸€ä¸ªæ–°çš„æŠ•ç¥¨æ´»åŠ¨ã€‚è°ƒç”¨è€…ï¼ˆ`signer`ï¼‰æ”¯ä»˜äº¤æ˜“è´¹ç”¨ï¼Œå¹¶æˆä¸ºè¯¥æŠ•ç¥¨çš„**ç®¡ç†å‘˜ï¼ˆ`authority`ï¼‰**ã€‚å‡½æ•°ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ `PollAccount` è´¦æˆ·ï¼Œç”¨æ¥å­˜å‚¨æŠ•ç¥¨çš„åç§°ã€æè¿°ã€èµ·æ­¢æ—¶é—´ä»¥åŠç®¡ç†å‘˜å…¬é’¥ç­‰å…ƒæ•°æ®ã€‚
2. `add_candidate(..)`: **æ·»åŠ å€™é€‰äºº**ã€‚åªæœ‰æŠ•ç¥¨çš„ç®¡ç†å‘˜æ‰æœ‰æƒé™è°ƒç”¨æ­¤å‡½æ•°ã€‚å®ƒä¼šä¸ºæŠ•ç¥¨æ´»åŠ¨åˆ›å»ºä¸€ä¸ªæ–°çš„ `CandidateAccount` è´¦æˆ·æ¥ä»£è¡¨ä¸€ä½å€™é€‰äººã€‚ä»£ç ä¸­æœ‰ä¸€ä¸ªé‡è¦çš„å®‰å…¨è®¾è®¡ï¼šå®ƒä½¿ç”¨ä¸€ä¸ªç‹¬ç«‹çš„ `candidate_count` å­—æ®µæ¥ç”Ÿæˆæ–°å€™é€‰äººè´¦æˆ·çš„åœ°å€ï¼ˆPDAï¼‰ï¼Œå¹¶é™åˆ¶æœ€å¤šåªèƒ½æ·»åŠ  15 ä½å€™é€‰äººã€‚
3. `vote(..)`: **æŠ•ç¥¨**ã€‚ä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥è°ƒç”¨æ­¤å‡½æ•°ä¸ºç‰¹å®šå€™é€‰äººæŠ•ç¥¨ã€‚åˆçº¦ä¼šé¦–å…ˆéªŒè¯æŠ•ç¥¨æ˜¯å¦åœ¨æœ‰æ•ˆæ—¶é—´èŒƒå›´å†…ï¼Œç„¶åä¸ºæŠ•ç¥¨è€…åˆ›å»ºä¸€ä¸ª `VoterReceipt` è´¦æˆ·ã€‚è¿™ä¸ªå›æ‰§è´¦æˆ·çš„å­˜åœ¨å¯ä»¥æœ‰æ•ˆ**é˜²æ­¢åŒä¸€ç”¨æˆ·åœ¨åŒä¸€æ¬¡æŠ•ç¥¨ä¸­é‡å¤æŠ•ç¥¨**ã€‚

### **é“¾ä¸Šæ•°æ®ç»“æ„ (Accounts)**

ä¸ºäº†æ”¯æŒä¸Šè¿°åŠŸèƒ½ï¼Œåˆçº¦å®šä¹‰äº†ä¸‰ç§ç±»å‹çš„è´¦æˆ·ï¼ˆAccountï¼‰æ¥å­˜å‚¨çŠ¶æ€ï¼š

- `PollAccount`: **æŠ•ç¥¨è´¦æˆ·**ï¼Œå­˜å‚¨å•ä¸ªæŠ•ç¥¨æ´»åŠ¨çš„æ‰€æœ‰æ ¸å¿ƒä¿¡æ¯ï¼Œæ˜¯æ•´ä¸ªåº”ç”¨çŠ¶æ€çš„ä¸­å¿ƒã€‚
- `CandidateAccount`: **å€™é€‰äººè´¦æˆ·**ï¼Œå­˜å‚¨æ¯ä¸ªå€™é€‰äººçš„å§“åå’Œå¾—ç¥¨æ•°ï¼Œå¹¶å…³è”åˆ°ç‰¹å®šçš„ `PollAccount`ã€‚
- `VoterReceipt`: **æŠ•ç¥¨å›æ‰§è´¦æˆ·**ï¼Œä½œä¸ºä¸€ä¸ªæ ‡è®°ï¼Œè®°å½•ä¸€ä¸ªç”¨æˆ·ï¼ˆ`voter`ï¼‰æ˜¯å¦å·²å‚ä¸äº†æŸæ¬¡æŠ•ç¥¨ï¼ˆ`poll`ï¼‰ã€‚

### **å…³é”®è®¾è®¡ä¸å®‰å…¨äº®ç‚¹**

è¿™æ®µä»£ç ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„å®ç°ç»†èŠ‚æ˜¯ä½¿ç”¨äº† `candidate_count` å­—æ®µæ¥è¾…åŠ©åˆ›å»ºå€™é€‰äººè´¦æˆ·ã€‚åœ¨ `add_candidate` æŒ‡ä»¤ä¸­ï¼Œæ–°çš„ `CandidateAccount` æ˜¯ä¸€ä¸ªç¨‹åºæ´¾ç”Ÿåœ°å€ï¼ˆPDAï¼‰ï¼Œå…¶ `seeds` åŒ…å«äº†è¿™ä¸ªè®¡æ•°å™¨ã€‚

è¿™ç§è®¾è®¡æ¨¡å¼æ¯”ç›´æ¥ä½¿ç”¨ `poll_account.candidates.len()`ï¼ˆå³å€™é€‰äººåˆ—è¡¨çš„é•¿åº¦ï¼‰ä½œä¸º `seed` æ›´åŠ **å®‰å…¨å’Œå¥å£®**ã€‚å› ä¸ºè´¦æˆ·æ•°æ®ï¼ˆå¦‚ `Vec` çš„é•¿åº¦ï¼‰åœ¨äº¤æ˜“å¤„ç†å‰å¯èƒ½è¢«å¤–éƒ¨æ“çºµï¼Œè€Œä½¿ç”¨ä¸€ä¸ªåœ¨é€»è¾‘ä¸­**æ‰‹åŠ¨é€’å¢çš„ç‹¬ç«‹è®¡æ•°å™¨**ï¼Œå¯ä»¥ç¡®ä¿ PDA åœ°å€çš„ç”Ÿæˆæ˜¯ç¡®å®šä¸”æ— æ³•è¢«æ¶æ„åˆ©ç”¨çš„ï¼Œè¿™æ˜¯ Solana å¼€å‘ä¸­ä¸€ä¸ªé‡è¦çš„å®‰å…¨å®è·µã€‚

### Build ç¼–è¯‘ç¨‹åºï¼ˆåˆçº¦ï¼‰

```bash
voting on î‚  master [!?] via â¬¢ v23.11.0 via ğŸ¦€ 1.88.0 took 5.9s 
âœ make build-one PROGRAM=voting
Building single program: [voting]...
warning: profiles for the non root package will be ignored, specify profiles at the workspace root:
package:   /Users/qiaopengjun/Code/Solana/voting/voting-substreams/voting_substreams/Cargo.toml
workspace: /Users/qiaopengjun/Code/Solana/voting/Cargo.toml
    Finished `release` profile [optimized] target(s) in 0.38s
warning: profiles for the non root package will be ignored, specify profiles at the workspace root:
package:   /Users/qiaopengjun/Code/Solana/voting/voting-substreams/voting_substreams/Cargo.toml
workspace: /Users/qiaopengjun/Code/Solana/voting/Cargo.toml
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.38s
     Running unittests src/lib.rs (/Users/qiaopengjun/Code/Solana/voting/target/debug/deps/voting-8013a2dc526371b8)

```

### ç¼–å†™æµ‹è¯• `voting.ts`

```ts
import * as anchor from "@coral-xyz/anchor";
import { Program, BN } from "@coral-xyz/anchor";
import { Voting } from "../target/types/voting";
import { assert } from "chai";
import { LAMPORTS_PER_SOL, PublicKey } from "@solana/web3.js";

describe("voting", () => {
  const provider = anchor.AnchorProvider.env();
  anchor.setProvider(provider);
  const program = anchor.workspace.Voting as Program<Voting>;

  const pollAccount = anchor.web3.Keypair.generate();
  const authority = provider.wallet as anchor.Wallet;
  const voter1 = anchor.web3.Keypair.generate();
  const voter2 = anchor.web3.Keypair.generate();
  const unauthorizedUser = anchor.web3.Keypair.generate();

  const confirmTx = async (txSignature: string) => {
    const latestBlockhash = await provider.connection.getLatestBlockhash();
    await provider.connection.confirmTransaction(
      { signature: txSignature, ...latestBlockhash },
      "confirmed"
    );
  };

  const airdrop = async (account: anchor.web3.Keypair) => {
    const sig = await provider.connection.requestAirdrop(
      account.publicKey,
      2 * LAMPORTS_PER_SOL
    );
    await confirmTx(sig);
  };

  const getCandidatePda = (
    pollKey: PublicKey,
    index: number
  ): [PublicKey, number] => {
    return anchor.web3.PublicKey.findProgramAddressSync(
      [
        Buffer.from("candidate"),
        pollKey.toBuffer(),
        // å…³é”®ä¿®å¤ï¼šåˆçº¦ä¸­çš„ candidate_count æ˜¯ u8 (1å­—èŠ‚)ï¼Œè¿™é‡Œå¿…é¡»åŒ¹é…
        new BN(index).toArrayLike(Buffer, "le", 1),
      ],
      program.programId
    );
  };

  const getReceiptPda = (
    pollKey: PublicKey,
    voterKey: PublicKey
  ): [PublicKey, number] => {
    return anchor.web3.PublicKey.findProgramAddressSync(
      [Buffer.from("receipt"), pollKey.toBuffer(), voterKey.toBuffer()],
      program.programId
    );
  };

  before(async () => {
    await airdrop(voter1);
    await airdrop(voter2);
    await airdrop(unauthorizedUser);
  });

  it("âœ… Successfully initializes a poll", async () => {
    const name = "Favorite Framework";
    const description = "Which framework do you prefer?";
    const startTime = new BN(Math.floor(Date.now() / 1000));
    const endTime = new BN(startTime.toNumber() + 3600);

    const tx = await program.methods
      .initializePoll(name, description, startTime, endTime)
      .accounts({
        pollAccount: pollAccount.publicKey,
        signer: authority.publicKey,
        systemProgram: anchor.web3.SystemProgram.programId,
      })
      .signers([pollAccount])
      .rpc();
    await confirmTx(tx);

    const fetchedPoll = await program.account.pollAccount.fetch(
      pollAccount.publicKey
    );
    assert.strictEqual(fetchedPoll.name, name, "Poll name does not match");
    assert.strictEqual(
      fetchedPoll.authority.toBase58(),
      authority.publicKey.toBase58()
    );
    assert.ok(fetchedPoll.startTime.eq(startTime), "Start time does not match");
    assert.ok(fetchedPoll.endTime.eq(endTime), "End time does not match");
  });

  it("âœ… Successfully adds two candidates", async () => {
    const [candidatePda1] = getCandidatePda(pollAccount.publicKey, 0);
    const tx1 = await program.methods
      .addCandidate("React")
      .accounts({
        pollAccount: pollAccount.publicKey,
        candidateAccount: candidatePda1,
        signer: authority.publicKey,
        systemProgram: anchor.web3.SystemProgram.programId,
      })
      .rpc();
    await confirmTx(tx1);

    const [candidatePda2] = getCandidatePda(pollAccount.publicKey, 1);
    const tx2 = await program.methods
      .addCandidate("Vue")
      .accounts({
        pollAccount: pollAccount.publicKey,
        candidateAccount: candidatePda2,
        signer: authority.publicKey,
        systemProgram: anchor.web3.SystemProgram.programId,
      })
      .rpc();
    await confirmTx(tx2);

    const fetchedPoll = await program.account.pollAccount.fetch(
      pollAccount.publicKey
    );
    assert.strictEqual(
      fetchedPoll.candidates.length,
      2,
      "Candidate count should be 2"
    );
    assert.strictEqual(
      fetchedPoll.candidateCount,
      2,
      "Candidate counter should be 2"
    );
  });

  it("âœ… Two users vote successfully", async () => {
    const [candidatePda1] = getCandidatePda(pollAccount.publicKey, 0);
    const [candidatePda2] = getCandidatePda(pollAccount.publicKey, 1);
    const [receiptPda1] = getReceiptPda(
      pollAccount.publicKey,
      voter1.publicKey
    );

    const tx1 = await program.methods
      .vote()
      .accounts({
        pollAccount: pollAccount.publicKey,
        candidateAccount: candidatePda1,
        voterReceipt: receiptPda1,
        signer: voter1.publicKey,
        systemProgram: anchor.web3.SystemProgram.programId,
      })
      .signers([voter1])
      .rpc();
    await confirmTx(tx1);

    const [receiptPda2] = getReceiptPda(
      pollAccount.publicKey,
      voter2.publicKey
    );
    const tx2 = await program.methods
      .vote()
      .accounts({
        pollAccount: pollAccount.publicKey,
        candidateAccount: candidatePda1,
        voterReceipt: receiptPda2,
        signer: voter2.publicKey,
        systemProgram: anchor.web3.SystemProgram.programId,
      })
      .signers([voter2])
      .rpc();
    await confirmTx(tx2);

    const candidate1 = await program.account.candidateAccount.fetch(
      candidatePda1
    );
    const candidate2 = await program.account.candidateAccount.fetch(
      candidatePda2
    );
    assert.strictEqual(
      candidate1.votes.toNumber(),
      2,
      "React should have 2 votes"
    );
    assert.strictEqual(
      candidate2.votes.toNumber(),
      0,
      "Vue should have 0 votes"
    );
  });

  it("âŒ Fails to vote twice (expected failure)", async () => {
    try {
      const [candidatePda1] = getCandidatePda(pollAccount.publicKey, 0);
      const [receiptPda1] = getReceiptPda(
        pollAccount.publicKey,
        voter1.publicKey
      );
      await program.methods
        .vote()
        .accounts({
          pollAccount: pollAccount.publicKey,
          candidateAccount: candidatePda1,
          voterReceipt: receiptPda1,
          signer: voter1.publicKey,
          systemProgram: anchor.web3.SystemProgram.programId,
        })
        .signers([voter1])
        .rpc();
      assert.fail("Double voting should have failed but succeeded");
    } catch (err) {
      assert.include(
        err.toString(),
        "already in use",
        "Expected error for already initialized account"
      );
    }
  });

  it("âŒ Unauthorized user fails to add candidate (expected failure)", async () => {
    try {
      const [candidatePda] = getCandidatePda(pollAccount.publicKey, 2);
      await program.methods
        .addCandidate("Svelte")
        .accounts({
          pollAccount: pollAccount.publicKey,
          candidateAccount: candidatePda,
          signer: unauthorizedUser.publicKey,
          systemProgram: anchor.web3.SystemProgram.programId,
        })
        .signers([unauthorizedUser])
        .rpc();
      assert.fail("Unauthorized candidate addition should have failed");
    } catch (err) {
      assert.equal(err.error.errorCode.code, "Unauthorized");
    }
  });

  it("âŒ Fails to vote before poll starts (expected failure)", async () => {
    const futurePoll = anchor.web3.Keypair.generate();
    const startTime = new BN(Date.now() / 1000 + 3600);
    const endTime = new BN(startTime.toNumber() + 3600);

    const tx1 = await program.methods
      .initializePoll("Future", "", startTime, endTime)
      .accounts({
        pollAccount: futurePoll.publicKey,
        signer: authority.publicKey,
        systemProgram: anchor.web3.SystemProgram.programId,
      })
      .signers([futurePoll])
      .rpc();
    await confirmTx(tx1);

    const [candidatePda] = getCandidatePda(futurePoll.publicKey, 0);
    const tx2 = await program.methods
      .addCandidate("Future Cand")
      .accounts({
        pollAccount: futurePoll.publicKey,
        candidateAccount: candidatePda,
        signer: authority.publicKey,
        systemProgram: anchor.web3.SystemProgram.programId,
      })
      .rpc();
    await confirmTx(tx2);

    try {
      const [receiptPda] = getReceiptPda(
        futurePoll.publicKey,
        voter1.publicKey
      );
      await program.methods
        .vote()
        .accounts({
          pollAccount: futurePoll.publicKey,
          candidateAccount: candidatePda,
          voterReceipt: receiptPda,
          signer: voter1.publicKey,
          systemProgram: anchor.web3.SystemProgram.programId,
        })
        .signers([voter1])
        .rpc();
      assert.fail("Voting before poll start should have failed");
    } catch (err) {
      assert.equal(err.error.errorCode.code, "PollNotStarted");
    }
  });

  it("âŒ Fails to vote after poll ends (expected failure)", async () => {
    const pastPoll = anchor.web3.Keypair.generate();
    const startTime = new BN(Math.floor(Date.now() / 1000) - 7200);
    const endTime = new BN(Math.floor(Date.now() / 1000) - 3600);

    const tx1 = await program.methods
      .initializePoll("Past", "", startTime, endTime)
      .accounts({
        pollAccount: pastPoll.publicKey,
        signer: authority.publicKey,
        systemProgram: anchor.web3.SystemProgram.programId,
      })
      .signers([pastPoll])
      .rpc();
    await confirmTx(tx1);

    const [candidatePda] = getCandidatePda(pastPoll.publicKey, 0);
    const tx2 = await program.methods
      .addCandidate("Past Cand")
      .accounts({
        pollAccount: pastPoll.publicKey,
        candidateAccount: candidatePda,
        signer: authority.publicKey,
        systemProgram: anchor.web3.SystemProgram.programId,
      })
      .rpc();
    await confirmTx(tx2);

    try {
      const [receiptPda] = getReceiptPda(pastPoll.publicKey, voter1.publicKey);
      await program.methods
        .vote()
        .accounts({
          pollAccount: pastPoll.publicKey,
          candidateAccount: candidatePda,
          voterReceipt: receiptPda,
          signer: voter1.publicKey,
          systemProgram: anchor.web3.SystemProgram.programId,
        })
        .signers([voter1])
        .rpc();
      assert.fail("Voting after poll end should have failed");
    } catch (err) {
      assert.equal(err.error.errorCode.code, "PollEnded");
    }
  });

  it("âŒ Fails to add more than 15 candidates (expected failure)", async () => {
    for (let i = 2; i < 15; i++) {
      const [candidatePda] = getCandidatePda(pollAccount.publicKey, i);
      const tx = await program.methods
        .addCandidate(`Cand ${i}`)
        .accounts({
          pollAccount: pollAccount.publicKey,
          candidateAccount: candidatePda,
          signer: authority.publicKey,
          systemProgram: anchor.web3.SystemProgram.programId,
        })
        .rpc();
      await confirmTx(tx);
    }

    try {
      const [candidatePda] = getCandidatePda(pollAccount.publicKey, 15);
      await program.methods
        .addCandidate("Cand 15")
        .accounts({
          pollAccount: pollAccount.publicKey,
          candidateAccount: candidatePda,
          signer: authority.publicKey,
          systemProgram: anchor.web3.SystemProgram.programId,
        })
        .rpc();
      assert.fail("Adding more than 15 candidates should have failed");
    } catch (err) {
      assert.equal(err.error.errorCode.code, "MaxCandidatesReached");
    }
  });
});

```

è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªä½¿ç”¨ Anchor æ¡†æ¶å’Œ TypeScript ç¼–å†™çš„**ç»¼åˆæ€§æµ‹è¯•å¥—ä»¶**ï¼Œæ—¨åœ¨å…¨é¢éªŒè¯ `voting` æ™ºèƒ½åˆçº¦çš„æ­£ç¡®æ€§ã€å®‰å…¨æ€§å’Œå¥å£®æ€§ã€‚

å®ƒé€šè¿‡æ¨¡æ‹ŸçœŸå®ä¸–ç•Œä¸­çš„å„ç§äº¤äº’åœºæ™¯ï¼Œç³»ç»Ÿæ€§åœ°è¦†ç›–äº†åˆçº¦çš„**â€œæ­£å¸¸è·¯å¾„â€**å’Œ**â€œå¼‚å¸¸è·¯å¾„â€**ï¼š

- **æ­£å¸¸æµç¨‹æµ‹è¯• (âœ…)**: éªŒè¯æ ¸å¿ƒåŠŸèƒ½æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œï¼Œä¾‹å¦‚æˆåŠŸåˆå§‹åŒ–æŠ•ç¥¨ã€ç”±ç®¡ç†å‘˜æ·»åŠ å€™é€‰äººã€ä»¥åŠç”¨æˆ·æ­£å¸¸æŠ•ç¥¨å¹¶ä½¿ç¥¨æ•°æ­£ç¡®å¢åŠ ã€‚
- **å¼‚å¸¸ä¸è¾¹ç•Œæ¡ä»¶æµ‹è¯• (âŒ)**: è¿™æ˜¯ç¡®ä¿åˆçº¦å®‰å…¨çš„å…³é”®ã€‚æµ‹è¯•è„šæœ¬æ•…æ„å°è¯•äº†å¤šç§ä¼šå¤±è´¥çš„æ“ä½œï¼Œä»¥ç¡®ä¿åˆçº¦çš„çº¦æŸæ¡ä»¶æœ‰æ•ˆã€‚è¿™åŒ…æ‹¬ï¼š
  - é˜²æ­¢åŒä¸€ç”¨æˆ·**é‡å¤æŠ•ç¥¨**ã€‚
  - é˜»æ­¢**æœªç»æˆæƒ**çš„ç”¨æˆ·æ·»åŠ å€™é€‰äººã€‚
  - ç¦æ­¢åœ¨æŠ•ç¥¨å¼€å§‹å‰æˆ–ç»“æŸåè¿›è¡ŒæŠ•ç¥¨ã€‚
  - ç¡®ä¿æ— æ³•æ·»åŠ è¶…è¿‡æ•°é‡ä¸Šé™ï¼ˆ15ä¸ªï¼‰çš„å€™é€‰äººã€‚

é€šè¿‡è¿™ç§æ–¹å¼ï¼Œè¯¥æµ‹è¯•ç¡®ä¿äº†åˆçº¦ä¸ä»…èƒ½åœ¨ç†æƒ³æƒ…å†µä¸‹è¿è¡Œï¼Œè¿˜èƒ½åœ¨é¢å¯¹é”™è¯¯æ“ä½œæˆ–æ¶æ„æ”»å‡»æ—¶è¡¨ç°å‡ºé¢„æœŸçš„ã€å®‰å…¨å¯é çš„è¡Œä¸ºã€‚

### æµ‹è¯•ç¨‹åºï¼ˆåˆçº¦ï¼‰

```bash
voting on î‚  master [!?] via â¬¢ v23.11.0 via ğŸ¦€ 1.88.0 
âœ make test-program PROGRAM=voting      
Testing program [voting]...
warning: profiles for the non root package will be ignored, specify profiles at the workspace root:
package:   /Users/qiaopengjun/Code/Solana/voting/voting-substreams/voting_substreams/Cargo.toml
workspace: /Users/qiaopengjun/Code/Solana/voting/Cargo.toml
    Finished `release` profile [optimized] target(s) in 0.45s
warning: profiles for the non root package will be ignored, specify profiles at the workspace root:
package:   /Users/qiaopengjun/Code/Solana/voting/voting-substreams/voting_substreams/Cargo.toml
workspace: /Users/qiaopengjun/Code/Solana/voting/Cargo.toml
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.47s
     Running unittests src/lib.rs (/Users/qiaopengjun/Code/Solana/voting/target/debug/deps/voting-8013a2dc526371b8)

Running tests of program `voting`!

Running test suite: "/Users/qiaopengjun/Code/Solana/voting/Anchor.toml"

(node:89327) ExperimentalWarning: Type Stripping is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)


  voting
    âœ” âœ… Successfully initializes a poll (487ms)
    âœ” âœ… Successfully adds two candidates (980ms)
    âœ” âœ… Two users vote successfully (942ms)
    âœ” âŒ Fails to vote twice (expected failure)
    âœ” âŒ Unauthorized user fails to add candidate (expected failure)
    âœ” âŒ Fails to vote before poll starts (expected failure) (928ms)
    âœ” âŒ Fails to vote after poll ends (expected failure) (932ms)
    âœ” âŒ Fails to add more than 15 candidates (expected failure) (6211ms)


  8 passing (12s)

[mochawesome] Report JSON saved to /Users/qiaopengjun/Code/Solana/voting/mochawesome-report/mochawesome.json

[mochawesome] Report HTML saved to /Users/qiaopengjun/Code/Solana/voting/mochawesome-report/mochawesome.html

```

![image-20250718160122392](/images/image-20250718160122392.png)

### **é‡ç½®å¹¶åŒæ­¥æŠ•ç¥¨åˆçº¦ Program ID**

```bash
voting on î‚  master [?] via â¬¢ v23.11.0 via ğŸ¦€ 1.88.0 took 32.0s 
âœ rm target/deploy/voting-keypair.json 

voting on î‚  master [?] via â¬¢ v23.11.0 via ğŸ¦€ 1.88.0 took 1m 5.9s 
âœ anchor keys sync
Found incorrect program id declaration in "/Users/qiaopengjun/Code/Solana/voting/programs/voting/src/lib.rs"
Updated to Doo2arLUifZbfqGVS5Uh7nexAMmsMzaQH5zcwZhSoijz

Found incorrect program id declaration in Anchor.toml for the program `voting`
Updated to Doo2arLUifZbfqGVS5Uh7nexAMmsMzaQH5zcwZhSoijz

All program id declarations are synced.
Please rebuild the program to update the generated artifacts.
```

### éƒ¨ç½²ç¨‹åºï¼ˆåˆçº¦ï¼‰

```bash
voting on î‚  master [?] via â¬¢ v23.11.0 via ğŸ¦€ 1.88.0 
âœ make build-one PROGRAM=voting
Building single program: [voting]...
   Compiling voting v0.1.0 (/Users/qiaopengjun/Code/Solana/voting/programs/voting)
    Finished `release` profile [optimized] target(s) in 2.20s
   Compiling voting v0.1.0 (/Users/qiaopengjun/Code/Solana/voting/programs/voting)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 1.25s
     Running unittests src/lib.rs (/Users/qiaopengjun/Code/Solana/voting/target/debug/deps/voting-8013a2dc526371b8)

voting on î‚  master [?] via â¬¢ v23.11.0 via ğŸ¦€ 1.88.0 took 4.9s 
âœ make deploy CLUSTER=devnet PROGRAM=voting
Building all programs: voting]...
    Finished `release` profile [optimized] target(s) in 0.32s
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.35s
     Running unittests src/lib.rs (/Users/qiaopengjun/Code/Solana/voting/target/debug/deps/voting-8013a2dc526371b8)
Deploying program [voting] to cluster: devnet...
Deploying cluster: https://devnet.helius-rpc.com/?api-key=a08565ed-9671-4cb4-8568-a014f810bfb2
Upgrade authority: /Users/qiaopengjun/.config/solana/id.json
Deploying program "voting"...
Program path: /Users/qiaopengjun/Code/Solana/voting/target/deploy/voting.so...
Program Id: Doo2arLUifZbfqGVS5Uh7nexAMmsMzaQH5zcwZhSoijz

Signature: f6YqqZ4qgd7VMhkP1VxCNxChRNKXjUaQgrNMG5Vju3Ko38WW2jsVCb4CRUZcX9DCTyXFiYv7pEuMFB86WgRkChM

Deploy success

```

### *Anchor IDL åˆå§‹åŒ–ï¼šå°†åˆçº¦æ¥å£å‘å¸ƒåˆ°é“¾*

```bash
voting on î‚  master [?] via â¬¢ v23.11.0 via ğŸ¦€ 1.88.0 took 24.8s 
âœ make idl-init CLUSTER=devnet PROGRAM=voting PROGRAM_ID=Doo2arLUifZbfqGVS5Uh7nexAMmsMzaQH5zcwZhSoijz                                            
Initializing IDL for program [voting] with ID [Doo2arLUifZbfqGVS5Uh7nexAMmsMzaQH5zcwZhSoijz] on cluster: devnet...
Idl data length: 834 bytes
Step 0/834 
Step 600/834 
Idl account created: 2iKdnacc51zj5j3iQTRNiYPYB1tvuM6HBzQWr9h1akAm

```

### å½’æ¡£å¹¶ä¿å­˜ Anchor ç¨‹åºçš„ IDL æ–‡ä»¶åˆ°æœ¬åœ°

```bash
voting on î‚  master [?] via â¬¢ v23.11.0 via ğŸ¦€ 1.88.0 took 17.8s 
âœ make archive-idl PROGRAM=voting                                                                    
Building all programs: voting]...
    Finished `release` profile [optimized] target(s) in 0.36s
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.36s
     Running unittests src/lib.rs (/Users/qiaopengjun/Code/Solana/voting/target/debug/deps/voting-8013a2dc526371b8)
Archiving IDL for [voting]...
IDL for voting successfully archived to idls/voting/voting-2025-07-18-093219.json
```

è¿™æ®µæ“ä½œçš„ä½œç”¨æ˜¯**å°†å½“å‰ Anchor ç¨‹åºçš„ IDL æ–‡ä»¶å½’æ¡£ä¿å­˜åˆ°æœ¬åœ°**ï¼Œå¹¶æŒ‰æ—¶é—´æˆ³è¿›è¡Œç‰ˆæœ¬ç®¡ç†ã€‚

#### è¯´æ˜

- è¯¥å‘½ä»¤ä¼šå°† `target/idl/$(PROGRAM).json` æ–‡ä»¶å¤åˆ¶åˆ° `idls/$(PROGRAM)/` ç›®å½•ä¸‹ï¼Œå¹¶ä»¥æ—¶é—´æˆ³å‘½åï¼Œä¾¿äºå†å²ç‰ˆæœ¬ç®¡ç†å’Œå›æº¯ã€‚
- é€‚ç”¨äºéœ€è¦ä¿å­˜æ¯æ¬¡æ„å»ºç”Ÿæˆçš„ IDL æ–‡ä»¶ï¼Œæ–¹ä¾¿åç»­æŸ¥é˜…æˆ–å›æ»šã€‚

### æŸ¥çœ‹åˆçº¦

- <https://solscan.io/account/Doo2arLUifZbfqGVS5Uh7nexAMmsMzaQH5zcwZhSoijz?cluster=devnet>

![image-20250720234720753](/images/image-20250720234720753.png)

## æ€»ç»“

æ­å–œä½ ï¼è·Ÿéšæœ¬æ•™ç¨‹ï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸåœ°ä»ä¸€ä¸ªç©ºç›®å½•å¼€å§‹ï¼Œå®Œæ•´åœ°å®ç°ã€æµ‹è¯•å¹¶éƒ¨ç½²äº†ä¸€ä¸ªåŠŸèƒ½é½å…¨çš„ Solana é“¾ä¸ŠæŠ•ç¥¨åº”ç”¨ã€‚æˆ‘ä»¬ä¸ä»…å­¦ä¹ äº† Anchor æ¡†æ¶ä»åˆå§‹åŒ–ã€ç¼–ç ã€æµ‹è¯•åˆ°éƒ¨ç½²çš„å®Œæ•´å·¥ä½œæµï¼Œæ›´æ·±å…¥æ¢è®¨äº†åƒ**ç¨‹åºæ´¾ç”Ÿåœ°å€ï¼ˆPDAï¼‰çš„å®‰å…¨ä½¿ç”¨**ã€**ç¼–å†™è¦†ç›–å¤šç§è¾¹ç•Œæ¡ä»¶çš„æµ‹è¯•ç”¨ä¾‹**ç­‰å…³é”®çš„å®æˆ˜æŠ€å·§ã€‚

è¿™æ•´ä¸ªè¿‡ç¨‹æ¸…æ™°åœ°å±•ç¤ºäº†ç°ä»£ Solana DApp å¼€å‘çš„æ ‡å‡†åŒ–è·¯å¾„ï¼Œè¯æ˜äº†åªè¦è·Ÿéšæ­£ç¡®çš„æ­¥éª¤ï¼Œæ„å»ºä¸€ä¸ªå®‰å…¨ã€å¥å£®çš„é“¾ä¸Šåº”ç”¨å¹¶éé¥ä¸å¯åŠã€‚

å¸Œæœ›è¿™æ¬¡å®æˆ˜èƒ½ä¸ºä½ æ‰“å¼€ Solana å¼€å‘çš„å¤§é—¨ã€‚ç°åœ¨ï¼Œä½ å¯ä»¥å°è¯•åŸºäºè¿™ä¸ªé¡¹ç›®è¿›è¡Œæ‰©å±•ï¼Œæ¯”å¦‚å¢åŠ è®¡è´¹åŠŸèƒ½ã€è®¾ç½®æ›´å¤æ‚çš„æŠ•ç¥¨è§„åˆ™ï¼Œæˆ–è€…æ·±å…¥ç ”ç©¶æ–‡æœ«çš„å‚è€ƒèµ„æ–™ï¼Œç»§ç»­ä½ çš„ Web3 æ¢ç´¢ä¹‹æ—…ï¼

## å‚è€ƒ

- <https://docs.substreams.dev/reference-material/substreams-cli/installing-the-cli>
- <https://github.com/streamingfast/substreams-starter>
- <https://docs.substreams.dev/tutorials/intro-to-tutorials/on-solana/solana>
- <https://thegraph.com/docs/en/substreams/quick-start/>
- <https://github.com/enoldev/solana-voting-app-sps/tree/main>
- <https://docs.substreams.dev/how-to-guides/sinks/sql>
- <https://github.com/streamingfast/substreams-sink-sql>
- <https://buf.build/product/cli>
- <https://solscan.io/account/Doo2arLUifZbfqGVS5Uh7nexAMmsMzaQH5zcwZhSoijz?cluster=devnet>
