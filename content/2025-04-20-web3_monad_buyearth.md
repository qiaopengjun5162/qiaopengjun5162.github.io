+++
title = "Web3æ–°é€Ÿåº¦ï¼šMonadä¸BuyEarth DAppé‡å¡‘è™šæ‹Ÿä¸–ç•Œ"
description = "Web3æ–°é€Ÿåº¦ï¼šMonadä¸BuyEarth DAppé‡å¡‘è™šæ‹Ÿä¸–ç•Œ"
date = 2025-04-20T07:03:02Z
[taxonomies]
categories = ["Web3", "Monad", "DApp"]
tags = ["Web3", "Monad", "DApp"]
+++

<!-- more -->

# Web3æ–°é€Ÿåº¦ï¼šMonadä¸BuyEarth DAppé‡å¡‘è™šæ‹Ÿä¸–ç•Œ

Web3æ—¶ä»£ï¼Œé€Ÿåº¦å†³å®šæœªæ¥ï¼Monadä½œä¸ºä¸€æ¬¾é«˜æ€§èƒ½çš„ä»¥å¤ªåŠå…¼å®¹L1åŒºå—é“¾ï¼Œä»¥æ¯ç§’10,000+çš„äº¤æ˜“å¤„ç†é€Ÿåº¦ï¼ˆTPSï¼‰çªç ´ä¼ ç»ŸåŒºå—é“¾ç“¶é¢ˆï¼Œä¸ºå»ä¸­å¿ƒåŒ–åº”ç”¨ï¼ˆDAppï¼‰å¼€è¾Ÿäº†æ–°å¤©åœ°ã€‚BuyEarth DAppæ˜¯è¿™ä¸€æŠ€æœ¯çš„ç”ŸåŠ¨å®è·µï¼Œè®©ç”¨æˆ·åœ¨è™šæ‹Ÿä¸–ç•Œä¸­è´­ä¹°åœŸåœ°ã€å®šåˆ¶é¢œè‰²ï¼Œä½“éªŒåŒºå—é“¾é©±åŠ¨çš„æ•°å­—ç»æµã€‚æœ¬æ–‡å°†å¸¦ä½ èµ°è¿›Monadçš„è¶…é€Ÿä¸–ç•Œï¼Œæ¢ç´¢BuyEarthå¦‚ä½•é‡å¡‘Web3è™šæ‹Ÿå¸‚åœºï¼Œæ­ç§˜é«˜æ€§èƒ½åŒºå—é“¾ä¸DAppçš„å®Œç¾èåˆï¼

Monadæ˜¯ä¸€æ¬¾ä»¥å¤ªåŠå…¼å®¹çš„L1åŒºå—é“¾ï¼Œé€šè¿‡å¹¶è¡Œæ‰§è¡Œå’Œä¹è§‚æ‰§è¡Œå®ç°10,000+ TPSï¼Œè¿œè¶…ä»¥å¤ªåŠçš„22.7 TPSï¼Œä¸ºWeb3 DAppæä¾›é«˜æ€§èƒ½åŸºç¡€è®¾æ–½ã€‚BuyEarth DAppåŸºäºMonadæ‰“é€ ï¼Œç”¨æˆ·å¯æ”¯ä»˜0.001 ETHè´­ä¹°è™šæ‹ŸåœŸåœ°å¹¶è®¾ç½®é¢œè‰²ï¼Œåˆçº¦æ‹¥æœ‰è€…å¯ç®¡ç†èµ„é‡‘ä¸çŠ¶æ€ã€‚é¡¹ç›®é‡‡ç”¨Foundryå¼€å‘ï¼Œæµ‹è¯•è¦†ç›–ç‡è¾¾100%ï¼ˆè¡Œï¼‰ä¸92.86%ï¼ˆåˆ†æ”¯ï¼‰ï¼Œå‰ç«¯åŸºäºNext.jså¹¶éƒ¨ç½²äºVercelã€‚æœ¬æ–‡è¯¦è§£Monadçš„æŠ€æœ¯ä¼˜åŠ¿ã€BuyEarthçš„åŠŸèƒ½ä¸å¼€å‘æµç¨‹ï¼Œå±•ç°Web3 DAppå¦‚ä½•åœ¨è¶…é€ŸåŒºå—é“¾ä¸Šé‡å¡‘è™šæ‹Ÿä¸–ç•Œã€‚

## Monadï¼šWeb3çš„è¶…é€Ÿå¼•æ“

Monad is a high-performance Ethereum-compatible Layer 1 blockchain, redefining the balance between decentralization and scalability for Web3 applications.

**Monad æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ä»¥å¤ªåŠå…¼å®¹L1åŒºå—é“¾ï¼Œä¸ºWeb3åº”ç”¨é‡æ–°å®šä¹‰äº†å»ä¸­å¿ƒåŒ–ä¸å¯æ‰©å±•æ€§çš„å¹³è¡¡ã€‚**

æƒ³è±¡ä¸€ä¸ªåŒºå—é“¾æ¯ç§’å¤„ç†10,000+ç¬”äº¤æ˜“ï¼Œè½»æ¾ç¢¾å‹ä»¥å¤ªåŠçš„22.7 TPSï¼Œå´ä¾ç„¶ä¸ä»¥å¤ªåŠç”Ÿæ€æ— ç¼å…¼å®¹â€”â€”è¿™å°±æ˜¯ Monadï¼å®ƒé€šè¿‡**å¹¶è¡Œæ‰§è¡Œ**æŠ€æœ¯ï¼Œæ‰“ç ´ä¼ ç»Ÿ EVM é“¾é€ä¸€å¤„ç†äº¤æ˜“çš„é™åˆ¶ï¼Œè®© BuyEarth è¿™æ ·çš„å»ä¸­å¿ƒåŒ–åº”ç”¨ï¼ˆDAppï¼‰å®ç°ç§’çº§å“åº”ï¼Œæ”¯æ’‘è™šæ‹Ÿä¸–ç•Œä¸­çš„åœŸåœ°äº¤æ˜“çƒ­æ½®ã€‚å¼€å‘è€…æ— éœ€æ”¹åŠ¨ä»£ç ï¼Œå°±èƒ½å°†ä»¥å¤ªåŠåº”ç”¨è¿ç§»åˆ° Monadï¼Œäº«å—è¶…é€Ÿä½“éªŒã€‚

Monad çš„ç§˜è¯€åœ¨äº**å¹¶è¡Œæ‰§è¡Œ**å’Œ**ä¹è§‚æ‰§è¡Œ**ï¼šäº¤æ˜“æ— éœ€æ’é˜Ÿç­‰å¾…ï¼Œæ•°æ®è·Ÿè¸ªå’Œé‡è¯•æœºåˆ¶ç¡®ä¿ç»“æœä¸€è‡´ã€‚æ­é…**çŠ¶æ€æ— å…³è®¡ç®—**ï¼ˆå‡å°‘å­˜å‚¨è´Ÿæ‹…ï¼‰ã€**æ•°æ®ç¼“å­˜**ï¼ˆåŠ é€Ÿè®¿é—®ï¼‰å’Œ**é™æ€ä»£ç åˆ†æ**ï¼ˆæ™ºèƒ½è°ƒåº¦ï¼‰ï¼ŒMonad ä¸º BuyEarth çš„åœŸåœ°è´­ä¹°å’Œé¢œè‰²å®šåˆ¶æä¾›æµç•…æ”¯æŒã€‚æœªæ¥ï¼ŒMonad å°†å¼•å…¥ AI é¢„æµ‹äº¤æ˜“ä¾èµ–ï¼Œæœ€å¤§åŒ–æ•ˆç‡ï¼Œç‚¹ç‡ƒ Web3 DApp çš„æ— é™å¯èƒ½ï¼

**Monad çš„è¶…é€Ÿæ€§èƒ½å¦‚ä½•èµ‹èƒ½ BuyEarth DAppï¼Ÿæ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬è¿›å…¥æ™ºèƒ½åˆçº¦å®æ“ï¼Œæ­ç§˜è™šæ‹ŸåœŸåœ°äº¤æ˜“çš„å®ç°ç»†èŠ‚ï¼**

## åˆçº¦å®æ“

### æ ¹æ®æ¨¡æ¿ç”Ÿäº§é¡¹ç›®ä»£ç 

```bash
mcd buyearth # mkdir buyearth && cd buyearth
forge init --template https://github.com/qiaopengjun5162/foundry-template
```

### æŸ¥çœ‹é¡¹ç›®ç›®å½•ç»“æ„

```bash
qiaopengjun in buyearth on  î‚  main 
â¯ tree -L 3 -I "node_modules|.DS_Store|out|buy-earth-dapp|lib|dapp-ui|broadcast|cache"  
.
â”œâ”€â”€ _typos.toml
â”œâ”€â”€ buy-earth-dapp.zip
â”œâ”€â”€ CHANGELOG.md
â”œâ”€â”€ cliff.toml
â”œâ”€â”€ depoly.md
â”œâ”€â”€ foundry.toml
â”œâ”€â”€ LICENSE
â”œâ”€â”€ README.md
â”œâ”€â”€ remappings.txt
â”œâ”€â”€ script
â”‚   â”œâ”€â”€ BuyEarth.s.sol
â”‚   â””â”€â”€ deploy.sh
â”œâ”€â”€ slither.config.json
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ BuyEarth.sol
â”‚   â””â”€â”€ utils
â”‚       â””â”€â”€ EmptyContract.sol
â”œâ”€â”€ style_guide.md
â””â”€â”€ test
    â””â”€â”€ BuyEarth.t.sol

5 directories, 16 files
```

### åˆçº¦ä»£ç `BuyEarth.sol`

```ts
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.24;

contract BuyEarth {
    uint256 private constant PRICE = 0.001 ether;
    address private owner;
    uint256[100] private squares;
    address[] private depositorList;
    mapping(address => uint256) public userDeposits;

    event BuySquare(uint8 idx, uint256 color);
    event OwnershipTransferred(address indexed oldOwner, address indexed newOwner);
    event ColorChanged(uint8 indexed idx, uint256 color);
    event Deposited(address indexed sender, uint256 amount);
    event Receive(address indexed sender, uint256 amount);

    modifier onlyOwner() {
        require(msg.sender == owner, "Only owner can call this function");
        _;
    }

    constructor() {
        owner = msg.sender;
    }

    function getSquares() public view returns (uint256[] memory) {
        uint256[] memory _squares = new uint256[](100);
        for (uint256 i = 0; i < 100; i++) {
            _squares[i] = squares[i];
        }
        return _squares;
    }

    function buySquare(uint8 idx, uint256 color) public payable {
        // === Checks ===
        require(idx < 100, "Invalid square number");
        require(msg.value >= PRICE, "Incorrect price");
        require(color <= 0xFFFFFF, "Invalid color");
        uint256 change = msg.value - PRICE;

        // === Effects ===
        squares[idx] = color;
        emit BuySquare(idx, color);

        // === Interactions ===
        if (change > 0) {
            (bool success1,) = msg.sender.call{value: change}("");
            require(success1, "Change return failed");
        }
        (bool success2,) = owner.call{value: PRICE}("");
        require(success2, "Owner payment failed");
    }

    function deposit() public payable {
        require(msg.value > 0, "Must send some ETH");

        // å¦‚æœæ˜¯æ–°å­˜æ¬¾ç”¨æˆ·ï¼Œæ·»åŠ åˆ°åˆ—è¡¨
        if (userDeposits[msg.sender] == 0) {
            depositorList.push(msg.sender);
        }

        userDeposits[msg.sender] += msg.value;
        emit Deposited(msg.sender, msg.value);
    }

    function withdrawTo(address recipient) public onlyOwner {
        require(recipient != address(0), "Invalid recipient address");
        uint256 balance = address(this).balance;

        require(balance > 0, "No funds to withdraw");
        require(depositorList.length > 0, "No depositors");

        address[] memory depositors = _getAllDepositors(); // è·å–æ‰€æœ‰å­˜æ¬¾ç”¨æˆ·
        for (uint256 i = 0; i < depositors.length; i++) {
            userDeposits[depositors[i]] = 0;
        }

        (bool success,) = recipient.call{value: balance}("");
        require(success, "Withdrawal failed");
    }

    function setOwner(address newOwner) public onlyOwner {
        require(newOwner != address(0), "Invalid owner address");
        emit OwnershipTransferred(owner, newOwner);
        owner = newOwner;
    }

    function getOwner() public view returns (address) {
        return owner;
    }

    function getColor(uint8 idx) public view returns (uint256) {
        return squares[idx];
    }

    function setColor(uint8 idx, uint256 color) public onlyOwner {
        require(idx < 100, "Invalid square number");
        squares[idx] = color;
        emit ColorChanged(idx, color);
    }

    function getUserDeposits(address user) public view returns (uint256) {
        return userDeposits[user];
    }

    function _getAllDepositors() private view returns (address[] memory) {
        return depositorList;
    }

    receive() external payable {
        emit Receive(msg.sender, msg.value);
        deposit();
    }
}

```

æ™ºèƒ½åˆçº¦ BuyEarth è¯´æ˜

ä»¥ä¸‹æ˜¯å¯¹ BuyEarth æ™ºèƒ½åˆçº¦çš„è¯¦ç»†è¯´æ˜ï¼Œæ—¨åœ¨å¸®åŠ©è¯»è€…ç†è§£å…¶åŠŸèƒ½ã€ç»“æ„å’Œç”¨é€”ã€‚åˆçº¦åŸºäº Solidity è¯­è¨€ç¼–å†™ï¼Œéƒ¨ç½²åœ¨ä»¥å¤ªåŠåŒºå—é“¾ä¸Šï¼Œå…è®¸ç”¨æˆ·è´­ä¹°è™šæ‹Ÿâ€œåœ°å—â€ã€è®¾ç½®é¢œè‰²ã€å­˜æ¬¾ã€æå–èµ„é‡‘ï¼Œå¹¶ç”±åˆçº¦æ‹¥æœ‰è€…ç®¡ç†å…³é”®æ“ä½œã€‚

------

1. **æ¦‚è¿°**

BuyEarth æ˜¯ä¸€ä¸ªå»ä¸­å¿ƒåŒ–åº”ç”¨ï¼ˆDAppï¼‰çš„æ™ºèƒ½åˆçº¦ï¼Œæ¨¡æ‹Ÿä¸€ä¸ªè™šæ‹ŸåœŸåœ°å¸‚åœºã€‚ç”¨æˆ·å¯ä»¥ï¼š

- æ”¯ä»˜å›ºå®šä»·æ ¼ï¼ˆ0.001 ETHï¼‰è´­ä¹°100ä¸ªè™šæ‹Ÿåœ°å—ä¹‹ä¸€ï¼Œå¹¶ä¸ºåœ°å—è®¾ç½®é¢œè‰²ã€‚
- å‘åˆçº¦å­˜æ¬¾ä»¥å­˜å‚¨ä»¥å¤ªå¸ï¼ˆETHï¼‰ã€‚
- æŸ¥è¯¢åœ°å—é¢œè‰²ã€ç”¨æˆ·å­˜æ¬¾ä½™é¢ç­‰ä¿¡æ¯ã€‚
- åˆçº¦æ‹¥æœ‰è€…ï¼ˆownerï¼‰å¯ä»¥æ›´æ”¹åœ°å—é¢œè‰²ã€è½¬ç§»åˆçº¦æ‰€æœ‰æƒã€æå–åˆçº¦ä½™é¢ã€‚

åˆçº¦ä½¿ç”¨äº‹ä»¶ï¼ˆeventï¼‰è®°å½•å…³é”®æ“ä½œï¼Œä¾¿äºå‰ç«¯åº”ç”¨ç›‘å¬å’Œå±•ç¤ºã€‚å®‰å…¨æœºåˆ¶ï¼ˆå¦‚æƒé™æ£€æŸ¥ã€è¾“å…¥éªŒè¯ï¼‰ç¡®ä¿åˆçº¦çš„å¯é æ€§å’Œå®‰å…¨æ€§ã€‚

------

2. **åˆçº¦ç»“æ„**

**è®¸å¯å’Œç¼–è¯‘å™¨ç‰ˆæœ¬**

```ts
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;
```

- **è®¸å¯**ï¼šä½¿ç”¨ MIT è®¸å¯è¯ï¼Œè¡¨æ˜ä»£ç å¼€æºä¸”å¯è‡ªç”±ä½¿ç”¨ã€‚
- **ç¼–è¯‘å™¨ç‰ˆæœ¬**ï¼šè¦æ±‚ Solidity ç‰ˆæœ¬ä¸º 0.8.20 æˆ–æ›´é«˜ï¼Œç¡®ä¿å…¼å®¹æ€§å’Œå®‰å…¨æ€§ã€‚

**çŠ¶æ€å˜é‡**

```ts
uint256 private constant PRICE = 0.001 ether;
address private owner;
uint[100] private squares;
address[] private depositorList;
mapping(address => uint256) public userDeposits;
```

- PRICEï¼šæ¯ä¸ªåœ°å—çš„å›ºå®šè´­ä¹°ä»·æ ¼ï¼ˆ0.001 ETHï¼‰ï¼Œä¸å¯æ›´æ”¹ã€‚
- ownerï¼šåˆçº¦æ‹¥æœ‰è€…çš„åœ°å€ï¼Œä»…é™å…¶è°ƒç”¨ç‰¹å®šåŠŸèƒ½ã€‚
- squaresï¼šå­˜å‚¨100ä¸ªåœ°å—çš„é¢œè‰²å€¼ï¼ˆuint ç±»å‹ï¼Œåˆå§‹å€¼ä¸º0ï¼‰ã€‚
- depositorListï¼šè®°å½•æ‰€æœ‰å­˜æ¬¾ç”¨æˆ·çš„åœ°å€åˆ—è¡¨ã€‚
- userDepositsï¼šæ˜ å°„ï¼Œè®°å½•æ¯ä¸ªç”¨æˆ·çš„å­˜æ¬¾é‡‘é¢ï¼ˆä»¥ wei ä¸ºå•ä½ï¼‰ã€‚

**äº‹ä»¶**

```solidity
event BuySquare(uint8 idx, uint color);
event OwnershipTransferred(address indexed oldOwner, address indexed newOwner);
event ColorChanged(uint8 indexed idx, uint color);
event Deposited(address indexed sender, uint256 amount);
event Receive(address indexed sender, uint256 amount);
```

- BuySquareï¼šå½“ç”¨æˆ·è´­ä¹°åœ°å—å¹¶è®¾ç½®é¢œè‰²æ—¶è§¦å‘ã€‚
- OwnershipTransferredï¼šå½“åˆçº¦æ‰€æœ‰æƒè½¬ç§»æ—¶è§¦å‘ã€‚
- ColorChangedï¼šå½“æ‹¥æœ‰è€…æ›´æ”¹åœ°å—é¢œè‰²æ—¶è§¦å‘ã€‚
- Depositedï¼šå½“ç”¨æˆ·å­˜æ¬¾æ—¶è§¦å‘ã€‚
- Receiveï¼šå½“åˆçº¦ç›´æ¥æ¥æ”¶ä»¥å¤ªå¸æ—¶è§¦å‘ã€‚

**ä¿®é¥°ç¬¦**

```ts
modifier onlyOwner() {
    require(msg.sender == owner, "Only owner can call this function");
    _;
}
```

- onlyOwnerï¼šé™åˆ¶å‡½æ•°ä»…èƒ½ç”±åˆçº¦æ‹¥æœ‰è€…è°ƒç”¨ï¼Œç”¨äº setOwnerã€setColor å’Œ withdrawTo å‡½æ•°ã€‚

------

3. **æ ¸å¿ƒåŠŸèƒ½**

**æ„é€ å‡½æ•°**

```ts
constructor() {
    owner = msg.sender;
}
```

- åˆå§‹åŒ–æ—¶å°†éƒ¨ç½²è€…çš„åœ°å€è®¾ç½®ä¸ºåˆçº¦æ‹¥æœ‰è€…ã€‚

**æŸ¥è¯¢åœ°å—ä¿¡æ¯**

```ts
function getSquares() public view returns (uint[] memory) {
    uint[] memory _squares = new uint[](100);
    for (uint i = 0; i < 100; i++) {
        _squares[i] = squares[i];
    }
    return _squares;
}

function getColor(uint8 idx) public view returns (uint) {
    return squares[idx];
}
```

- getSquaresï¼šè¿”å›æ‰€æœ‰100ä¸ªåœ°å—çš„é¢œè‰²å€¼æ•°ç»„ï¼Œä¾›å‰ç«¯æ˜¾ç¤ºæ•´ä¸ªåœ°å›¾çŠ¶æ€ã€‚
- getColorï¼šè¿”å›æŒ‡å®šåœ°å—ï¼ˆidxï¼‰çš„é¢œè‰²å€¼ã€‚

**è´­ä¹°åœ°å—**

```ts
function buySquare(uint8 idx, uint color) public payable {
    require(idx < 100, "Invalid square number");
    require(msg.value >= PRICE, "Incorrect price");
    require(color <= 0xFFFFFF, "Invalid color");
    uint256 change = msg.value - PRICE;

    squares[idx] = color;
    emit BuySquare(idx, color);

    if (change > 0) {
        (bool success1, ) = msg.sender.call{value: change}("");
        require(success1, "Change return failed");
    }
    (bool success2, ) = owner.call{value: PRICE}("");
    require(success2, "Owner payment failed");
}
```

- **åŠŸèƒ½**ï¼šç”¨æˆ·æ”¯ä»˜è‡³å°‘0.001 ETH è´­ä¹°æŒ‡å®šåœ°å—ï¼ˆidxï¼‰ï¼Œå¹¶è®¾ç½®é¢œè‰²ï¼ˆcolorï¼‰ã€‚
- **æ£€æŸ¥**ï¼š
  - åœ°å—ç¼–å·æœ‰æ•ˆï¼ˆidx < 100ï¼‰ã€‚
  - æ”¯ä»˜é‡‘é¢è¶³å¤Ÿï¼ˆmsg.value >= PRICEï¼‰ã€‚
  - é¢œè‰²å€¼æœ‰æ•ˆï¼ˆcolor éœ€ä¸º24ä½é¢œè‰²ä»£ç ï¼Œä¾‹å¦‚ 0xFFFFFF è¡¨ç¤ºç™½è‰²ï¼‰ã€‚
- **æ“ä½œ**ï¼š
  - æ›´æ–°åœ°å—é¢œè‰²ã€‚
  - è§¦å‘ BuySquare äº‹ä»¶ã€‚
  - å¦‚æœç”¨æˆ·æ”¯ä»˜é‡‘é¢è¶…è¿‡ä»·æ ¼ï¼Œé€€è¿˜å·®é¢ï¼ˆchangeï¼‰ã€‚
  - å°†è´­ä¹°ä»·æ ¼è½¬è´¦ç»™åˆçº¦æ‹¥æœ‰è€…ã€‚
- **å®‰å…¨**ï¼šä½¿ç”¨ call è¿›è¡Œè½¬è´¦ï¼Œæ£€æŸ¥è½¬è´¦æ˜¯å¦æˆåŠŸä»¥é˜²æ­¢å¤±è´¥ã€‚

**å­˜æ¬¾**

```ts
function deposit() public payable {
    require(msg.value > 0, "Must send some ETH");

    if (userDeposits[msg.sender] == 0) {
        depositorList.push(msg.sender);
    }

    userDeposits[msg.sender] += msg.value;
    emit Deposited(msg.sender, msg.value);
}
```

- **åŠŸèƒ½**ï¼šç”¨æˆ·å‘åˆçº¦å‘é€ä»¥å¤ªå¸è¿›è¡Œå­˜æ¬¾ã€‚
- **æ“ä½œ**ï¼š
  - è¦æ±‚å‘é€é‡‘é¢å¤§äº0ã€‚
  - å¦‚æœæ˜¯æ–°ç”¨æˆ·ï¼ˆä¹‹å‰æ— å­˜æ¬¾ï¼‰ï¼Œå°†å…¶åœ°å€æ·»åŠ åˆ° depositorListã€‚
  - æ›´æ–°ç”¨æˆ·çš„å­˜æ¬¾ä½™é¢ã€‚
  - è§¦å‘ Deposited äº‹ä»¶ã€‚
- **ç”¨é€”**ï¼šå…è®¸ç”¨æˆ·å°†èµ„é‡‘å­˜å‚¨åœ¨åˆçº¦ä¸­ï¼Œå¯èƒ½ç”¨äºæœªæ¥æ‰©å±•åŠŸèƒ½ã€‚

**æå–èµ„é‡‘**

```ts
function withdrawTo(address recipient) public onlyOwner {
    require(recipient != address(0), "Invalid recipient address");
    uint256 balance = address(this).balance;
    require(balance > 0, "No funds to withdraw");

    address[] memory depositors = _getAllDepositors();
    for (uint i = 0; i < depositors.length; i++) {
        userDeposits[depositors[i]] = 0;
    }

    (bool success, ) = recipient.call{value: balance}("");
    require(success, "Withdrawal failed");
}
```

- **åŠŸèƒ½**ï¼šä»…é™æ‹¥æœ‰è€…è°ƒç”¨ï¼Œå°†åˆçº¦å…¨éƒ¨ä½™é¢æå–åˆ°æŒ‡å®šåœ°å€ï¼ˆrecipientï¼‰ã€‚
- **æ“ä½œ**ï¼š
  - éªŒè¯æ¥æ”¶åœ°å€æœ‰æ•ˆã€‚
  - ç¡®ä¿åˆçº¦æœ‰ä½™é¢ã€‚
  - æ¸…ç©ºæ‰€æœ‰ç”¨æˆ·çš„å­˜æ¬¾è®°å½•ï¼ˆuserDepositsï¼‰ã€‚
  - å°†åˆçº¦ä½™é¢è½¬è´¦ç»™æŒ‡å®šåœ°å€ã€‚
- **å®‰å…¨**ï¼šæ¸…ç©ºå­˜æ¬¾è®°å½•é˜²æ­¢é‡å¤æå–ï¼Œä½¿ç”¨ call ç¡®ä¿è½¬è´¦æˆåŠŸã€‚

**æ‰€æœ‰æƒç®¡ç†**

```ts
function setOwner(address newOwner) public onlyOwner {
    require(newOwner != address(0), "Invalid owner address");
    emit OwnershipTransferred(owner, newOwner);
    owner = newOwner;
}

function getOwner() public view returns (address) {
    return owner;
}
```

- setOwnerï¼šä»…é™å½“å‰æ‹¥æœ‰è€…è°ƒç”¨ï¼Œè½¬ç§»åˆçº¦æ‰€æœ‰æƒç»™æ–°åœ°å€ï¼Œè§¦å‘ OwnershipTransferred äº‹ä»¶ã€‚
- getOwnerï¼šè¿”å›å½“å‰æ‹¥æœ‰è€…çš„åœ°å€ã€‚

**æ›´æ”¹åœ°å—é¢œè‰²**

```ts
function setColor(uint8 idx, uint color) public onlyOwner {
    require(idx < 100, "Invalid square number");
    squares[idx] = color;
    emit ColorChanged(idx, color);
}
```

- **åŠŸèƒ½**ï¼šä»…é™æ‹¥æœ‰è€…è°ƒç”¨ï¼Œä¿®æ”¹æŒ‡å®šåœ°å—çš„é¢œè‰²ã€‚
- **æ“ä½œ**ï¼š
  - éªŒè¯åœ°å—ç¼–å·æœ‰æ•ˆã€‚
  - æ›´æ–°é¢œè‰²å¹¶è§¦å‘ ColorChanged äº‹ä»¶ã€‚
- **ç”¨é€”**ï¼šå…è®¸æ‹¥æœ‰è€…æ‰‹åŠ¨è°ƒæ•´åœ°å—çŠ¶æ€ï¼ˆå¦‚ä¿®å¤é”™è¯¯æˆ–å®ç°ç‰¹å®šåŠŸèƒ½ï¼‰ã€‚

**æŸ¥è¯¢ç”¨æˆ·å­˜æ¬¾**

```ts
function getUserDeposits(address user) public view returns (uint256) {
    return userDeposits[user];
}
```

- è¿”å›æŒ‡å®šç”¨æˆ·çš„å­˜æ¬¾ä½™é¢ã€‚

**æ¥æ”¶ä»¥å¤ªå¸**

```ts
receive() external payable {
    emit Receive(msg.sender, msg.value);
    deposit();
}
```

- **åŠŸèƒ½**ï¼šå½“ç”¨æˆ·ç›´æ¥å‘åˆçº¦åœ°å€å‘é€ä»¥å¤ªå¸æ—¶ï¼Œè§¦å‘ Receive äº‹ä»¶å¹¶è°ƒç”¨ deposit å‡½æ•°å¤„ç†å­˜æ¬¾ã€‚
- **ç”¨é€”**ï¼šæ”¯æŒæ— å‡½æ•°è°ƒç”¨çš„ä»¥å¤ªå¸è½¬è´¦ã€‚

**è¾…åŠ©å‡½æ•°**

```ts
function _getAllDepositors() private view returns (address[] memory) {
    return depositorList;
}
```

- è¿”å›æ‰€æœ‰å­˜æ¬¾ç”¨æˆ·çš„åœ°å€åˆ—è¡¨ï¼Œä»…ä¾›å†…éƒ¨ä½¿ç”¨ï¼ˆå¦‚ withdrawTo å‡½æ•°ï¼‰ã€‚

------

4. **è®¾è®¡ç‰¹ç‚¹**

**æ¨¡å—åŒ–è®¾è®¡**

- åˆçº¦é‡‡ç”¨ **Checks-Effects-Interactions** æ¨¡å¼ï¼ˆå¦‚ buySquare å‡½æ•°ï¼‰ï¼Œå…ˆéªŒè¯è¾“å…¥ï¼ˆChecksï¼‰ï¼Œæ›´æ–°çŠ¶æ€ï¼ˆEffectsï¼‰ï¼Œæœ€åæ‰§è¡Œå¤–éƒ¨äº¤äº’ï¼ˆInteractionsï¼‰ï¼Œé™ä½é‡å…¥æ”»å‡»é£é™©ã€‚
- ä½¿ç”¨ä¿®é¥°ç¬¦ï¼ˆonlyOwnerï¼‰ç®€åŒ–æƒé™ç®¡ç†ã€‚
- äº‹ä»¶æœºåˆ¶ä¾¿äºå‰ç«¯åº”ç”¨å®æ—¶æ›´æ–°ç•Œé¢ã€‚

**å®‰å…¨æ€§**

- è¾“å…¥éªŒè¯ï¼šæ£€æŸ¥åœ°å—ç¼–å·ã€é¢œè‰²å€¼ã€æ”¯ä»˜é‡‘é¢ç­‰ï¼Œé˜²æ­¢æ— æ•ˆæ“ä½œã€‚
- è½¬è´¦å®‰å…¨ï¼šä½¿ç”¨ call å¹¶æ£€æŸ¥è¿”å›å€¼ï¼Œç¡®ä¿è½¬è´¦æˆåŠŸã€‚
- æƒé™æ§åˆ¶ï¼šæ•æ„Ÿæ“ä½œï¼ˆå¦‚æå–èµ„é‡‘ã€æ›´æ”¹é¢œè‰²ï¼‰ä»…é™æ‹¥æœ‰è€…ã€‚
- é›¶åœ°å€æ£€æŸ¥ï¼šé˜²æ­¢æ‰€æœ‰æƒè½¬ç§»æˆ–èµ„é‡‘æå–åˆ°æ— æ•ˆåœ°å€ã€‚

**å¯æ‰©å±•æ€§**

- å­˜æ¬¾åŠŸèƒ½ï¼ˆdepositï¼‰å’Œç”¨æˆ·å­˜æ¬¾è®°å½•ï¼ˆuserDepositsï¼‰ä¸ºæœªæ¥åŠŸèƒ½æ‰©å±•ï¼ˆå¦‚å¥–åŠ±æœºåˆ¶ã€é€€æ¬¾ï¼‰æä¾›åŸºç¡€ã€‚
- äº‹ä»¶æ—¥å¿—æ”¯æŒå‰ç«¯å¼€å‘ï¼Œä¾¿äºæ„å»ºäº¤äº’å¼ç•Œé¢ã€‚

------

5. **ä½¿ç”¨åœºæ™¯**

- **è™šæ‹ŸåœŸåœ°å¸‚åœº**ï¼šç”¨æˆ·è´­ä¹°åœ°å—å¹¶è®¾ç½®é¢œè‰²ï¼Œæ¨¡æ‹Ÿç±»ä¼¼â€œç™¾ä¸‡åƒç´ ç½‘æ ¼â€æˆ–è™šæ‹Ÿåœ°äº§çš„ç©æ³•ï¼Œå‰ç«¯å¯æ¸²æŸ“ä¸ºå½©è‰²åœ°å›¾ã€‚
- **èµ„é‡‘ç®¡ç†**ï¼šå…è®¸ç”¨æˆ·å­˜æ¬¾ï¼Œæ‹¥æœ‰è€…å¯æå–èµ„é‡‘ï¼Œé€‚åˆéœ€è¦é›†ä¸­èµ„é‡‘ç®¡ç†çš„åº”ç”¨ã€‚
- **æƒé™æ§åˆ¶**ï¼šåˆçº¦æ‰€æœ‰è€…å¯ç®¡ç†åœ°å—çŠ¶æ€å’Œèµ„é‡‘ï¼Œé€‚åˆç”±å•ä¸€å®ä½“æ§åˆ¶çš„åœºæ™¯ã€‚

------

6. **æ½œåœ¨æ”¹è¿›**

- **å¯å‡çº§æ€§**ï¼šå½“å‰åˆçº¦ä¸å¯å‡çº§ï¼Œå¯è€ƒè™‘ä½¿ç”¨ä»£ç†æ¨¡å¼ï¼ˆå¦‚ OpenZeppelin çš„ UUPSï¼‰æ”¯æŒæœªæ¥åŠŸèƒ½æ‰©å±•ã€‚
- **æ‰¹é‡æ“ä½œ**ï¼šå¢åŠ æ‰¹é‡è´­ä¹°åœ°å—æˆ–æ›´æ”¹é¢œè‰²çš„å‡½æ•°ï¼Œæé«˜æ•ˆç‡ã€‚
- **é˜²é‡å…¥æ”»å‡»**ï¼šè™½ç„¶å·²ä½¿ç”¨ Checks-Effects-Interactions æ¨¡å¼ï¼Œå¯å¼•å…¥ ReentrancyGuard è¿›ä¸€æ­¥å¢å¼ºå®‰å…¨æ€§ã€‚
- **åŠ¨æ€ä»·æ ¼**ï¼šå½“å‰ä»·æ ¼å›ºå®šï¼ˆ0.001 ETHï¼‰ï¼Œå¯å¼•å…¥åŠ¨æ€å®šä»·æœºåˆ¶ï¼ˆå¦‚åŸºäºéœ€æ±‚æˆ–åœ°å—ä½ç½®ï¼‰ã€‚
- **ç”¨æˆ·é€€æ¬¾**ï¼šå½“å‰ä»…æ‹¥æœ‰è€…å¯æå–èµ„é‡‘ï¼Œå¯æ·»åŠ ç”¨æˆ·è‡ªè¡Œæå–å­˜æ¬¾çš„åŠŸèƒ½ã€‚

------

7. **æ€»ç»“**

BuyEarth æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€å®‰å…¨æ€§è¾ƒé«˜çš„æ™ºèƒ½åˆçº¦ï¼Œé€‚åˆç”¨äºè™šæ‹ŸåœŸåœ°è´­ä¹°ã€é¢œè‰²è®¾ç½®å’Œèµ„é‡‘ç®¡ç†çš„å»ä¸­å¿ƒåŒ–åº”ç”¨ã€‚å…¶æ¸…æ™°çš„ä»£ç ç»“æ„ã€äº‹ä»¶æœºåˆ¶å’Œå®‰å…¨æ£€æŸ¥ä½¿å…¶æ˜“äºé›†æˆåˆ°å‰ç«¯åº”ç”¨ä¸­ã€‚é€šè¿‡åˆç†çš„æ‰©å±•å’Œä¼˜åŒ–ï¼Œåˆçº¦å¯æ”¯æŒæ›´å¤æ‚çš„ä¸šåŠ¡é€»è¾‘å’Œç”¨æˆ·äº¤äº’åœºæ™¯ã€‚

### æµ‹è¯•ä»£ç  `BuyEarth.t.sol`

```ts
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.24;

import {Test, console} from "forge-std/Test.sol";
import {BuyEarth} from "../src/BuyEarth.sol";
import {BuyEarthScript} from "../script/BuyEarth.s.sol";

contract BuyEarthTest is Test {
    BuyEarth public buyEarth;

    Account public owner = makeAccount("owner");
    address public user = makeAddr("user"); // æµ‹è¯•ç”¨æˆ·åœ°å€
    address public user2 = makeAddr("user2"); // ç¬¬äºŒä¸ªæµ‹è¯•ç”¨æˆ·åœ°å€
    address public receipt = makeAddr("receipt"); // æ”¶æ¬¾åœ°å€

    uint256 private PRICE = 0.001 ether;

    event BuySquare(uint8 idx, uint256 color);
    event OwnershipTransferred(address indexed oldOwner, address indexed newOwner);
    event ColorChanged(uint8 indexed idx, uint256 color);
    event Deposited(address indexed sender, uint256 amount);

    function setUp() public {
        // åˆå§‹åŒ–åˆçº¦
        vm.startPrank(owner.addr);
        buyEarth = new BuyEarth();
        vm.stopPrank();
    }

    // æµ‹è¯•åˆå§‹çŠ¶æ€
    function testInitialState() public view {
        assertEq(buyEarth.getOwner(), owner.addr);
        uint256[] memory squares = buyEarth.getSquares();
        assertEq(squares.length, 100);
        for (uint256 i = 0; i < 100; i++) {
            assertEq(squares[i], 0);
        }
    }

    // æµ‹è¯•è´­ä¹°æ ¼å­
    function testBuySquare() public {
        uint8 testIdx = 1;
        uint256 testColor = 0xFF0000; // çº¢è‰²
        uint256 price = PRICE;

        // æ¨¡æ‹Ÿç”¨æˆ·æ“ä½œ
        vm.startPrank(user);
        deal(user, price * 2); // åˆ†é…åŒå€èµ„é‡‘ç”¨äºæµ‹è¯•æ‰¾é›¶
        buyEarth.buySquare{value: price * 2}(testIdx, testColor);
        vm.stopPrank();

        // éªŒè¯æ ¼å­é¢œè‰²è¢«ä¿®æ”¹
        assertEq(buyEarth.getColor(testIdx), testColor);
        assertEq(user.balance, price); // åº”é€€å›priceçš„æ‰¾é›¶
    }

    // æµ‹è¯•è´­ä¹°æ ¼å­è¾¹ç•Œæ¡ä»¶
    function testBuySquareEdgeCases() public {
        uint256 price = PRICE;
        deal(user, price);

        // æµ‹è¯•æ— æ•ˆçš„æ ¼å­ç´¢å¼•
        vm.startPrank(user);
        vm.expectRevert("Invalid square number");
        buyEarth.buySquare{value: price}(100, 0xFF0000);
        vm.stopPrank();

        // æµ‹è¯•æ— æ•ˆçš„é¢œè‰²å€¼
        vm.startPrank(user);
        vm.expectRevert("Invalid color");
        buyEarth.buySquare{value: price}(1, 0x1000000);
        vm.stopPrank();

        // æµ‹è¯•é‡‘é¢ä¸è¶³
        vm.startPrank(user);
        vm.expectRevert("Incorrect price");
        buyEarth.buySquare{value: price - 1}(1, 0xFF0000);
        vm.stopPrank();
    }

    // æµ‹è¯•å¤šä¸ªç”¨æˆ·è´­ä¹°ä¸åŒæ ¼å­
    function testMultipleUsersBuySquares() public {
        uint256 price = PRICE;
        deal(user, price);
        deal(user2, price);

        vm.startPrank(user);
        buyEarth.buySquare{value: price}(1, 0xFF0000);
        vm.stopPrank();

        vm.startPrank(user2);
        buyEarth.buySquare{value: price}(2, 0x00FF00);
        vm.stopPrank();

        assertEq(buyEarth.getColor(1), 0xFF0000);
        assertEq(buyEarth.getColor(2), 0x00FF00);
    }

    // æµ‹è¯•æ‰€æœ‰è€…åŠŸèƒ½
    function testOwnerFunctions() public {
        // æµ‹è¯•è®¾ç½®é¢œè‰²
        vm.startPrank(owner.addr);
        buyEarth.setColor(1, 0x0000FF);
        assertEq(buyEarth.getColor(1), 0x0000FF);
        vm.stopPrank();

        // æµ‹è¯•éæ‰€æœ‰è€…ä¸èƒ½è®¾ç½®é¢œè‰²
        vm.startPrank(user);
        vm.expectRevert("Only owner can call this function");
        buyEarth.setColor(1, 0x0000FF);
        vm.stopPrank();

        // æµ‹è¯•è½¬ç§»æ‰€æœ‰æƒ
        vm.startPrank(owner.addr);
        buyEarth.setOwner(user);
        assertEq(buyEarth.getOwner(), user);
        vm.stopPrank();
    }

    // æµ‹è¯•äº‹ä»¶
    function testEvents() public {
        uint8 testIdx = 1;
        uint256 testColor = 0xFF0000;
        uint256 price = PRICE;
        deal(user, price);

        // æµ‹è¯•è´­ä¹°æ ¼å­äº‹ä»¶
        vm.startPrank(user);
        vm.expectEmit(true, true, true, true);
        emit BuySquare(testIdx, testColor);
        buyEarth.buySquare{value: price}(testIdx, testColor);
        vm.stopPrank();

        // æµ‹è¯•æ‰€æœ‰æƒè½¬ç§»äº‹ä»¶
        vm.startPrank(owner.addr);
        vm.expectEmit(true, true, true, true);
        emit OwnershipTransferred(owner.addr, user);
        buyEarth.setOwner(user);
        vm.stopPrank();

        // æµ‹è¯•é¢œè‰²å˜æ›´äº‹ä»¶
        vm.startPrank(user);
        vm.expectEmit(true, true, true, true);
        emit ColorChanged(testIdx, 0x00FF00);
        buyEarth.setColor(testIdx, 0x00FF00);
        vm.stopPrank();
    }

    // æµ‹è¯•ç›´æ¥è½¬è´¦
    function testDirectTransfer() public {
        deal(user, 1 ether);
        vm.startPrank(user);
        (bool success,) = address(buyEarth).call{value: 0.1 ether}("");
        assertTrue(success); // éªŒè¯è½¬è´¦æˆåŠŸ
        assertEq(user.balance, 0.9 ether);
        assertEq(address(buyEarth).balance, 0.1 ether);
        vm.stopPrank();
    }

    // æµ‹è¯•æç°è¾¹ç•Œæ¡ä»¶
    function testWithdrawToEdgeCases() public {
        // æµ‹è¯•é›¶åœ°å€æç°
        vm.startPrank(owner.addr);
        vm.expectRevert("Invalid recipient address");
        buyEarth.withdrawTo(address(0));
        vm.stopPrank();

        // æµ‹è¯•æ— ä½™é¢æç°
        vm.startPrank(owner.addr);
        vm.expectRevert("No funds to withdraw");
        buyEarth.withdrawTo(receipt);
        vm.stopPrank();
    }

    // æµ‹è¯•æç°
    function testWithdraw() public {
        deal(address(buyEarth), 1 ether);
        vm.startPrank(owner.addr);
        vm.expectRevert("No depositors");
        buyEarth.withdrawTo(receipt);
        vm.stopPrank();

        vm.startPrank(user);
        deal(user, 1 ether);
        buyEarth.deposit{value: 1 ether}();
        vm.stopPrank();

        vm.startPrank(owner.addr);
        buyEarth.withdrawTo(receipt);

        assertEq(address(buyEarth).balance, 0);
        assertEq(receipt.balance, 2 ether);
        vm.stopPrank();
    }

    function testDeposit() public {
        deal(user, 1 ether);
        vm.startPrank(user);

        // æ˜ç¡®æŒ‡å®šè°ƒç”¨åˆçº¦çš„deposit()
        (bool success,) = address(buyEarth).call{value: 0.1 ether}(abi.encodeWithSignature("deposit()"));
        require(success, "Deposit failed");

        vm.stopPrank();

        assertEq(buyEarth.getUserDeposits(user), 0.1 ether);
    }

    function testWithdrawFromDeposit() public {
        deal(user, 1 ether);
        vm.startPrank(user);

        // æ˜ç¡®æŒ‡å®šè°ƒç”¨åˆçº¦çš„deposit()
        (bool success,) = address(buyEarth).call{value: 0.1 ether}(abi.encodeWithSignature("deposit()"));
        require(success, "Deposit failed");

        assertEq(buyEarth.getUserDeposits(user), 0.1 ether);
        assertEq(user.balance, 0.9 ether);
        assertEq(address(buyEarth).balance, 0.1 ether);
        vm.stopPrank();

        vm.startPrank(owner.addr);

        buyEarth.withdrawTo(receipt);
        assertEq(address(buyEarth).balance, 0);
        assertEq(receipt.balance, 0.1 ether);
        vm.stopPrank();

        assertEq(buyEarth.getUserDeposits(user), 0);
    }

    // æ–°å¢æµ‹è¯•ç”¨ä¾‹ 1ï¼šæµ‹è¯•è´­ä¹°åœ°å—æ—¶æ”¯ä»˜åˆšå¥½ç­‰äº PRICEï¼ˆæ— é€€æ¬¾ï¼‰
    function testBuySquareExactPrice() public {
        uint8 testIdx = 3;
        uint256 testColor = 0x00FF00; // ç»¿è‰²

        vm.startPrank(user);
        deal(user, PRICE);
        buyEarth.buySquare{value: PRICE}(testIdx, testColor);
        vm.stopPrank();

        assertEq(buyEarth.getColor(testIdx), testColor);
        assertEq(user.balance, 0); // æ— é€€æ¬¾ï¼Œä½™é¢åº”ä¸º 0
        assertEq(address(buyEarth).balance, 0); // èµ„é‡‘è½¬ç»™ owner
        assertEq(owner.addr.balance, PRICE); // owner æ”¶åˆ° PRICE
    }

    // æ–°å¢æµ‹è¯•ç”¨ä¾‹ 2ï¼šæµ‹è¯•åŒä¸€ç”¨æˆ·å¤šæ¬¡å­˜æ¬¾
    function testMultipleDeposits() public {
        deal(user, 1 ether);
        vm.startPrank(user);

        // ç¬¬ä¸€æ¬¡å­˜æ¬¾
        buyEarth.deposit{value: 0.1 ether}();
        assertEq(buyEarth.getUserDeposits(user), 0.1 ether);

        // ç¬¬äºŒæ¬¡å­˜æ¬¾
        buyEarth.deposit{value: 0.2 ether}();
        assertEq(buyEarth.getUserDeposits(user), 0.3 ether); // ç´¯è®¡å­˜æ¬¾

        vm.stopPrank();

        // éªŒè¯ depositorList åªè®°å½•ä¸€æ¬¡ç”¨æˆ·åœ°å€
        // ç”±äº _getAllDepositors æ˜¯ privateï¼Œé—´æ¥éªŒè¯ depositorList è¡Œä¸º
        assertEq(address(buyEarth).balance, 0.3 ether);
    }

    // æ–°å¢æµ‹è¯•ç”¨ä¾‹ 3ï¼šæµ‹è¯•å¤šç”¨æˆ·å­˜æ¬¾å withdrawTo æ¸…ç©º userDeposits
    function testWithdrawWithMultipleDepositors() public {
        deal(user, 1 ether);
        deal(user2, 1 ether);

        // ç”¨æˆ· 1 å­˜æ¬¾
        vm.startPrank(user);
        buyEarth.deposit{value: 0.1 ether}();
        vm.stopPrank();

        // ç”¨æˆ· 2 å­˜æ¬¾
        vm.startPrank(user2);
        buyEarth.deposit{value: 0.2 ether}();
        vm.stopPrank();

        // éªŒè¯åˆå§‹å­˜æ¬¾
        assertEq(buyEarth.getUserDeposits(user), 0.1 ether);
        assertEq(buyEarth.getUserDeposits(user2), 0.2 ether);
        assertEq(address(buyEarth).balance, 0.3 ether);

        // æ‹¥æœ‰è€…æç°
        vm.startPrank(owner.addr);
        buyEarth.withdrawTo(receipt);
        vm.stopPrank();
        // éªŒè¯å­˜æ¬¾è¢«æ¸…ç©º
        assertEq(buyEarth.getUserDeposits(user), 0);
        assertEq(buyEarth.getUserDeposits(user2), 0);
        assertEq(address(buyEarth).balance, 0);
        assertEq(receipt.balance, 0.3 ether);
    }

    // æµ‹è¯• setColor çš„æ— æ•ˆç´¢å¼•
    function testSetColorInvalidIndex() public {
        vm.startPrank(owner.addr);
        vm.expectRevert("Invalid square number");
        buyEarth.setColor(100, 0xFF0000);
        vm.stopPrank();
    }

    // æµ‹è¯• receive å‡½æ•°çš„é›¶é‡‘é¢è½¬è´¦
    function testReceiveZeroAmount() public {
        vm.startPrank(user);
        vm.expectRevert("Must send some ETH");
        (bool success,) = address(buyEarth).call{value: 0}("");
        assertTrue(success);
        vm.stopPrank();

        assertEq(buyEarth.getUserDeposits(user), 0);
        assertEq(address(buyEarth).balance, 0);
    }
    // æµ‹è¯• owner æ”¯ä»˜å¤±è´¥åœºæ™¯ï¼ˆæ¨¡æ‹Ÿ owner åœ°å€æ— æ³•æ¥æ”¶ ETHï¼‰

    function testBuySquareOwnerPaymentFailure() public {
        // åˆ›å»ºä¸€ä¸ªæ— æ³•æ¥æ”¶ ETH çš„åˆçº¦ä½œä¸º owner
        NoReceiveETH noReceive = new NoReceiveETH();
        vm.startPrank(owner.addr);
        buyEarth.setOwner(address(noReceive));
        vm.stopPrank();

        // ç”¨æˆ·å°è¯•è´­ä¹°åœ°å—
        vm.startPrank(user);
        deal(user, PRICE);
        vm.expectRevert("Owner payment failed");
        buyEarth.buySquare{value: PRICE}(1, 0xFF0000);
        vm.stopPrank();

        // éªŒè¯åœ°å—æœªè¢«æ›´æ–°
        assertEq(buyEarth.getColor(1), 0);
    }

    // æµ‹è¯• buySquare ä¸­é€€æ¬¾å¤±è´¥åœºæ™¯
    function testBuySquareChangeReturnFailure() public {
        // åˆ›å»ºä¸€ä¸ªæ— æ³•æ¥æ”¶ ETH çš„ç”¨æˆ·åˆçº¦
        NoReceiveETH noReceiveUser = new NoReceiveETH();
        address noReceiveAddr = address(noReceiveUser);

        vm.startPrank(noReceiveAddr);
        deal(noReceiveAddr, PRICE * 2);
        vm.expectRevert("Change return failed");
        buyEarth.buySquare{value: PRICE * 2}(1, 0xFF0000);
        vm.stopPrank();

        // éªŒè¯åœ°å—æœªè¢«æ›´æ–°
        assertEq(buyEarth.getColor(1), 0);
    }

    // æµ‹è¯• withdrawTo ä¸­æ”¯ä»˜å¤±è´¥åœºæ™¯
    function testWithdrawToPaymentFailure() public {
        // åˆ›å»ºä¸€ä¸ªæ— æ³•æ¥æ”¶ ETH çš„æ¥æ”¶è€…åˆçº¦
        NoReceiveETH noReceiveRecipient = new NoReceiveETH();
        address noReceiveAddr = address(noReceiveRecipient);

        // å‘åˆçº¦æ³¨å…¥èµ„é‡‘
        deal(address(buyEarth), 1 ether);

        vm.startPrank(owner.addr);
        vm.expectRevert("No depositors");
        buyEarth.withdrawTo(noReceiveAddr);
        vm.stopPrank();

        // éªŒè¯åˆçº¦ä½™é¢æœªæ”¹å˜
        assertEq(address(buyEarth).balance, 1 ether);
    }

    // æµ‹è¯• setOwner çš„é›¶åœ°å€åœºæ™¯
    function testSetOwnerZeroAddress() public {
        vm.startPrank(owner.addr);
        vm.expectRevert("Invalid owner address");
        buyEarth.setOwner(address(0));
        vm.stopPrank();

        // éªŒè¯æ‰€æœ‰è€…æœªæ”¹å˜
        assertEq(buyEarth.getOwner(), owner.addr);
    }

    function testReceiveNonZeroAmount() public {
        vm.startPrank(user);
        deal(user, 0.2 ether);

        // ç¬¬ä¸€æ¬¡è½¬è´¦ï¼šæ–°ç”¨æˆ·å­˜æ¬¾
        (bool success1,) = address(buyEarth).call{value: 0.1 ether}("");
        assertTrue(success1);
        assertEq(buyEarth.getUserDeposits(user), 0.1 ether);

        // ç¬¬äºŒæ¬¡è½¬è´¦ï¼šå·²æœ‰ç”¨æˆ·å­˜æ¬¾
        (bool success2,) = address(buyEarth).call{value: 0.1 ether}("");
        assertTrue(success2);
        assertEq(buyEarth.getUserDeposits(user), 0.2 ether);

        vm.stopPrank();
    }

    function testWithdrawWithEmptyDepositorList() public {
        // ç¡®ä¿åˆçº¦æœ‰ä½™é¢ä½† depositorList ä¸ºç©º
        deal(address(buyEarth), 0.1 ether);

        vm.startPrank(owner.addr);
        vm.expectRevert("No depositors");
        buyEarth.withdrawTo(receipt);
        vm.stopPrank();

        vm.startPrank(user);
        deal(user, 0.1 ether);
        buyEarth.deposit{value: 0.1 ether}();
        vm.stopPrank();

        vm.startPrank(owner.addr);
        buyEarth.withdrawTo(receipt);
        vm.stopPrank();
        // éªŒè¯æç°æˆåŠŸ
        assertEq(address(buyEarth).balance, 0);
        assertEq(receipt.balance, 0.2 ether);
    }

    function testDeploymentScript() public {
        // è®¾ç½® PRIVATE_KEY ç¯å¢ƒå˜é‡
        vm.setEnv("PRIVATE_KEY", "0x1"); // æµ‹è¯•ç”¨ç§é’¥

        // æ¨¡æ‹Ÿè¿è¡Œéƒ¨ç½²è„šæœ¬
        BuyEarthScript script = new BuyEarthScript();
        BuyEarth deployedContract = script.run();

        // éªŒè¯åˆå§‹çŠ¶æ€
        assertEq(deployedContract.getOwner(), vm.addr(0x1)); // ç§é’¥ 0x1 å¯¹åº”çš„åœ°å€
        uint256[] memory squares = deployedContract.getSquares();
        assertEq(squares.length, 100);
        for (uint256 i = 0; i < 100; i++) {
            assertEq(squares[i], 0);
        }
    }

    function testOnlyOwnerRestriction() public {
        vm.startPrank(user); // éæ‰€æœ‰è€…
        vm.expectRevert("Only owner can call this function");
        buyEarth.setColor(0, 0xFF0000);
        vm.stopPrank();
    }

    function testWithdrawWithEmptyDepositorListExtended() public {
        // ç¡®ä¿ depositorList ä¸ºç©º
        assertEq(buyEarth.getUserDeposits(user), 0); // ç¡®è®¤æ— å­˜æ¬¾

        // å‘åˆçº¦æ³¨å…¥ä½™é¢
        deal(address(buyEarth), 0.1 ether);

        vm.startPrank(owner.addr);
        vm.expectRevert("No depositors");
        buyEarth.withdrawTo(receipt);
        vm.stopPrank();

        vm.startPrank(user);
        deal(user, 0.1 ether);
        buyEarth.deposit{value: 0.1 ether}();
        vm.stopPrank();

        vm.startPrank(owner.addr);
        buyEarth.withdrawTo(receipt);
        vm.stopPrank();

        // éªŒè¯æç°ç»“æœ
        assertEq(address(buyEarth).balance, 0);
        assertEq(receipt.balance, 0.2 ether);
    }

    function testDeploymentScript2() public {
        // è®¾ç½® PRIVATE_KEY ç¯å¢ƒå˜é‡
        vm.setEnv("PRIVATE_KEY", "0x1");

        // è¿è¡Œéƒ¨ç½²è„šæœ¬
        BuyEarthScript script = new BuyEarthScript();
        script.setUp(); // æ˜¾å¼è°ƒç”¨ setUp
        script.run();
    }

    function testWithdrawWithEmptyDepositorListExtended2() public {
        // ç¡®ä¿ depositorList ä¸ºç©º
        assertEq(buyEarth.getUserDeposits(user), 0);

        // æ³¨å…¥ä½™é¢
        deal(address(buyEarth), 0.1 ether);

        vm.startPrank(owner.addr);
        vm.expectRevert("No depositors");
        buyEarth.withdrawTo(receipt);
        vm.stopPrank();

        vm.startPrank(user);
        deal(user, 0.1 ether);
        buyEarth.deposit{value: 0.1 ether}();
        vm.stopPrank();

        vm.startPrank(owner.addr);
        buyEarth.withdrawTo(receipt);
        vm.stopPrank();
        // éªŒè¯ç»“æœ
        assertEq(address(buyEarth).balance, 0);
        assertEq(receipt.balance, 0.2 ether);
    }

    function testWithdrawWithEmptyDepositorListMinimal() public {
        // ç¡®ä¿ depositorList ä¸ºç©ºä¸”æ— å­˜æ¬¾
        assertEq(buyEarth.getUserDeposits(user), 0);

        // æ³¨å…¥æœ€å°ä½™é¢
        deal(address(buyEarth), 0.001 ether);

        vm.startPrank(owner.addr);
        vm.expectRevert("No depositors");
        buyEarth.withdrawTo(receipt);
        vm.stopPrank();

        vm.startPrank(user);
        deal(user, 0.001 ether);
        buyEarth.deposit{value: 0.001 ether}();
        vm.stopPrank();

        vm.startPrank(owner.addr);
        buyEarth.withdrawTo(receipt);
        vm.stopPrank();

        // éªŒè¯ç»“æœ
        assertEq(address(buyEarth).balance, 0);
        assertEq(receipt.balance, 0.002 ether);
    }

    function testBuySquareOwnerPaymentEdgeCase() public {
        uint8 testIdx = 1;
        uint256 testColor = 0xFF0000;
        uint256 price = 0.001 ether;

        // åˆ›å»ºä¸€ä¸ªæ— æ³•æ¥æ”¶ ETH çš„åˆçº¦ä½œä¸º owner
        NoReceiveETH noReceive = new NoReceiveETH();
        vm.startPrank(owner.addr);
        buyEarth.setOwner(address(noReceive));
        vm.stopPrank();

        vm.startPrank(user);
        deal(user, price);

        // æœŸæœ› owner æ”¯ä»˜å¤±è´¥
        vm.expectRevert("Owner payment failed");
        buyEarth.buySquare{value: price}(testIdx, testColor);

        vm.stopPrank();

        // éªŒè¯æ ¼å­æœªæ›´æ–°
        assertEq(buyEarth.getColor(testIdx), 0);
    }

    function testGetSquaresMemoryEdgeCase() public {
        // å¤šæ¬¡è°ƒç”¨ getSquaresï¼Œå°è¯•è§¦å‘å†…å­˜åˆ†é…çš„è¾¹ç¼˜æƒ…å†µ
        for (uint256 j = 0; j < 10; j++) {
            uint256[] memory squares = buyEarth.getSquares();
            assertEq(squares.length, 100);
            for (uint256 i = 0; i < 100; i++) {
                assertEq(squares[i], 0);
            }
        }

        // ä¿®æ”¹æ ¼å­åå†æ¬¡è°ƒç”¨
        vm.startPrank(owner.addr);
        buyEarth.setColor(0, 0xFF0000);
        vm.stopPrank();

        for (uint256 j = 0; j < 10; j++) {
            uint256[] memory squares = buyEarth.getSquares();
            assertEq(squares[0], 0xFF0000);
            for (uint256 i = 1; i < 100; i++) {
                assertEq(squares[i], 0);
            }
        }
    }

    function testBuySquareOwnerCallEdgeCase() public {
        uint8 testIdx = 1;
        uint256 testColor = 0xFF0000;
        uint256 price = 0.001 ether;

        // è®¾ç½® owner ä¸ºæ— æ³•æ¥æ”¶ ETH çš„åˆçº¦
        NoReceiveETH noReceive = new NoReceiveETH();
        vm.startPrank(owner.addr);
        buyEarth.setOwner(address(noReceive));
        vm.stopPrank();

        vm.startPrank(user);
        deal(user, price);

        // æµ‹è¯• owner.call å¤±è´¥
        vm.expectRevert("Owner payment failed");
        buyEarth.buySquare{value: price}(testIdx, testColor);

        vm.stopPrank();

        // éªŒè¯çŠ¶æ€æœªæ›´æ”¹
        assertEq(buyEarth.getColor(testIdx), 0);
    }

    function testGetSquaresExtremeStressTest() public {
        // æé«˜é¢‘ç‡è°ƒç”¨ getSquaresï¼Œæ¨¡æ‹Ÿæç«¯å†…å­˜å‹åŠ›
        for (uint256 j = 0; j < 1000; j++) {
            uint256[] memory squares = buyEarth.getSquares();
            assertEq(squares.length, 100);
            for (uint256 i = 0; i < 100; i++) {
                assertEq(squares[i], 0);
            }
        }

        // ä¿®æ”¹æ ¼å­åå†æ¬¡è°ƒç”¨
        vm.startPrank(owner.addr);
        buyEarth.setColor(0, 0xFF0000);
        vm.stopPrank();

        for (uint256 j = 0; j < 1000; j++) {
            uint256[] memory squares = buyEarth.getSquares();
            assertEq(squares[0], 0xFF0000);
            for (uint256 i = 1; i < 100; i++) {
                assertEq(squares[i], 0);
            }
        }
    }
    // æµ‹è¯•æ‰€æœ‰æƒè½¬ç§»åçš„æ—§æ‰€æœ‰è€…æƒé™

    function testOldOwnerPermission() public {
        vm.startPrank(owner.addr);
        buyEarth.setOwner(user2);

        // æ—§æ‰€æœ‰è€…å°è¯•æ“ä½œ
        vm.expectRevert("Only owner can call this function");
        buyEarth.setColor(1, 0xFF0000);
        vm.stopPrank();
    }

    // ç²¾ç¡®éªŒè¯äº‹ä»¶å‚æ•°
    function testEventParameters() public {
        vm.startPrank(owner.addr);

        // éªŒè¯ OwnershipTransferred äº‹ä»¶å‚æ•°
        vm.expectEmit(true, true, true, true);
        emit OwnershipTransferred(owner.addr, user);
        buyEarth.setOwner(user);

        vm.stopPrank();
    }

    function testWithdrawWithEmptyDepositorList2() public {
        // æŸ¥çœ‹åˆçº¦ä½™é¢
        assertEq(address(buyEarth).balance, 0);
        // å­˜æ¬¾
        vm.deal(user, 1 ether);
        vm.startPrank(user);
        buyEarth.deposit{value: 1 ether}();
        vm.stopPrank();
        assertEq(address(buyEarth).balance, 1 ether);
        assertEq(buyEarth.getUserDeposits(user), 1 ether);
        // æ¸…ç©ºå­˜æ¬¾ç”¨æˆ·åˆ—è¡¨
        vm.startPrank(owner.addr);
        buyEarth.withdrawTo(receipt); // é¦–æ¬¡æç°æ¸…ç©ºåˆ—è¡¨
        vm.stopPrank();

        // å†æ¬¡å°è¯•æç°ï¼ˆæ­¤æ—¶ depositorList ä¸ºç©ºï¼‰
        deal(address(buyEarth), 1 ether);
        vm.startPrank(owner.addr);
        // vm.expectRevert("No funds to withdraw");
        buyEarth.withdrawTo(receipt);
        vm.stopPrank();

        assertEq(address(buyEarth).balance, 0);
        assertEq(receipt.balance, 2 ether);

        // éªŒè¯æ­¤æ—¶åˆçº¦ä½™é¢ä¸º 0
        assertEq(address(buyEarth).balance, 0);

        // å°è¯•å†æ¬¡æç°ï¼ˆåº”è§¦å‘å›é€€ï¼‰
        vm.startPrank(owner.addr);
        vm.expectRevert("No funds to withdraw");
        buyEarth.withdrawTo(receipt);
        vm.stopPrank();
    }

    function testWithdrawWithEmptyDepositorListAndBalance() public {
    // 1. åˆå§‹åŒ–çŠ¶æ€
    deal(user, 1 ether);
    vm.prank(user);
    buyEarth.deposit{value: 1 ether}();
    assertEq(address(buyEarth).balance, 1 ether);

    // 2. é¦–æ¬¡æç°ï¼ˆæ¸…ç©ºå­˜æ¬¾åˆ—è¡¨ï¼‰
    vm.prank(owner.addr);
    buyEarth.withdrawTo(receipt);
    assertEq(address(buyEarth).balance, 0);

    // 3. å†æ¬¡æç°ï¼ˆå­˜æ¬¾åˆ—è¡¨ä¸ºç©ºä¸”åˆçº¦ä½™é¢ä¸º 0ï¼‰
    vm.prank(owner.addr);
    vm.expectRevert("No funds to withdraw");
    buyEarth.withdrawTo(receipt);
}
}

// è¾…åŠ©åˆçº¦ï¼šæ¨¡æ‹Ÿæ— æ³•æ¥æ”¶ ETH çš„åœ°å€
contract NoReceiveETH {
// æ²¡æœ‰ receive æˆ– fallback å‡½æ•°ï¼Œæ— æ³•æ¥æ”¶ ETH
}

```

### æ ¼å¼åŒ–é¡¹ç›®

```bash
qiaopengjun in buyearth on  î‚  main 
â¯ forge fmt  
```

### é…ç½® Foundry çš„è·¯å¾„æ˜ å°„è§„åˆ™ï¼Œè§£å†³ä¾èµ–åº“ï¼ˆå¦‚ `forge-std`ï¼‰çš„å¯¼å…¥è·¯å¾„é—®é¢˜

```bash
â¯ forge remappings > remappings.txt
```

### ç¼–è¯‘æ„å»ºé¡¹ç›®

```bash
qiaopengjun in buyearth on  î‚  main 
â¯ forge build
[â †] Compiling...
[â °] Compiling 3 files with Solc 0.8.28
[â ’] Solc 0.8.28 finished in 9.09s
Compiler run successful!
```

### è¿è¡Œæµ‹è¯•

```bash
qiaopengjun in buyearth on  î‚  main 
â¯ forge test -vv              
[â Š] Compiling...
No files changed, compilation skipped

Ran 36 tests for test/BuyEarth.t.sol:BuyEarthTest
[PASS] testBuySquare() (gas: 90332)
[PASS] testBuySquareChangeReturnFailure() (gas: 97667)
[PASS] testBuySquareEdgeCases() (gas: 41043)
[PASS] testBuySquareExactPrice() (gas: 61995)
[PASS] testBuySquareOwnerCallEdgeCase() (gas: 107561)
[PASS] testBuySquareOwnerPaymentEdgeCase() (gas: 108507)
[PASS] testBuySquareOwnerPaymentFailure() (gas: 110360)
[PASS] testDeploymentScript() (gas: 1635391)
Logs:
  BuyEarth deployed to: 0x63E0f79244f01106b2DDc7d83a53a26916B61238

[PASS] testDeploymentScript2() (gas: 1328679)
Logs:
  BuyEarth deployed to: 0x63E0f79244f01106b2DDc7d83a53a26916B61238

[PASS] testDeposit() (gas: 88654)
[PASS] testDirectTransfer() (gas: 89680)
[PASS] testEventParameters() (gas: 22988)
[PASS] testEvents() (gas: 74185)
[PASS] testGetSquaresExtremeStressTest() (gas: 531334506)
[PASS] testGetSquaresMemoryEdgeCase() (gas: 2359443)
[PASS] testInitialState() (gas: 318503)
[PASS] testMultipleDeposits() (gas: 100796)
[PASS] testMultipleUsersBuySquares() (gas: 100804)
[PASS] testOldOwnerPermission() (gas: 22127)
[PASS] testOnlyOwnerRestriction() (gas: 14907)
[PASS] testOwnerFunctions() (gas: 51745)
[PASS] testReceiveNonZeroAmount() (gas: 102419)
[PASS] testReceiveZeroAmount() (gas: 19555)
[PASS] testSetColorInvalidIndex() (gas: 14362)
[PASS] testSetOwnerZeroAddress() (gas: 17802)
[PASS] testWithdraw() (gas: 117963)
[PASS] testWithdrawFromDeposit() (gas: 116089)
[PASS] testWithdrawToEdgeCases() (gas: 21141)
[PASS] testWithdrawToPaymentFailure() (gas: 59591)
[PASS] testWithdrawWithEmptyDepositorList() (gas: 117014)
[PASS] testWithdrawWithEmptyDepositorList2() (gas: 129690)
[PASS] testWithdrawWithEmptyDepositorListAndBalance() (gas: 114325)
[PASS] testWithdrawWithEmptyDepositorListExtended() (gas: 121283)
[PASS] testWithdrawWithEmptyDepositorListExtended2() (gas: 121327)
[PASS] testWithdrawWithEmptyDepositorListMinimal() (gas: 121618)
[PASS] testWithdrawWithMultipleDepositors() (gas: 156837)
Suite result: ok. 36 passed; 0 failed; 0 skipped; finished in 8.39s (20.48s CPU time)

Ran 1 test suite in 10.21s (8.39s CPU time): 36 tests passed, 0 failed, 0 skipped (36 total tests)
qiaopengjun in buyearth on  î‚  main 
â¯ forge test --match-path test/BuyEarth.t.sol --show-progress -vv  
[â Š] Compiling...
No files changed, compilation skipped
test/BuyEarth.t.sol:BuyEarthTest
  â†ª Suite result: ok. 36 passed; 0 failed; 0 skipped; finished in 7.66s (16.41s CPU time)

Ran 36 tests for test/BuyEarth.t.sol:BuyEarthTest
[PASS] testBuySquare() (gas: 90332)
[PASS] testBuySquareChangeReturnFailure() (gas: 97667)
[PASS] testBuySquareEdgeCases() (gas: 41043)
[PASS] testBuySquareExactPrice() (gas: 61995)
[PASS] testBuySquareOwnerCallEdgeCase() (gas: 107561)
[PASS] testBuySquareOwnerPaymentEdgeCase() (gas: 108507)
[PASS] testBuySquareOwnerPaymentFailure() (gas: 110360)
[PASS] testDeploymentScript() (gas: 1635391)
Logs:
  BuyEarth deployed to: 0x63E0f79244f01106b2DDc7d83a53a26916B61238

[PASS] testDeploymentScript2() (gas: 1328679)
Logs:
  BuyEarth deployed to: 0x63E0f79244f01106b2DDc7d83a53a26916B61238

[PASS] testDeposit() (gas: 88654)
[PASS] testDirectTransfer() (gas: 89680)
[PASS] testEventParameters() (gas: 22988)
[PASS] testEvents() (gas: 74185)
[PASS] testGetSquaresExtremeStressTest() (gas: 531334506)
[PASS] testGetSquaresMemoryEdgeCase() (gas: 2359443)
[PASS] testInitialState() (gas: 318503)
[PASS] testMultipleDeposits() (gas: 100796)
[PASS] testMultipleUsersBuySquares() (gas: 100804)
[PASS] testOldOwnerPermission() (gas: 22127)
[PASS] testOnlyOwnerRestriction() (gas: 14907)
[PASS] testOwnerFunctions() (gas: 51745)
[PASS] testReceiveNonZeroAmount() (gas: 102419)
[PASS] testReceiveZeroAmount() (gas: 19555)
[PASS] testSetColorInvalidIndex() (gas: 14362)
[PASS] testSetOwnerZeroAddress() (gas: 17802)
[PASS] testWithdraw() (gas: 117963)
[PASS] testWithdrawFromDeposit() (gas: 116089)
[PASS] testWithdrawToEdgeCases() (gas: 21141)
[PASS] testWithdrawToPaymentFailure() (gas: 59591)
[PASS] testWithdrawWithEmptyDepositorList() (gas: 117014)
[PASS] testWithdrawWithEmptyDepositorList2() (gas: 129690)
[PASS] testWithdrawWithEmptyDepositorListAndBalance() (gas: 114325)
[PASS] testWithdrawWithEmptyDepositorListExtended() (gas: 121283)
[PASS] testWithdrawWithEmptyDepositorListExtended2() (gas: 121327)
[PASS] testWithdrawWithEmptyDepositorListMinimal() (gas: 121618)
[PASS] testWithdrawWithMultipleDepositors() (gas: 156837)
Suite result: ok. 36 passed; 0 failed; 0 skipped; finished in 7.66s (16.41s CPU time)

Ran 1 test suite in 10.64s (7.66s CPU time): 36 tests passed, 0 failed, 0 skipped (36 total tests)
qiaopengjun in buyearth on  î‚  main 
â¯ 
```

### å®‰è£… Lcov

```bash
brew install lcov
==> Downloading https://formulae.brew.sh/api/formula.jws.json
==> Downloading https://formulae.brew.sh/api/cask.jws.json
==> Downloading https://ghcr.io/v2/homebrew/core/lcov/manifests/2.3.1
############################################################################################################################ 100.0%
==> Fetching lcov
==> Downloading https://ghcr.io/v2/homebrew/core/lcov/blobs/sha256:fcedc02edaf2f1741c7dba360cc56e57804bf0c004c42e4d6c52978cccdeb741
############################################################################################################################ 100.0%
==> Pouring lcov--2.3.1.arm64_sequoia.bottle.tar.gz
ğŸº  /opt/homebrew/Cellar/lcov/2.3.1: 70 files, 2.2MB
==> Running `brew cleanup lcov`...
Disable this behaviour by setting HOMEBREW_NO_INSTALL_CLEANUP.
Hide these hints with HOMEBREW_NO_ENV_HINTS (see `man brew`).


genhtml --version
genhtml: LCOV version 2.3.1-1
```

### æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡

```bash
qiaopengjun in buyearth on  î‚  main 
â¯ forge coverage 
Warning: optimizer settings have been disabled for accurate coverage reports, if you encounter "stack too deep" errors, consider using `--ir-minimum` which enables viaIR with minimum optimization resolving most of the errors
[â Š] Compiling...
[â ‘] Compiling 22 files with Solc 0.8.28
[â ˜] Solc 0.8.28 finished in 1.70s
Compiler run successful!
Analysing contracts...
Running tests...

Ran 36 tests for test/BuyEarth.t.sol:BuyEarthTest
[PASS] testBuySquare() (gas: 92748)
[PASS] testBuySquareChangeReturnFailure() (gas: 100789)
[PASS] testBuySquareEdgeCases() (gas: 43045)
[PASS] testBuySquareExactPrice() (gas: 64060)
[PASS] testBuySquareOwnerCallEdgeCase() (gas: 111331)
[PASS] testBuySquareOwnerPaymentEdgeCase() (gas: 111263)
[PASS] testBuySquareOwnerPaymentFailure() (gas: 113850)
[PASS] testDeploymentScript() (gas: 3285446)
[PASS] testDeploymentScript2() (gas: 2934158)
[PASS] testDeposit() (gas: 89877)
[PASS] testDirectTransfer() (gas: 90843)
[PASS] testEventParameters() (gas: 23196)
[PASS] testEvents() (gas: 78219)
[PASS] testGetSquaresExtremeStressTest() (gas: 621406249)
[PASS] testGetSquaresMemoryEdgeCase() (gas: 3260237)
[PASS] testInitialState() (gas: 363330)
[PASS] testMultipleDeposits() (gas: 102704)
[PASS] testMultipleUsersBuySquares() (gas: 105390)
[PASS] testOldOwnerPermission() (gas: 23251)
[PASS] testOnlyOwnerRestriction() (gas: 15022)
[PASS] testOwnerFunctions() (gas: 55415)
[PASS] testReceiveNonZeroAmount() (gas: 105848)
[PASS] testReceiveZeroAmount() (gas: 21031)
[PASS] testSetColorInvalidIndex() (gas: 15021)
[PASS] testSetOwnerZeroAddress() (gas: 18612)
[PASS] testWithdraw() (gas: 119006)
[PASS] testWithdrawFromDeposit() (gas: 120232)
[PASS] testWithdrawToEdgeCases() (gas: 21924)
[PASS] testWithdrawToPaymentFailure() (gas: 60483)
[PASS] testWithdrawWithEmptyDepositorList() (gas: 119052)
[PASS] testWithdrawWithEmptyDepositorList2() (gas: 133525)
[PASS] testWithdrawWithEmptyDepositorListAndBalance() (gas: 115588)
[PASS] testWithdrawWithEmptyDepositorListExtended() (gas: 124092)
[PASS] testWithdrawWithEmptyDepositorListExtended2() (gas: 124048)
[PASS] testWithdrawWithEmptyDepositorListMinimal() (gas: 124048)
[PASS] testWithdrawWithMultipleDepositors() (gas: 162594)
Suite result: ok. 36 passed; 0 failed; 0 skipped; finished in 7.90s (17.88s CPU time)

Ran 1 test suite in 10.23s (7.90s CPU time): 36 tests passed, 0 failed, 0 skipped (36 total tests)

â•­-----------------------+-----------------+-----------------+----------------+-----------------â•®
| File                  | % Lines         | % Statements    | % Branches     | % Funcs         |
+==============================================================================================+
| script/BuyEarth.s.sol | 100.00% (8/8)   | 100.00% (7/7)   | 100.00% (0/0)  | 100.00% (2/2)   |
|-----------------------+-----------------+-----------------+----------------+-----------------|
| src/BuyEarth.sol      | 100.00% (56/56) | 100.00% (53/53) | 92.86% (26/28) | 100.00% (13/13) |
|-----------------------+-----------------+-----------------+----------------+-----------------|
| Total                 | 100.00% (64/64) | 100.00% (60/60) | 92.86% (26/28) | 100.00% (15/15) |
â•°-----------------------+-----------------+-----------------+----------------+-----------------â•¯
```

### ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šå¹¶åœ¨æµè§ˆå™¨æ‰“å¼€

```bash
qiaopengjun in buyearth on  î‚  main 
â¯ forge coverage --report lcov
genhtml lcov.info -o coverage
open coverage/index.html
Warning: optimizer settings have been disabled for accurate coverage reports, if you encounter "stack too deep" errors, consider using `--ir-minimum` which enables viaIR with minimum optimization resolving most of the errors
[â Š] Compiling...
[â ‘] Compiling 22 files with Solc 0.8.28
[â ˜] Solc 0.8.28 finished in 1.68s
Compiler run successful!
Analysing contracts...
Running tests...

Ran 36 tests for test/BuyEarth.t.sol:BuyEarthTest
[PASS] testBuySquare() (gas: 92748)
[PASS] testBuySquareChangeReturnFailure() (gas: 100789)
[PASS] testBuySquareEdgeCases() (gas: 43045)
[PASS] testBuySquareExactPrice() (gas: 64060)
[PASS] testBuySquareOwnerCallEdgeCase() (gas: 111331)
[PASS] testBuySquareOwnerPaymentEdgeCase() (gas: 111263)
[PASS] testBuySquareOwnerPaymentFailure() (gas: 113850)
[PASS] testDeploymentScript() (gas: 3285446)
[PASS] testDeploymentScript2() (gas: 2934158)
[PASS] testDeposit() (gas: 89877)
[PASS] testDirectTransfer() (gas: 90843)
[PASS] testEventParameters() (gas: 23196)
[PASS] testEvents() (gas: 78219)
[PASS] testGetSquaresExtremeStressTest() (gas: 621406249)
[PASS] testGetSquaresMemoryEdgeCase() (gas: 3260237)
[PASS] testInitialState() (gas: 363330)
[PASS] testMultipleDeposits() (gas: 102704)
[PASS] testMultipleUsersBuySquares() (gas: 105390)
[PASS] testOldOwnerPermission() (gas: 23251)
[PASS] testOnlyOwnerRestriction() (gas: 15022)
[PASS] testOwnerFunctions() (gas: 55415)
[PASS] testReceiveNonZeroAmount() (gas: 105848)
[PASS] testReceiveZeroAmount() (gas: 21031)
[PASS] testSetColorInvalidIndex() (gas: 15021)
[PASS] testSetOwnerZeroAddress() (gas: 18612)
[PASS] testWithdraw() (gas: 119006)
[PASS] testWithdrawFromDeposit() (gas: 120232)
[PASS] testWithdrawToEdgeCases() (gas: 21924)
[PASS] testWithdrawToPaymentFailure() (gas: 60483)
[PASS] testWithdrawWithEmptyDepositorList() (gas: 119052)
[PASS] testWithdrawWithEmptyDepositorList2() (gas: 133525)
[PASS] testWithdrawWithEmptyDepositorListAndBalance() (gas: 115588)
[PASS] testWithdrawWithEmptyDepositorListExtended() (gas: 124092)
[PASS] testWithdrawWithEmptyDepositorListExtended2() (gas: 124048)
[PASS] testWithdrawWithEmptyDepositorListMinimal() (gas: 124048)
[PASS] testWithdrawWithMultipleDepositors() (gas: 162594)
Suite result: ok. 36 passed; 0 failed; 0 skipped; finished in 8.68s (26.36s CPU time)

Ran 1 test suite in 10.92s (8.68s CPU time): 36 tests passed, 0 failed, 0 skipped (36 total tests)
Wrote LCOV report.
Reading tracefile lcov.info.
Found 2 entries.
Found common filename prefix "/Users/qiaopengjun/Code/Monad/buyearth"
Generating output.
Processing file src/BuyEarth.sol
  lines=56 hit=56 functions=13 hit=13
Processing file script/BuyEarth.s.sol
  lines=8 hit=8 functions=2 hit=2
Overall coverage rate:
  source files: 2
  lines.......: 100.0% (64 of 64 lines)
  functions...: 100.0% (15 of 15 functions)
Message summary:
  no messages were reported
qiaopengjun in buyearth on  î‚  main 
â¯ 
```

### æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š

![image-20250420125743592](/images/image-20250420125743592.png)

### ç¼–å†™éƒ¨ç½²è„šæœ¬

```ts
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.24;

import {Script, console} from "forge-std/Script.sol";
import {BuyEarth} from "../src/BuyEarth.sol";

contract BuyEarthScript is Script {
    BuyEarth public buyEarth;

    function setUp() public {}

    function run() public returns (BuyEarth) {
        uint256 deployerPrivateKey = vm.envUint("PRIVATE_KEY");
        vm.startBroadcast(deployerPrivateKey);

        buyEarth = new BuyEarth();
        console.log("BuyEarth deployed to:", address(buyEarth));

        vm.stopBroadcast();
        return buyEarth;
    }
}

```

### éƒ¨ç½²åˆçº¦

```bash
qiaopengjun in buyearth on  î‚  main 
â¯ source .env    
qiaopengjun in buyearth on  î‚  main 
â¯ forge clean && forge build    
[â Š] Compiling...
[â ”] Compiling 22 files with Solc 0.8.28
[â ˜] Solc 0.8.28 finished in 5.66s
Compiler run successful!
qiaopengjun in buyearth on  î‚  main 
â¯ forge script BuyEarthScript --rpc-url $MONAD_RPC_URL  --broadcast -vvvvv 
[â ’] Compiling...
No files changed, compilation skipped
Traces:
  [132] BuyEarthScript::setUp()
    â””â”€ â† [Stop] 

  [564840] BuyEarthScript::run()
    â”œâ”€ [0] VM::envUint("PRIVATE_KEY") [staticcall]
    â”‚   â””â”€ â† [Return] <env var value>
    â”œâ”€ [0] VM::startBroadcast(<pk>)
    â”‚   â””â”€ â† [Return] 
    â”œâ”€ [519872] â†’ new BuyEarth@0xcA7EC1c665C252067e2CfbE55E40Aa29777A1B7E
    â”‚   â””â”€ â† [Return] 2486 bytes of code
    â”œâ”€ [0] console::log("BuyEarth deployed to:", BuyEarth: [0xcA7EC1c665C252067e2CfbE55E40Aa29777A1B7E]) [staticcall]
    â”‚   â””â”€ â† [Stop] 
    â”œâ”€ [0] VM::stopBroadcast()
    â”‚   â””â”€ â† [Return] 
    â””â”€ â† [Return] BuyEarth: [0xcA7EC1c665C252067e2CfbE55E40Aa29777A1B7E]


Script ran successfully.

== Return ==
0: contract BuyEarth 0xcA7EC1c665C252067e2CfbE55E40Aa29777A1B7E

== Logs ==
  BuyEarth deployed to: 0xcA7EC1c665C252067e2CfbE55E40Aa29777A1B7E

## Setting up 1 EVM.
==========================
Simulated On-chain Traces:

  [519872] â†’ new BuyEarth@0xcA7EC1c665C252067e2CfbE55E40Aa29777A1B7E
    â””â”€ â† [Return] 2486 bytes of code


==========================

Chain 10143

Estimated gas price: 100.000000001 gwei

Estimated total gas used for script: 796936

Estimated amount required: 0.079693600000796936 ETH

==========================

##### 10143
âœ…  [Success] Hash: 0x78a58f499cb7889dffb4ae2d359c39ca189dbd9e7fa4bc2d31a38c22447e3e45
Contract Address: 0xcA7EC1c665C252067e2CfbE55E40Aa29777A1B7E
Block: 13070896
Paid: 0.039846800000796936 ETH (796936 gas * 50.000000001 gwei)

âœ… Sequence #1 on 10143 | Total Paid: 0.039846800000796936 ETH (796936 gas * avg 50.000000001 gwei)
                                                                                                                                                                  

==========================

ONCHAIN EXECUTION COMPLETE & SUCCESSFUL.

Transactions saved to: /Users/qiaopengjun/Code/Monad/buyearth/broadcast/BuyEarth.s.sol/10143/run-latest.json

Sensitive values saved to: /Users/qiaopengjun/Code/Monad/buyearth/cache/BuyEarth.s.sol/10143/run-latest.json

```

### éªŒè¯åˆçº¦

```bash
qiaopengjun in buyearth on  î‚  main 
â¯ forge verify-contract \  
  --rpc-url https://testnet-rpc.monad.xyz \
  --verifier sourcify \
  --verifier-url 'https://sourcify-api-monad.blockvision.org' \
  0xcA7EC1c665C252067e2CfbE55E40Aa29777A1B7E \
  src/BuyEarth.sol:BuyEarth
Start verifying contract `0xcA7EC1c665C252067e2CfbE55E40Aa29777A1B7E` deployed on 10143
Attempting to verify on Sourcify, pass the --etherscan-api-key <API_KEY> to verify on Etherscan OR use the --verifier flag to verify on any other provider

Submitting verification for [BuyEarth] "0xcA7EC1c665C252067e2CfbE55E40Aa29777A1B7E".
Contract successfully verified
```

### æŸ¥çœ‹åˆçº¦

<https://testnet.monadexplorer.com/address/0xcA7EC1c665C252067e2CfbE55E40Aa29777A1B7E>

![image-20250420132032628](/images/image-20250420132032628.png)

## å‰ç«¯å®æ“

### æŸ¥çœ‹å‰ç«¯é¡¹ç›®ç›®å½•ç»“æ„

```bash
qiaopengjun in buyearth on  î‚  main 
â¯ cd buy-earth-dapp 
qiaopengjun in buy-earth-dapp on  î‚  main 
â¯ tree -L 3 -I "node_modules|.DS_Store|out|buy-earth-dapp|lib|dapp-ui|broadcast|cache"  
.
â”œâ”€â”€ app
â”‚   â”œâ”€â”€ globals.css
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â””â”€â”€ page.tsx
â”œâ”€â”€ components
â”‚   â”œâ”€â”€ buy-square-form.tsx
â”‚   â”œâ”€â”€ connect-wallet.tsx
â”‚   â”œâ”€â”€ deposit-form.tsx
â”‚   â”œâ”€â”€ grid.tsx
â”‚   â”œâ”€â”€ network-status.tsx
â”‚   â”œâ”€â”€ owner-controls.tsx
â”‚   â”œâ”€â”€ theme-provider.tsx
â”‚   â”œâ”€â”€ transaction-history.tsx
â”‚   â””â”€â”€ ui
â”‚       â”œâ”€â”€ accordion.tsx
â”‚       â”œâ”€â”€ alert-dialog.tsx
â”‚       â”œâ”€â”€ alert.tsx
â”‚       â”œâ”€â”€ aspect-ratio.tsx
â”‚       â”œâ”€â”€ avatar.tsx
â”‚       â”œâ”€â”€ badge.tsx
â”‚       â”œâ”€â”€ breadcrumb.tsx
â”‚       â”œâ”€â”€ button.tsx
â”‚       â”œâ”€â”€ calendar.tsx
â”‚       â”œâ”€â”€ card.tsx
â”‚       â”œâ”€â”€ carousel.tsx
â”‚       â”œâ”€â”€ chart.tsx
â”‚       â”œâ”€â”€ checkbox.tsx
â”‚       â”œâ”€â”€ collapsible.tsx
â”‚       â”œâ”€â”€ command.tsx
â”‚       â”œâ”€â”€ context-menu.tsx
â”‚       â”œâ”€â”€ dialog.tsx
â”‚       â”œâ”€â”€ drawer.tsx
â”‚       â”œâ”€â”€ dropdown-menu.tsx
â”‚       â”œâ”€â”€ form.tsx
â”‚       â”œâ”€â”€ hover-card.tsx
â”‚       â”œâ”€â”€ input-otp.tsx
â”‚       â”œâ”€â”€ input.tsx
â”‚       â”œâ”€â”€ label.tsx
â”‚       â”œâ”€â”€ menubar.tsx
â”‚       â”œâ”€â”€ navigation-menu.tsx
â”‚       â”œâ”€â”€ pagination.tsx
â”‚       â”œâ”€â”€ popover.tsx
â”‚       â”œâ”€â”€ progress.tsx
â”‚       â”œâ”€â”€ radio-group.tsx
â”‚       â”œâ”€â”€ resizable.tsx
â”‚       â”œâ”€â”€ scroll-area.tsx
â”‚       â”œâ”€â”€ select.tsx
â”‚       â”œâ”€â”€ separator.tsx
â”‚       â”œâ”€â”€ sheet.tsx
â”‚       â”œâ”€â”€ sidebar.tsx
â”‚       â”œâ”€â”€ skeleton.tsx
â”‚       â”œâ”€â”€ slider.tsx
â”‚       â”œâ”€â”€ sonner.tsx
â”‚       â”œâ”€â”€ switch.tsx
â”‚       â”œâ”€â”€ table.tsx
â”‚       â”œâ”€â”€ tabs.tsx
â”‚       â”œâ”€â”€ textarea.tsx
â”‚       â”œâ”€â”€ toast.tsx
â”‚       â”œâ”€â”€ toaster.tsx
â”‚       â”œâ”€â”€ toggle-group.tsx
â”‚       â”œâ”€â”€ toggle.tsx
â”‚       â”œâ”€â”€ tooltip.tsx
â”‚       â”œâ”€â”€ use-mobile.tsx
â”‚       â””â”€â”€ use-toast.ts
â”œâ”€â”€ components.json
â”œâ”€â”€ hooks
â”‚   â”œâ”€â”€ use-mobile.tsx
â”‚   â””â”€â”€ use-toast.ts
â”œâ”€â”€ next-env.d.ts
â”œâ”€â”€ next.config.mjs
â”œâ”€â”€ package.json
â”œâ”€â”€ pnpm-lock.yaml
â”œâ”€â”€ postcss.config.mjs
â”œâ”€â”€ public
â”‚   â”œâ”€â”€ placeholder-logo.png
â”‚   â”œâ”€â”€ placeholder-logo.svg
â”‚   â”œâ”€â”€ placeholder-user.jpg
â”‚   â”œâ”€â”€ placeholder.jpg
â”‚   â””â”€â”€ placeholder.svg
â”œâ”€â”€ styles
â”‚   â””â”€â”€ globals.css
â”œâ”€â”€ tailwind.config.ts
â””â”€â”€ tsconfig.json

7 directories, 77 files
```

### **è„šæœ¬å‘½ä»¤**

| è„šæœ¬åç§° |     å‘½ä»¤     |             ä½œç”¨æè¿°             |     ä½¿ç”¨é˜¶æ®µ     |
| :------: | :----------: | :------------------------------: | :--------------: |
|  `dev`   |  `next dev`  | å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œæ”¯æŒçƒ­é‡è½½å’Œè°ƒè¯• |     å¼€å‘é˜¶æ®µ     |
| `build`  | `next build` |      æ„å»ºç”Ÿäº§ç¯å¢ƒçš„ä¼˜åŒ–ä»£ç       |   å‡†å¤‡éƒ¨ç½²é˜¶æ®µ   |
| `start`  | `next start` |     å¯åŠ¨ç”Ÿäº§ç¯å¢ƒçš„ä¼˜åŒ–æœåŠ¡å™¨     | ç”Ÿäº§ç¯å¢ƒè¿è¡Œé˜¶æ®µ |

### å¯åŠ¨é¡¹ç›®çš„å¼€å‘ç¯å¢ƒ

```bash
qiaopengjun in buy-earth-dapp on  î‚  main 
â¯ pnpm run dev                              

> my-v0-project@0.1.0 dev /Users/qiaopengjun/Code/Monad/buyearth/buy-earth-dapp
> next dev

   â–² Next.js 15.2.4
   - Local:        http://localhost:3000
   - Network:      http://192.168.101.228:3000

 âœ“ Starting...
Attention: Next.js now collects completely anonymous telemetry regarding usage.
This information is used to shape Next.js' roadmap and prioritize features.
You can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:
https://nextjs.org/telemetry

 âœ“ Ready in 5.1s

```

### åœ¨æµè§ˆå™¨æ‰“å¼€å¹¶è¿æ¥é’±åŒ…

![image-20250420133408674](/images/image-20250420133408674.png)

### æµ‹è¯• Buy Earth

![image-20250420133548236](/images/image-20250420133548236.png)

### è¿è¡Œæ„å»ºå‘½ä»¤

```bash
â¯ pnpm run build

> my-v0-project@0.1.0 build /Users/qiaopengjun/Code/Monad/buyearth/buy-earth-dapp
> next build

   â–² Next.js 15.2.4

   Creating an optimized production build ...
 âœ“ Compiled successfully
   Skipping validation of types
   Skipping linting
 âœ“ Collecting page data    
 âœ“ Generating static pages (4/4)
 âœ“ Collecting build traces    
 âœ“ Finalizing page optimization    

Route (app)                                 Size  First Load JS    
â”Œ â—‹ /                                     127 kB         228 kB
â”” â—‹ /_not-found                            976 B         102 kB
+ First Load JS shared by all             101 kB
  â”œ chunks/255-27ae27efee3e0715.js       45.9 kB
  â”œ chunks/e7327965-6c46f5927ee61af1.js  53.2 kB
  â”” other shared chunks (total)          1.89 kB


â—‹  (Static)  prerendered as static content

```

### å¯åŠ¨å·²æ„å»ºçš„ç”Ÿäº§ç¯å¢ƒåº”ç”¨ç¨‹åº

```bash
â¯ pnpm run start

> my-v0-project@0.1.0 start /Users/qiaopengjun/Code/Monad/buyearth/buy-earth-dapp
> next start

   â–² Next.js 15.2.4
   - Local:        http://localhost:3000
   - Network:      http://192.168.101.228:3000

 âœ“ Starting...
 âœ“ Ready in 267ms

```

### æ‰“å¼€æµè§ˆå™¨è¿›è¡Œæµ‹è¯•éªŒè¯

![image-20250420134332072](/images/image-20250420134332072.png)

## éƒ¨ç½² vercel å®æ“

### ç¬¬ä¸€æ­¥ï¼šæ³¨å†Œå¹¶ç™»å½•vercel

![image-20250420135110629](/images/image-20250420135110629.png)

### ç¬¬äºŒæ­¥ï¼šç‚¹å‡»æ·»åŠ æ–°é¡¹ç›®

![image-20250420135225292](/images/image-20250420135225292.png)

### ç¬¬ä¸‰æ­¥ï¼šç‚¹å‡»`install`åé€‰æ‹©GitHubè´¦æˆ·è¿›è¡Œå®‰è£…

![image-20250420135510358](/images/image-20250420135510358.png)

### ç¬¬å››æ­¥ï¼šå¯¼å…¥GitHubä»“åº“

![image-20250420135808869](/images/image-20250420135808869.png)

Import Git Repository

![image-20250420140014996](/images/image-20250420140014996.png)

### ç¬¬äº”æ­¥ï¼šDeploy éƒ¨ç½²

![image-20250420140208534](/images/image-20250420140208534.png)

éƒ¨ç½²å¤±è´¥ï¼ŒåŸå› ï¼šæœªé€‰æ‹©é¡¹ç›®æ ¹ç›®å½•ï¼Œè·¯å¾„é—®é¢˜ï¼

![image-20250420140410165](/images/image-20250420140410165.png)

æˆåŠŸéƒ¨ç½²

![image-20250420142108155](/images/image-20250420142108155.png)

### è®¿é—®éªŒè¯

<https://buyearth.vercel.app/>

![image-20250420142345885](/images/image-20250420142345885.png)

è¿æ¥é’±åŒ…

![image-20250420142418474](/images/image-20250420142418474.png)

## æ€»ç»“

Monadä»¥è¶…é€Ÿæ€§èƒ½ï¼ˆ10,000+ TPSï¼‰å’Œä»¥å¤ªåŠå…¼å®¹æ€§ï¼Œæ‰“ç ´åŒºå—é“¾â€œä¸å¯èƒ½ä¸‰è§’â€ï¼Œä¸ºWeb3 DAppçš„è§„æ¨¡åŒ–å¥ å®šåŸºç¡€ã€‚BuyEarth DAppé€šè¿‡è™šæ‹ŸåœŸåœ°äº¤æ˜“ä¸é¢œè‰²å®šåˆ¶ï¼Œå±•ç°äº†Monadåœ¨å»ä¸­å¿ƒåŒ–åº”ç”¨ä¸­çš„å¼ºå¤§æ½œåŠ›ã€‚å…¶æ™ºèƒ½åˆçº¦å®‰å…¨é«˜æ•ˆï¼Œæµ‹è¯•è¦†ç›–å…¨é¢ï¼Œå‰ç«¯äº¤äº’æµç•…ï¼Œå·²æˆåŠŸéƒ¨ç½²äºMonadæµ‹è¯•ç½‘ä¸Vercelå¹³å°ã€‚æœªæ¥ï¼ŒMonadå¯é€šè¿‡AIä¼˜åŒ–æ‰§è¡Œæ•ˆç‡ï¼ŒBuyEarthå¯æ‰©å±•åŠ¨æ€å®šä»·ä¸ç”¨æˆ·é€€æ¬¾åŠŸèƒ½ã€‚è¿™ä¸€ç»„åˆä¸ä»…é‡å¡‘äº†è™šæ‹Ÿä¸–ç•Œï¼Œä¹Ÿä¸ºWeb3å¼€å‘è€…æä¾›äº†é«˜æ•ˆã€å…¼å®¹çš„åˆ›æ–°èŒƒå¼ï¼Œå¼•é¢†åŒºå—é“¾åº”ç”¨çš„ä¸‹ä¸€ä¸ªæµªæ½®ã€‚

## å‚è€ƒ

- <https://github.com/qiaopengjun5162/buyearth>
- <https://www.monad.xyz/>
- <https://developers.monad.xyz/>
- <https://github.com/openbuildxyz/Monad-101-Bootcamp>
- <https://www.openzeppelin.com/solidity-contracts>
- <https://docs.openzeppelin.com/upgrades-plugins/foundry-upgrades>
- <https://formulae.brew.sh/formula/lcov>
- <https://monad-testnet.socialscan.io/address/0xca7ec1c665c252067e2cfbe55e40aa29777a1b7e>
- <https://testnet.monadexplorer.com/address/0xDa6aD5531f4ADa05a342B763DB8Ff66B5110771D?tab=Contract>
- <https://buyearth.vercel.app/>
- <https://testnet.monadexplorer.com/verify-contract?address=0xcA7EC1c665C252067e2CfbE55E40Aa29777A1B7E>
- <https://testnet.monad.xyz/>
- <https://guoyu.mirror.xyz/RD-xkpoxasAU7x5MIJmiCX4gll3Cs0pAd5iM258S1Ek>
- <https://v0.dev/>
