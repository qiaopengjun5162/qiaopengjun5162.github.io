+++
title = "Aptos Move å¼€å‘å…¥é—¨ï¼šä»ç¯å¢ƒæ­å»ºåˆ°åˆçº¦éƒ¨ç½²å…¨æµç¨‹å®å½•"
description = "Aptos Move å¼€å‘å…¥é—¨ï¼šä»ç¯å¢ƒæ­å»ºåˆ°åˆçº¦éƒ¨ç½²å…¨æµç¨‹å®å½•"
date = 2025-08-20T03:22:16Z
[taxonomies]
categories = ["Web3", "Aptos", "Move"]
tags = ["Web3", "Aptos", "Move"]
+++

<!-- more -->

# Aptos Move å¼€å‘å…¥é—¨ï¼šä»ç¯å¢ƒæ­å»ºåˆ°åˆçº¦éƒ¨ç½²å…¨æµç¨‹å®å½•

éšç€ Aptos ç”Ÿæ€çš„è“¬å‹ƒå‘å±•ï¼ŒMove è¯­è¨€ä½œä¸ºå…¶æ ¸å¿ƒæŠ€æœ¯æ ˆï¼Œä»¥å…¶å‡ºè‰²çš„å®‰å…¨æ€§å’Œè¡¨ç°åŠ›å¸å¼•äº†è¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…ã€‚ç„¶è€Œï¼Œå¯¹äºåˆå­¦è€…è€Œè¨€ï¼Œä»é›¶å¼€å§‹æ­å»ºç¯å¢ƒã€ç¼–å†™å¹¶æˆåŠŸéƒ¨ç½²ç¬¬ä¸€ä¸ªæ™ºèƒ½åˆçº¦ï¼Œå¾€å¾€ä¼šé‡åˆ°æ•™ç¨‹ä¸­æœªæ›¾æåŠçš„ç»†èŠ‚é—®é¢˜ã€‚

æœ¬æ–‡å¹¶éä¸€ç¯‡ç†è®ºæ–‡ç« ï¼Œè€Œæ˜¯ä¸€ä»½çœŸå®ã€å®Œæ•´ã€æœªç»å‰ªè¾‘çš„â€œç¬¬ä¸€äººç§°â€å®æ“è®°å½•ã€‚æˆ‘ä»¬å°†è·Ÿéšä¸€ä¸ªå¼€å‘è€…çš„è„šæ­¥ï¼Œä»å®‰è£… Aptos CLI å¼€å§‹ï¼Œä¸€æ­¥æ­¥åˆ›å»ºé¡¹ç›®ã€ç¼–å†™ä»£ç ã€ç¼–è¯‘æµ‹è¯•ï¼Œç›´åˆ°æœ€ç»ˆå°†åˆçº¦éƒ¨ç½²åˆ°æµ‹è¯•ç½‘ä¸Šã€‚æ›´é‡è¦çš„æ˜¯ï¼Œæœ¬æ–‡å®Œæ•´è®°å½•äº†éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°çš„ç»å…¸é”™è¯¯â€”â€”â€œä½™é¢ä¸è¶³â€ï¼Œå¹¶è¯¦ç»†å±•ç¤ºäº†å¦‚ä½•è¯Šæ–­é—®é¢˜ã€å¯»æ‰¾è§£å†³æ–¹æ¡ˆï¼ˆä½¿ç”¨æ°´é¾™å¤´ï¼‰ï¼Œæœ€ç»ˆæ‰«æ¸…éšœç¢ã€‚

å¦‚æœä½ æ­£å‡†å¤‡è¸ä¸Š Aptos Move çš„å­¦ä¹ ä¹‹æ—…ï¼Œé‚£ä¹ˆè¿™ç¯‡å……æ»¡â€œå®æˆ˜æ„Ÿâ€çš„ç¬”è®°ï¼Œå¸Œæœ›èƒ½æˆä¸ºä½ æ‰‹ä¸­æœ€å®ç”¨çš„åœ°å›¾ã€‚

æœ¬æ–‡æ˜¯ä¸€ä»½è¯¦å°½çš„ Aptos Move å¼€å‘å…¥é—¨å®æ“æŒ‡å—ã€‚å†…å®¹è¦†ç›–äº†ä»å®‰è£… Aptos CLIã€åˆå§‹åŒ–é¡¹ç›®ï¼Œåˆ°ç¼–å†™ã€ç¼–è¯‘ã€æµ‹è¯•åŠæˆåŠŸéƒ¨ç½²ç¬¬ä¸€ä¸ªæ™ºèƒ½åˆçº¦çš„å…¨è¿‡ç¨‹ã€‚æ–‡ç« é‡ç‚¹å±•ç¤ºäº†å¦‚ä½•è¯Šæ–­å¹¶è§£å†³å›  Gas è´¹ä¸è¶³å¯¼è‡´çš„éƒ¨ç½²å¤±è´¥é—®é¢˜ï¼Œä¸ºåˆå­¦è€…æ‰«æ¸…äº†ä»é›¶åˆ°ä¸€çš„å…³é”®éšœç¢ã€‚

## ç¯å¢ƒå®‰è£…å®æ“

### å®‰è£… Aptos CLI

```bash
brew update
brew install aptos
```

### éªŒè¯å®‰è£…

```bash
aptos --version
aptos 7.7.0
```

### å‡çº§ CLI

```bash
brew update
brew upgrade aptos
```

### å®‰è£…æ’ä»¶`Move on Aptos`

<https://marketplace.visualstudio.com/items?itemName=AptosLabs.move-on-aptos>

![image-20250820094202013](/images/image-20250820094202013.png)

## ç¼–å†™ç¬¬ä¸€ä¸ª Aptos Move ç¨‹åº

### åˆ›å»ºé¡¹ç›®å¹¶è¿›å…¥é¡¹ç›®ç›®å½•

```bash
mcd 01-hello_blockchain # mkdir 01-hello_blockchain && cd 01-hello_blockchain
/Users/qiaopengjun/Code/Aptos/01-hello_blockchain
```

### åˆå§‹åŒ–é¡¹ç›®

åˆå§‹åŒ–Aptosé…ç½®ï¼Œç”Ÿæˆè´¦æˆ·å¯†é’¥

`aptos init`: aptos Tool to initialize current directory for the aptos tool

```bash
Code/Aptos/01-hello_blockchain
âœ aptos init
Configuring for profile default
Choose network from [devnet, testnet, mainnet, local, custom | defaults to devnet]
testnet
Enter your private key as a hex literal (0x...) [Current: None | No input: Generate new key (or keep one if present)]

No key given, generating key...

---
Aptos CLI is now set up for account 0x1ff96e1010f6118a00bea0deb0139cdde087809e944638e12cbf70ce25a948fd as profile default!
---

The account has not been funded on chain yet. To fund the account and get APT on testnet you must visit https://aptos.dev/network/faucet?address=0x1ff96e1010f6118a00bea0deb0139cdde087809e944638e12cbf70ce25a948fd
Press [Enter] to go there now >
{
  "Result": "Success"
}
```

### åˆ›å»ºä¸€ä¸ªæ–°çš„ Move package

  `aptos move init`: Creates a new Move package at the given location

æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯

```bash
aptos move init -h
Creates a new Move package at the given location

Usage: aptos move init [OPTIONS] --name <NAME>

Options:
      --name <NAME>                                Name of the new Move package
      --package-dir <PACKAGE_DIR>                  Directory to create the new Move package
      --named-addresses <NAMED_ADDRESSES>          Named addresses for the move binary [default: ]
      --template <TEMPLATE>                        Template name for initialization [possible values: hello-blockchain]
      --assume-yes                                 Assume yes for all yes/no prompts
      --assume-no                                  Assume no for all yes/no prompts
      --framework-git-rev <FRAMEWORK_GIT_REV>      Git revision or branch for the Aptos framework
      --framework-local-dir <FRAMEWORK_LOCAL_DIR>  Local framework directory for the Aptos framework
      --skip-fetch-latest-git-deps                 Skip pulling the latest git dependencies
  -h, --help                                       Print help (see more with '--help')
  -V, --version                                    Print version
```

å®æ“

```bash
Code/Aptos/01-hello_blockchain took 3m 8.1s
âœ aptos move init --name hello-blockchain --template hello-blockchain
{
  "Result": "Success"
}

```

### æŸ¥çœ‹é¡¹ç›®ç›®å½•ç»“æ„

```bash
Code/Aptos/01-hello_blockchain
âœ tree . -L 6 -I "docs|target"
.
â”œâ”€â”€ Move.toml
â”œâ”€â”€ scripts
â”œâ”€â”€ sources
â”‚   â””â”€â”€ hello_blockchain.move
â””â”€â”€ tests

4 directories, 2 files
```

### `hello_blockchain.move` æ–‡ä»¶

```rust
module hello_blockchain::message {
    use std::error;
    use std::signer;
    use std::string;
    use aptos_framework::event;
    #[test_only]
    use std::debug;

    //:!:>resource
    struct MessageHolder has key {
        message: string::String,
    }
    //<:!:resource

    #[event]
    struct MessageChange has drop, store {
        account: address,
        from_message: string::String,
        to_message: string::String,
    }

    /// There is no message present
    const ENO_MESSAGE: u64 = 0;

    #[view]
    public fun get_message(addr: address): string::String acquires MessageHolder {
        assert!(exists<MessageHolder>(addr), error::not_found(ENO_MESSAGE));
        borrow_global<MessageHolder>(addr).message
    }

    public entry fun set_message(account: signer, message: string::String)
    acquires MessageHolder {
        let account_addr = signer::address_of(&account);
        if (!exists<MessageHolder>(account_addr)) {
            move_to(&account, MessageHolder {
                message,
            })
        } else {
            let old_message_holder = borrow_global_mut<MessageHolder>(account_addr);
            let from_message = old_message_holder.message;
            event::emit(MessageChange {
                account: account_addr,
                from_message,
                to_message: copy message,
            });
            old_message_holder.message = message;
        }
    }

    #[test(account = @0x1)]
    public entry fun sender_can_set_message(account: signer) acquires MessageHolder {
        let msg: string::String = string::utf8(b"Running test for sender_can_set_message...");
        debug::print(&msg);

        let addr = signer::address_of(&account);
        aptos_framework::account::create_account_for_test(addr);
        set_message(account, string::utf8(b"Hello, Blockchain"));

        assert!(
            get_message(addr) == string::utf8(b"Hello, Blockchain"),
            ENO_MESSAGE
        );
    }
}

```

è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ Aptos Move æ™ºèƒ½åˆçº¦ï¼Œå®ƒå…è®¸ä»»ä½•ç”¨æˆ·åœ¨åŒºå—é“¾ä¸Šä¸ºè‡ªå·±çš„è´¦æˆ·**å­˜å‚¨ä¸€æ¡ä¸ªäººä¸“å±çš„å­—ç¬¦ä¸²æ¶ˆæ¯**ã€‚åˆçº¦æä¾›äº†ä¸¤ä¸ªä¸»è¦åŠŸèƒ½ï¼šä¸€ä¸ªéœ€è¦æœ¬äººç­¾åæ‰èƒ½**è®¾ç½®æˆ–æ›´æ–°**è¿™æ¡æ¶ˆæ¯çš„å…¥å£å‡½æ•°ï¼Œä»¥åŠä¸€ä¸ªä»»ä½•äººéƒ½å¯ä»¥è°ƒç”¨çš„**åªè¯»**å‡½æ•°æ¥æŸ¥çœ‹ä»»æ„åœ°å€å­˜å‚¨çš„æ¶ˆæ¯ã€‚æ¯æ¬¡æ¶ˆæ¯è¢«æ›´æ–°æ—¶ï¼Œåˆçº¦è¿˜ä¼šå¹¿æ’­ä¸€ä¸ªâ€œäº‹ä»¶â€ï¼Œæ–¹ä¾¿é“¾ä¸‹åº”ç”¨è¿½è¸ªè¿™äº›å˜åŒ–ã€‚

### **ä»£ç è¯¦ç»†åˆ†è§£**

è¿™ä¸ªåˆçº¦å°±åƒä¸€ä¸ªä¸ºæ¯ä¸ª Aptos ç”¨æˆ·å‡†å¤‡çš„â€œæ•°å­—è®°äº‹æœ¬â€ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å®ç°çš„ã€‚

#### 1. æ ¸å¿ƒæ•°æ®ç»“æ„ (Structs)

åˆçº¦å®šä¹‰äº†ä¸¤ç§æ•°æ®ç»“æ„ï¼š

- **`MessageHolder` (æ¶ˆæ¯æŒæœ‰è€…)**

  ```rust
  struct MessageHolder has key {
      message: string::String,
  }
  ```

  - è¿™æ˜¯çœŸæ­£ç”¨æ¥**å­˜å‚¨æ•°æ®**çš„ç»“æ„ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªâ€œå‚¨ç‰©ç›’â€ã€‚
  - `has key` æ˜¯æœ€é‡è¦çš„èƒ½åŠ› (ability)ï¼Œå®ƒæ„å‘³ç€**æ¯ä¸ªè´¦æˆ·åœ°å€ä¸‹æœ€å¤šåªèƒ½å­˜æ”¾ä¸€ä¸ª** `MessageHolder` å®ä¾‹ã€‚è¿™ç¡®ä¿äº†æ¯ä¸ªç”¨æˆ·åªæœ‰ä¸€ä¸ªä¸“å±çš„è®°äº‹æœ¬ã€‚
  - å®ƒå†…éƒ¨åªæœ‰ä¸€ä¸ªå­—æ®µ `message`ï¼Œç”¨æ¥å­˜æ”¾å­—ç¬¦ä¸²ã€‚

- **`MessageChange` (æ¶ˆæ¯å˜æ›´äº‹ä»¶)**

  ```rust
  #[event]
  struct MessageChange has drop, store {
      account: address,
      from_message: string::String,
      to_message: string::String,
  }
  ```

  - è¿™æ˜¯ä¸€ä¸ª**äº‹ä»¶ (Event)** ç»“æ„ï¼Œç”± `#[event]` æ³¨è§£æ ‡è®°ã€‚
  - å®ƒä¸åƒ `MessageHolder` é‚£æ ·æ°¸ä¹…å­˜å‚¨çŠ¶æ€ï¼Œè€Œæ˜¯åƒä¸€ä¸ªâ€œ**å¹¿æ’­é€šçŸ¥**â€ã€‚å½“ä¸€ä¸ªç”¨æˆ·çš„æ¶ˆæ¯è¢«ä¿®æ”¹æ—¶ï¼Œåˆçº¦å°±ä¼šå‘å‡ºè¿™æ ·ä¸€ä¸ªäº‹ä»¶ã€‚
  - é“¾ä¸‹çš„åº”ç”¨ç¨‹åºæˆ–ç´¢å¼•å™¨å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œä»è€ŒçŸ¥é“â€œå“ªä¸ªè´¦æˆ· (`account`) æŠŠæ¶ˆæ¯ä» `from_message` æ”¹æˆäº† `to_message`â€ã€‚

#### 2. ä¸»è¦åŠŸèƒ½å‡½æ•° (Functions)

- **`set_message` (è®¾ç½®æ¶ˆæ¯)**

  ```rust
  public entry fun set_message(account: signer, message: string::String)
  ```

  - è¿™æ˜¯ä¸€ä¸ª**å…¥å£å‡½æ•° (`entry fun`)**ï¼Œæ„å‘³ç€ç”¨æˆ·å¯ä»¥ç›´æ¥é€šè¿‡æäº¤ä¸€ç¬”äº¤æ˜“æ¥è°ƒç”¨å®ƒã€‚
  - å‚æ•° `account: signer` éå¸¸å…³é”®ã€‚`signer` ä»£è¡¨ç€äº¤æ˜“çš„**ç­¾åè€…**ï¼Œå®ƒæ˜¯ä¸€ç§å¯†ç å­¦è¯æ˜ï¼Œç¡®ä¿äº†åªæœ‰è´¦æˆ·çš„æ‹¥æœ‰è€…ï¼ˆç§é’¥æŒæœ‰è€…ï¼‰æ‰èƒ½è°ƒç”¨è¿™ä¸ªå‡½æ•°æ¥ä¿®æ”¹**è‡ªå·±çš„**æ¶ˆæ¯ã€‚
  - **å‡½æ•°é€»è¾‘**ï¼š
    1. æ£€æŸ¥è¯¥ç”¨æˆ·è´¦æˆ·ä¸‹æ˜¯å¦å·²ç»å­˜åœ¨ `MessageHolder`ã€‚
    2. **å¦‚æœä¸å­˜åœ¨**ï¼ˆç¬¬ä¸€æ¬¡è®¾ç½®æ¶ˆæ¯ï¼‰ï¼šå°±ç”¨ `move_to` å‡½æ•°ä¸ºè¯¥ç”¨æˆ·åˆ›å»ºä¸€ä¸ªæ–°çš„ `MessageHolder` èµ„æºã€‚
    3. **å¦‚æœå·²å­˜åœ¨**ï¼šå°±ç”¨ `borrow_global_mut` â€œå€Ÿç”¨â€å·²æœ‰çš„ `MessageHolder` è¿›è¡Œä¿®æ”¹ï¼Œå…ˆå‘å‡ºä¸€ä¸ª `MessageChange` äº‹ä»¶é€šçŸ¥å¤–ç•Œï¼Œç„¶åç”¨æ–°æ¶ˆæ¯è¦†ç›–æ—§æ¶ˆæ¯ã€‚

- **`get_message` (è·å–æ¶ˆæ¯)**

  ```rust
  #[view]
  public fun get_message(addr: address): string::String
  ```

  - è¿™æ˜¯ä¸€ä¸ª**è§†å›¾å‡½æ•° (`#[view]`)**ã€‚è§†å›¾å‡½æ•°æ˜¯**åªè¯»**çš„ï¼Œè°ƒç”¨å®ƒä¸éœ€è¦æäº¤äº¤æ˜“ï¼Œä¹Ÿä¸æ¶ˆè€— Gas è´¹ï¼ˆé€šè¿‡ RPC èŠ‚ç‚¹æŸ¥è¯¢æ—¶ï¼‰ã€‚
  - å®ƒæ¥å—ä»»ä½•ä¸€ä¸ª `address` ä½œä¸ºå‚æ•°ï¼Œæ„å‘³ç€**ä»»ä½•äººéƒ½å¯ä»¥æŸ¥è¯¢ä»»ä½•åœ°å€**å­˜å‚¨çš„æ¶ˆæ¯ï¼Œå®ç°äº†æ•°æ®çš„å…¬å¼€é€æ˜ã€‚
  - **å‡½æ•°é€»è¾‘**ï¼š
    1. ç”¨ `assert!(exists<...>)` æ£€æŸ¥è¿™ä¸ªåœ°å€ä¸‹æ˜¯å¦å­˜åœ¨ `MessageHolder`ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œå‡½æ•°ä¼šæŠ¥é”™ã€‚
    2. å¦‚æœå­˜åœ¨ï¼Œå°±ç”¨ `borrow_global` â€œå€Ÿç”¨â€è¿™ä¸ª `MessageHolder` å¹¶è¿”å›å…¶ä¸­çš„ `message` å­—æ®µã€‚

#### 3. æµ‹è¯•å‡½æ•° (Test Function)

- **`sender_can_set_message`**

  ```rust
  #[test(account = @0x1)]
  public entry fun sender_can_set_message(account: signer)
  ```

  - è¿™æ˜¯ä¸€ä¸ª**å•å…ƒæµ‹è¯•å‡½æ•°**ï¼Œç”± `#[test]` æ³¨è§£æ ‡è®°ã€‚
  - å®ƒçš„ä»£ç **ä¸ä¼šè¢«éƒ¨ç½²åˆ°åŒºå—é“¾ä¸Š**ï¼Œåªåœ¨å¼€å‘é˜¶æ®µè¿è¡Œ `aptos move test` å‘½ä»¤æ—¶æ‰§è¡Œï¼Œç”¨æ¥éªŒè¯åˆçº¦é€»è¾‘çš„æ­£ç¡®æ€§ã€‚
  - **æµ‹è¯•é€»è¾‘**ï¼šæ¨¡æ‹Ÿä¸€ä¸ªè´¦æˆ· (`@0x1`) è°ƒç”¨ `set_message` è®¾ç½®ä¸€æ¡æ¶ˆæ¯ï¼Œç„¶åè°ƒç”¨ `get_message` è¯»å–å®ƒï¼Œæœ€åç”¨ `assert!` ç¡®è®¤è¯»å‡ºæ¥çš„æ¶ˆæ¯å’Œè®¾ç½®çš„å®Œå…¨ä¸€æ ·ã€‚

### `Move.toml` æ–‡ä»¶

```rust
[package]
name = "HelloBlockchainExample"
version = "1.0.0"
authors = []

[addresses]
hello_blockchain = "_"

[dev-addresses]

[dependencies.AptosFramework]
git = "https://github.com/aptos-labs/aptos-framework.git"
rev = "mainnet"
subdir = "aptos-framework"

[dev-dependencies]

```

é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `Move.toml` æ–‡ä»¶æ˜¯åŒ…çš„é…ç½®æ–‡ä»¶ï¼Œå®ƒå®šä¹‰äº†é¡¹ç›®åç§°ã€ä¾èµ–é¡¹å’Œåœ°å€åˆ«åç­‰å…ƒæ•°æ®ã€‚

### ç¼–è¯‘é¡¹ç›®

```bash
Code/Aptos/01-hello_blockchain
âœ aptos move build --named-addresses hello_blockchain=default
Compiling, may take a little while to download git dependencies...
UPDATING GIT DEPENDENCY https://github.com/aptos-labs/aptos-framework.git
INCLUDING DEPENDENCY AptosFramework
INCLUDING DEPENDENCY AptosStdlib
INCLUDING DEPENDENCY MoveStdlib
BUILDING HelloBlockchainExample
{
  "Result": [
    "1ff96e1010f6118a00bea0deb0139cdde087809e944638e12cbf70ce25a948fd::message"
  ]
}

Code/Aptos/01-hello_blockchain took 10.3s
âœ aptos move compile --named-addresses hello_blockchain=default --skip-fetch-latest-git-deps
Compiling, may take a little while to download git dependencies...
INCLUDING DEPENDENCY AptosFramework
INCLUDING DEPENDENCY AptosStdlib
INCLUDING DEPENDENCY MoveStdlib
BUILDING HelloBlockchainExample
{
  "Result": [
    "1ff96e1010f6118a00bea0deb0139cdde087809e944638e12cbf70ce25a948fd::message"
  ]
}
```

### è¿è¡Œæµ‹è¯•

```bash
Code/Aptos/01-hello_blockchain took 6.2s
âœ aptos move test --named-addresses hello_blockchain=default
INCLUDING DEPENDENCY AptosFramework
INCLUDING DEPENDENCY AptosStdlib
INCLUDING DEPENDENCY MoveStdlib
BUILDING HelloBlockchainExample
Running Move unit tests
[debug] "Running test for sender_can_set_message..."
[ PASS    ] 0x1ff96e1010f6118a00bea0deb0139cdde087809e944638e12cbf70ce25a948fd::message::sender_can_set_message
Test result: OK. Total tests: 1; passed: 1; failed: 0
{
  "Result": "Success"
}

Code/Aptos/01-hello_blockchain took 13.4s
âœ aptos move test --named-addresses hello_blockchain=default --skip-fetch-latest-git-deps
INCLUDING DEPENDENCY AptosFramework
INCLUDING DEPENDENCY AptosStdlib
INCLUDING DEPENDENCY MoveStdlib
BUILDING HelloBlockchainExample
Running Move unit tests
[debug] "Running test for sender_can_set_message..."
[ PASS    ] 0x1ff96e1010f6118a00bea0deb0139cdde087809e944638e12cbf70ce25a948fd::message::sender_can_set_message
Test result: OK. Total tests: 1; passed: 1; failed: 0
{
  "Result": "Success"
}
```

### éƒ¨ç½²åˆçº¦

#### éƒ¨ç½²å¤±è´¥ä½™é¢ä¸è¶³ âŒ

```bash
Code/Aptos/01-hello_blockchain took 12.6s
âœ aptos move deploy-object --address-name hello_blockchain
Compiling, may take a little while to download git dependencies...
UPDATING GIT DEPENDENCY https://github.com/aptos-labs/aptos-framework.git
INCLUDING DEPENDENCY AptosFramework
INCLUDING DEPENDENCY AptosStdlib
INCLUDING DEPENDENCY MoveStdlib
BUILDING HelloBlockchainExample
Do you want to deploy this package at object address 0x379e5f2fc6fef74c558ae4f27f8064866591f039fac09af6ee6ca2f9fe917bb6 [yes/no] >
yes
package size 1791 bytes
{
  "Error": "Simulation failed with status: MAX_GAS_UNITS_BELOW_MIN_TRANSACTION_GAS_UNITS"
}

```

#### æŸ¥è¯¢å¹¶æ˜¾ç¤ºä½ å½“å‰ `aptos` å‘½ä»¤è¡Œå·¥å…·é…ç½®çš„é»˜è®¤è´¦æˆ·åœ°å€

```bash
aptos account lookup-address
{
  "Result": "1ff96e1010f6118a00bea0deb0139cdde087809e944638e12cbf70ce25a948fd"
}
```

### æŸ¥è¯¢ä½™é¢å‘ç°ä¸º0ï¸âƒ£

#### æŸ¥è¯¢**å½“å‰é»˜è®¤é…ç½® (default profile) ä¸­æŒ‡å®šçš„è´¦æˆ·**çš„ä½™é¢

```bash
aptos account balance
{
  "Result": [
    {
      "asset_type": "coin",
      "coin_type": "0x1::aptos_coin::AptosCoin",
      "balance": 0
    }
  ]
}
```

#### **æ˜ç¡®åœ°ã€ç›´æ¥åœ°**æŸ¥è¯¢åœ°å€ä¸º `1ff96e...fd` çš„è¿™ä¸ªè´¦æˆ·çš„ä½™é¢

```bash
aptos account balance --account 1ff96e1010f6118a00bea0deb0139cdde087809e944638e12cbf70ce25a948fd
{
  "Result": [
    {
      "asset_type": "coin",
      "coin_type": "0x1::aptos_coin::AptosCoin",
      "balance": 0
    }
  ]
}
```

#### ç¬¬ä¸€æ¡å‘½ä»¤: `aptos account balance`

- **æ„æ€**: æŸ¥è¯¢**å½“å‰é»˜è®¤é…ç½® (default profile) ä¸­æŒ‡å®šçš„è´¦æˆ·**çš„ä½™é¢ã€‚
- **å·¥ä½œæ–¹å¼**: å½“ä½ è¿è¡Œè¿™ä¸ªå‘½ä»¤æ—¶ï¼ŒAptos CLI ä¼šè‡ªåŠ¨æŸ¥æ‰¾ `.aptos/config.yaml` æ–‡ä»¶ï¼Œæ‰¾åˆ° `default` é…ç½®ï¼Œç„¶åä½¿ç”¨å…¶ä¸­è®°å½•çš„è´¦æˆ·åœ°å€ï¼ˆä¹Ÿå°±æ˜¯ `1ff96e...`ï¼‰å»é“¾ä¸ŠæŸ¥è¯¢ä½™é¢ã€‚
- **ä¼˜ç‚¹**: **ç®€æ´æ–¹ä¾¿**ã€‚åªè¦ä½ è®¾ç½®å¥½äº†é»˜è®¤è´¦æˆ·ï¼ŒæŸ¥è¯¢æ—¶å°±ä¸éœ€è¦æ¯æ¬¡éƒ½è¾“å…¥é•¿é•¿çš„åœ°å€ã€‚

#### ç¬¬äºŒæ¡å‘½ä»¤: `aptos account balance --account 1ff96e...fd`

- **æ„æ€**: **æ˜ç¡®åœ°ã€ç›´æ¥åœ°**æŸ¥è¯¢åœ°å€ä¸º `1ff96e...fd` çš„è¿™ä¸ªè´¦æˆ·çš„ä½™é¢ã€‚
- **å·¥ä½œæ–¹å¼**: è¿™ä¸ªå‘½ä»¤ç›´æ¥å‘Šè¯‰ CLI è¦æŸ¥è¯¢å“ªä¸ªåœ°å€ï¼ŒCLI ä¸ä¼šå†å»æŸ¥æ‰¾é…ç½®æ–‡ä»¶æ¥ç¡®å®šç›®æ ‡è´¦æˆ·ã€‚å®ƒä¼šå¿½ç•¥ `default` é…ç½®ä¸­çš„åœ°å€ï¼Œç›´æ¥ä½¿ç”¨ä½ é€šè¿‡ `--account` å‚æ•°æä¾›çš„åœ°å€ã€‚
- **ä¼˜ç‚¹**: **ç²¾ç¡®ã€æ— æ­§ä¹‰**ã€‚å½“ä½ éœ€è¦æŸ¥è¯¢ä¸€ä¸ª**éé»˜è®¤**è´¦æˆ·ï¼Œæˆ–è€…æƒ³åœ¨è„šæœ¬ä¸­ç¡®ä¿æŸ¥è¯¢çš„æ˜¯æŸä¸ªç‰¹å®šåœ°å€æ—¶ï¼Œè¿™ç§æ–¹å¼æ›´å¯é ã€‚

#### åŒºåˆ«æ€»ç»“

| å‘½ä»¤         | `aptos account balance`  | `aptos account balance --account <åœ°å€>` |
| ------------ | ------------------------ | ---------------------------------------- |
| **æŸ¥è¯¢ç›®æ ‡** | **é»˜è®¤**é…ç½®æ–‡ä»¶ä¸­çš„è´¦æˆ· | **æ˜ç¡®æŒ‡å®š**çš„è´¦æˆ·åœ°å€                   |
| **ä¾¿åˆ©æ€§**   | æ›´é«˜ï¼Œæ— éœ€è¾“å…¥åœ°å€       | è¾ƒä½ï¼Œéœ€è¦è¾“å…¥å®Œæ•´åœ°å€                   |
| **ç²¾ç¡®æ€§**   | ä¾èµ–äºé…ç½®æ–‡ä»¶           | æ›´é«˜ï¼Œä¸ä¾èµ–é…ç½®æ–‡ä»¶                     |
| **ä½¿ç”¨åœºæ™¯** | å¿«é€ŸæŸ¥è¯¢è‡ªå·±çš„é»˜è®¤é’±åŒ…   | æŸ¥è¯¢ä»»ä½•äººçš„é’±åŒ…ã€åœ¨è„šæœ¬ä¸­ä½¿ç”¨           |

### è§£å†³æ–¹æ¡ˆï¼šé¢†æ°´ğŸ’¡

<https://aptos.dev/zh/network/faucet>

<https://explorer.aptoslabs.com/txn/0x2ba942fe68195678fec63dc96c4f8a773353f4fc23a97ba363c1489ddacd4130?network=testnet>

é¢†æ°´æˆåŠŸæŸ¥çœ‹ä½™é¢

```bash
aptos account balance
{
  "Result": [
    {
      "asset_type": "coin",
      "coin_type": "0x1::aptos_coin::AptosCoin",
      "balance": 100000000
    }
  ]
}
```

### å†æ¬¡éƒ¨ç½²åˆçº¦ âœ…

```bash
Code/Aptos/01-hello_blockchain
âœ aptos move deploy-object --address-name hello_blockchain
Compiling, may take a little while to download git dependencies...
UPDATING GIT DEPENDENCY https://github.com/aptos-labs/aptos-framework.git
INCLUDING DEPENDENCY AptosFramework
INCLUDING DEPENDENCY AptosStdlib
INCLUDING DEPENDENCY MoveStdlib
BUILDING HelloBlockchainExample
Do you want to deploy this package at object address 0x379e5f2fc6fef74c558ae4f27f8064866591f039fac09af6ee6ca2f9fe917bb6 [yes/no] >
yes
package size 1791 bytes
Do you want to submit a transaction for a range of [265700 - 398500] Octas at a gas unit price of 100 Octas? [yes/no] >
yes
Transaction submitted: https://explorer.aptoslabs.com/txn/0x4ee645dad8cf4f042bbf44ca0d3f0ca0222503ecf367ec3ba6d442d208207e9e?network=testnet
Code was successfully deployed to object address 0x379e5f2fc6fef74c558ae4f27f8064866591f039fac09af6ee6ca2f9fe917bb6
{
  "Result": "Success"
}

```

å¤ªæ£’äº†ï¼Œæ­å–œä½ ï¼ğŸ¥³ è¿™æ¬¡éƒ¨ç½²æˆåŠŸäº†ã€‚

è¿™ä¸ªè¾“å‡ºæ—¥å¿—æ¸…æ™°åœ°å±•ç¤ºäº†éƒ¨ç½²æ™ºèƒ½åˆçº¦çš„å®Œæ•´æµç¨‹ã€‚æˆ‘ä»¬æ¥åˆ†è§£ä¸€ä¸‹å…³é”®ä¿¡æ¯ï¼Œè¿™æ ·ä½ å°±èƒ½å®Œå…¨ç†è§£æ¯ä¸€æ­¥çš„å«ä¹‰äº†ã€‚

### éƒ¨ç½²æ—¥å¿—è§£è¯»

1. **`Do you want to deploy this package at object address 0x379e...`**
   - **å«ä¹‰**: è¿™æ˜¯åœ¨æœ€ç»ˆç¡®è®¤ä½ è¦å°†ä»£ç éƒ¨ç½²åˆ°å“ªä¸ª**å¯¹è±¡åœ°å€**ã€‚è¿™ä¸ªåœ°å€æ˜¯ CLI æ ¹æ®ä½ çš„è´¦æˆ·ä¸ºä½ è®¡ç®—å‡ºæ¥çš„ï¼Œç°åœ¨å®ƒå°†æˆä¸ºä½ é“¾ä¸Šä»£ç çš„â€œå®¶â€ã€‚
2. **`Do you want to submit a transaction for a range of [265700 - 398500] Octas at a gas unit price of 100 Octas?`**
   - **å«ä¹‰**: è¿™æ˜¯**äº¤æ˜“è´¹ç”¨ï¼ˆGas Feeï¼‰çš„é¢„ä¼°å’Œç¡®è®¤**ã€‚
   - **`Octas`**: è¿™æ˜¯ APT ä»£å¸çš„æœ€å°å•ä½ï¼Œç±»ä¼¼äºäººæ°‘å¸çš„â€œåˆ†â€ã€‚1 APT = 100,000,000 Octasã€‚
   - **`[265700 - 398500] Octas`**: CLI ä¼°ç®—å‡ºï¼Œå®Œæˆè¿™æ¬¡éƒ¨ç½²äº¤æ˜“ï¼Œå¤§çº¦éœ€è¦èŠ±è´¹ 26.5ä¸‡ åˆ° 39.8ä¸‡ Octasã€‚å› ä¸ºä½ ä¹‹å‰å·²ç»é€šè¿‡æ°´é¾™å¤´é¢†äº†é’±ï¼Œæ‰€ä»¥ç°åœ¨æœ‰è¶³å¤Ÿçš„ä½™é¢æ¥æ”¯ä»˜è¿™ç¬”è´¹ç”¨ã€‚
3. **`Transaction submitted: https://explorer.aptoslabs.com/txn/0x4ee6...`**
   - **å«ä¹‰**: è¿™æ˜¯æœ€é‡è¦çš„éƒ¨åˆ†ä¹‹ä¸€ã€‚ä½ çš„éƒ¨ç½²è¯·æ±‚å·²ç»è¢«æäº¤åˆ° Aptos testnetï¼ˆæµ‹è¯•ç½‘ï¼‰ï¼Œå¹¶ä¸”ç½‘ç»œå·²ç»ç¡®è®¤äº†è¿™ç¬”äº¤æ˜“ã€‚
   - **`0x4ee6...`**: è¿™æ˜¯ä½ çš„**äº¤æ˜“å“ˆå¸Œ (Transaction Hash)**ï¼Œæ˜¯è¿™æ¬¡æ“ä½œåœ¨åŒºå—é“¾ä¸Šçš„å”¯ä¸€å‡­è¯ï¼Œå°±åƒä¸€å¼ æ”¶æ®çš„ç¼–å·ã€‚
   - **`https://explorer...`**: è¿™æ˜¯ä¸€ä¸ªåŒºå—é“¾æµè§ˆå™¨çš„é“¾æ¥ã€‚ä½ å¯ä»¥ç‚¹å‡»è¿™ä¸ªé“¾æ¥ï¼Œåœ¨ç½‘é¡µä¸Šçœ‹åˆ°è¿™æ¬¡éƒ¨ç½²äº¤æ˜“çš„æ‰€æœ‰ç»†èŠ‚ï¼Œæ¯”å¦‚è°éƒ¨ç½²çš„ã€éƒ¨ç½²äº†ä»€ä¹ˆä»£ç ã€èŠ±äº†å¤šå°‘ gas è´¹ç­‰ç­‰ã€‚
4. **`Code was successfully deployed to object address 0x379e...`**
   - **å«ä¹‰**: è¿™æ˜¯æœ€ç»ˆçš„æˆåŠŸç¡®è®¤ä¿¡æ¯ï¼Œå‘Šè¯‰ä½ ä»£ç å·²ç»æˆåŠŸåœ°éƒ¨ç½²åˆ°äº†ä¹‹å‰ç¡®è®¤çš„é‚£ä¸ªå¯¹è±¡åœ°å€ä¸Šã€‚
5. **`{ "Result": "Success" }`**
   - **å«ä¹‰**: Aptos CLI å·¥å…·æ‰§è¡Œå®Œæ¯•ï¼Œå‘Šè¯‰ä½ æ•´ä¸ªæµç¨‹åœ†æ»¡æˆåŠŸã€‚

ç°åœ¨ä½ çš„ç¬¬ä¸€ä¸ªæ™ºèƒ½åˆçº¦å·²ç»æˆåŠŸæ´»åœ¨ Aptos æµ‹è¯•ç½‘ä¸Šäº†ï¼ğŸ‰

<https://explorer.aptoslabs.com/txn/0x4ee645dad8cf4f042bbf44ca0d3f0ca0222503ecf367ec3ba6d442d208207e9e?network=testnet>

### æŸ¥çœ‹åˆçº¦

<https://explorer.aptoslabs.com/object/0x379e5f2fc6fef74c558ae4f27f8064866591f039fac09af6ee6ca2f9fe917bb6/modules/code/message?network=testnet>

![image-20250820110040305](/images/image-20250820110040305.png)

## æ€»ç»“

è‡³æ­¤ï¼Œæˆ‘ä»¬å®Œæ•´åœ°èµ°å®Œäº†åœ¨ Aptos ç½‘ç»œä¸Šå¼€å‘å¹¶éƒ¨ç½²ç¬¬ä¸€ä¸ª Move æ™ºèƒ½åˆçº¦çš„å…¨æµç¨‹ã€‚å›é¡¾æ•´ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬ä¸ä»…æˆåŠŸåœ°å®‰è£…äº†å¼€å‘å·¥å…·ã€åˆå§‹åŒ–äº†é¡¹ç›®ã€ç¼–å†™å¹¶æµ‹è¯•äº†åˆçº¦ä»£ç ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬äº²èº«ç»å†å¹¶è§£å†³äº†ä¸€ä¸ªæ¯ä¸ªæ–°æ‰‹éƒ½ä¼šé‡åˆ°çš„æ ¸å¿ƒé—®é¢˜ï¼š**è´¦æˆ·éœ€è¦æœ‰è¶³å¤Ÿçš„ Gas è´¹æ‰èƒ½åœ¨é“¾ä¸Šæ‰§è¡Œæ“ä½œ**ã€‚

ä»æœ€åˆå› ä½™é¢ä¸ºé›¶è€Œéƒ¨ç½²å¤±è´¥ï¼Œåˆ°å­¦ä¼šæŸ¥è¯¢è´¦æˆ·ã€ä½¿ç”¨æµ‹è¯•ç½‘æ°´é¾™å¤´è·å–èµ„é‡‘ï¼Œå†åˆ°æœ€ç»ˆçœ‹åˆ°éƒ¨ç½²æˆåŠŸçš„å–œæ‚¦ï¼Œè¿™ä¸ªè¿‡ç¨‹è¿œæ¯”ä¸€å¸†é£é¡ºçš„æ•™ç¨‹æ›´åŠ å®è´µã€‚å®ƒè®©æˆ‘ä»¬æ·±åˆ»ç†è§£äº†åŒºå—é“¾äº¤æ˜“çš„åŸºæœ¬ç»æµæ¨¡å‹ï¼Œä¹ŸéªŒè¯äº†åŠ¨æ‰‹å®è·µæ˜¯å­¦ä¹ æ–°æŠ€æœ¯çš„æœ€ä½³è·¯å¾„ã€‚

ç°åœ¨ï¼Œä½ çš„ç¬¬ä¸€ä¸ªæ™ºèƒ½åˆçº¦å·²ç»æˆåŠŸâ€œæ´»â€åœ¨äº† Aptos æµ‹è¯•ç½‘ä¸Šï¼Œè¿™ä»…ä»…æ˜¯æ¢ç´¢ Web3 ä¸–ç•Œçš„å¼€å§‹ã€‚å¸Œæœ›è¿™ç¯‡è¯¦å°½çš„å®å½•èƒ½ä¸ºä½ é“ºå¹³é“è·¯ï¼ŒåŠ©ä½ æ›´æœ‰ä¿¡å¿ƒåœ°è¿ˆå‡ºä¸‹ä¸€æ­¥ã€‚

## å‚è€ƒ

- <https://aptos.dev/zh/build/cli>
- <https://github.com/WGB5445/aptos-move-101/blob/main/01-basics/03-first-program.md>
- <https://aptos.dev/zh/network/faucet?address=0x1ff96e1010f6118a00bea0deb0139cdde087809e944638e12cbf70ce25a948fd>
- <https://aptos.dev/zh/network/faucet>
