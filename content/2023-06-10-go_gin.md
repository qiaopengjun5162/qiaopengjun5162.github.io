+++
title = "Goè¯­è¨€ä¹‹ginæ¡†æ¶æºç å­¦ä¹ "
date = 2023-06-10T18:28:22+08:00
description = "Goè¯­è¨€ä¹‹ginæ¡†æ¶æºç å­¦ä¹ "
[taxonomies]
tags = ["Go"]
categories = ["Go"]
+++

# Goè¯­è¨€ä¹‹ginæ¡†æ¶æºç å­¦ä¹ 

## gin æ¡†æ¶è·¯ç”±æ³¨å†Œä¸è·¯ç”±åŒ¹é…ã€ä¸­é—´ä»¶

```go
package main

import (
 "fmt"
 "github.com/gin-gonic/gin"
 "net/http"
)

func func1(c *gin.Context) {
 fmt.Println("func1")
}
func func2(c *gin.Context) {
 fmt.Println("func2 before")
 c.Next()
 fmt.Println("func2 after")
}
func func3(c *gin.Context) {
 fmt.Println("func3")
 //c.Abort()
}
func func4(c *gin.Context) {
 fmt.Println("func4")
 c.Set("name", "test")
}
func func5(c *gin.Context) {
 fmt.Println("func5")
 v, ok := c.Get("name")
 if ok {
  vStr := v.(string) // ç±»å‹è½¬æ¢
  fmt.Println("vStr", vStr)
 }
}

func main() {
 r := gin.Default()

 r.GET("/hello", func(c *gin.Context) {
  c.String(http.StatusOK, "ok")
 })

 shopGroup := r.Group("/shop", func1, func2) // é’ˆå¯¹å½“å‰è·¯ç”±ç»„ç”Ÿæ•ˆçš„ä¸­é—´ä»¶
 shopGroup.Use(func3)
 {
  shopGroup.GET("/index", func4, func5)
 }

 r.Run()
}

```

è¿è¡Œ

```bash

Code/go/gin_demo via ğŸ¹ v1.20.3 via ğŸ…’ base 
âœ go run main.go 
[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.

[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:   export GIN_MODE=release
 - using code:  gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /hello                    --> main.main.func1 (3 handlers)
[GIN-debug] GET    /shop/index               --> main.func5 (7 handlers)
[GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.
Please check https://pkg.go.dev/github.com/gin-gonic/gin#readme-don-t-trust-all-proxies for details.
[GIN-debug] Environment variable PORT is undefined. Using port :8080 by default
[GIN-debug] Listening and serving HTTP on :8080
func1
func2 before
func3
func4
func5
func2 after
[GIN] 2023/06/10 - 18:14:44 | 200 |      24.167Âµs |             ::1 | GET      "/shop/index"
[GIN] 2023/06/10 - 18:14:44 | 404 |       1.292Âµs |             ::1 | GET      "/favicon.ico"
^Csignal: interrupt

Code/go/gin_demo via ğŸ¹ v1.20.3 via ğŸ…’ base took 2m 12.5s 
âœ go run main.go
[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.

[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:   export GIN_MODE=release
 - using code:  gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /hello                    --> main.main.func1 (3 handlers)
[GIN-debug] GET    /shop/index               --> main.func5 (7 handlers)
[GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.
Please check https://pkg.go.dev/github.com/gin-gonic/gin#readme-don-t-trust-all-proxies for details.
[GIN-debug] Environment variable PORT is undefined. Using port :8080 by default
[GIN-debug] Listening and serving HTTP on :8080
func1
func2 before
func3
func2 after
[GIN] 2023/06/10 - 18:16:06 | 200 |      46.792Âµs |             ::1 | GET      "/shop/index"
^Csignal: interrupt

Code/go/gin_demo via ğŸ¹ v1.20.3 via ğŸ…’ base took 5m 4.4s 
âœ go run main.go
[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.

[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:   export GIN_MODE=release
 - using code:  gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /hello                    --> main.main.func1 (3 handlers)
[GIN-debug] GET    /shop/index               --> main.func5 (7 handlers)
[GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.
Please check https://pkg.go.dev/github.com/gin-gonic/gin#readme-don-t-trust-all-proxies for details.
[GIN-debug] Environment variable PORT is undefined. Using port :8080 by default
[GIN-debug] Listening and serving HTTP on :8080
func1
func2 before
func3
func2 after
[GIN] 2023/06/10 - 18:21:12 | 200 |      44.917Âµs |             ::1 | GET      "/shop/index"
^Csignal: interrupt

Code/go/gin_demo via ğŸ¹ v1.20.3 via ğŸ…’ base took 22.0s 
âœ go run main.go
[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.

[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:   export GIN_MODE=release
 - using code:  gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /hello                    --> main.main.func1 (3 handlers)
[GIN-debug] GET    /shop/index               --> main.func5 (7 handlers)
[GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.
Please check https://pkg.go.dev/github.com/gin-gonic/gin#readme-don-t-trust-all-proxies for details.
[GIN-debug] Environment variable PORT is undefined. Using port :8080 by default
[GIN-debug] Listening and serving HTTP on :8080
func1
func2 before
func3
func4
func5
vStr test
func2 after
[GIN] 2023/06/10 - 18:21:34 | 200 |      55.666Âµs |             ::1 | GET      "/shop/index"


```

è®¿é—®ï¼š<http://localhost:8080/shop/index>

### è·¯ç”±æºç è§£æ

![](https://raw.githubusercontent.com/qiaopengjun5162/blogpicgo/master/img202306101834038.png)

### ä¸­é—´ä»¶æºç è§£æ

![](https://raw.githubusercontent.com/qiaopengjun5162/blogpicgo/master/img202306101836177.png)

### gin æºç å›¾ç‰‡è§£æ

![](https://raw.githubusercontent.com/qiaopengjun5162/blogpicgo/master/img202306101838252.png)
