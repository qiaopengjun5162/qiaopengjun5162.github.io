+++
title = "Go è¯­è¨€å¿«é€Ÿå…¥é—¨"
date = 2023-04-25T22:45:21+08:00
description = "Go è¯­è¨€å¿«é€Ÿå…¥é—¨"
[taxonomies]
tags = ["Go"]
categories = ["Go"]
+++

# Go è¯­è¨€å¿«é€Ÿå…¥é—¨

## ä¸€ã€ç®€ä»‹å’Œå‡†å¤‡

### ä»€ä¹ˆæ˜¯ Goï¼Ÿ

- Go è¯­è¨€æ˜¯ä¸€é—¨ç¼–è¯‘è¯­è¨€ã€‚
  - åœ¨ä½ è¿è¡Œç¨‹åºä¹‹å‰ï¼ŒGoé¦–å…ˆä½¿ç”¨ç¼–è¯‘å™¨æŠŠä½ çš„ä»£ç è½¬æ¢æˆæœºå™¨èƒ½å¤Ÿè¯»æ‡‚çš„ 1 å’Œ 0ã€‚
  - å®ƒä¼šæŠŠä½ æ‰€æœ‰çš„ä»£ç ç¼–è¯‘æˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œåœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼ŒGoç¼–è¯‘å™¨èƒ½å¤Ÿæ•è·ä¸€äº›é”™è¯¯ã€‚
- ä¸æ˜¯æ‰€æœ‰çš„ç¼–ç¨‹è¯­è¨€éƒ½ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚
  - Pythonã€Ruby ç­‰å¾ˆå¤šè¯­è¨€éƒ½æ˜¯ä½¿ç”¨è§£é‡Šå™¨ï¼Œéšç€ç¨‹åºçš„è¿è¡Œï¼Œä¸€ä¸ªè¯­å¥ä¸€ä¸ªè¯­å¥çš„è¿›è¡Œç¿»è¯‘ã€‚ä½†è¿™ä¹Ÿæ„å‘³ç€ bug å¯èƒ½å°±æ½œä¼åœ¨ä½ è¿˜æ²¡æœ‰æµ‹è¯•è¿‡çš„è·¯å¾„ä¸Šã€‚
  - è¿™äº›å°±æ˜¯è§£é‡Šå‹è¯­è¨€ã€‚

### Go çš„ç”±æ¥å’Œè¯„ä»·

â€œæˆ‘ä»¬æƒ³è¦ä¸€ä¸ªå®‰å…¨çš„ã€é™æ€ç¼–è¯‘çš„ã€é«˜æ€§èƒ½çš„ã€ç±»ä¼¼ C++ å’Œ Java è¿™æ ·çš„è¯­è¨€ï¼Œä½†æ˜¯å¾—æ›´è½»é‡çº§å¹¶ä¸”è¦åƒPythonè¿™ç§åŠ¨æ€è§£é‡Šå‹è¯­è¨€è¿™æ ·æœ‰è¶£ã€‚â€    ---- Rob Pike

Goè¯­è¨€æ˜¯é€šè¿‡å¯¹è½¯ä»¶å¼€å‘ä½“éªŒè¿™æ–¹é¢ç»è¿‡å¤§é‡æ·±æ€ç†Ÿè™‘ä¹‹åè€Œè®¾è®¡çš„ã€‚å¤§é‡çš„ç¨‹åºåªéœ€ä¸€ä¸ªå‘½ä»¤ä¾¿åœ¨å‡ ç§’é’Ÿå†…å°±èƒ½å®Œæˆç¼–è¯‘ã€‚è¯¥è¯­è¨€çœç•¥äº†èƒ½å¯¼è‡´æ­§ä¹‰çš„ç‰¹æ€§ï¼Œé¼“åŠ±äº†å¯é¢„æµ‹ä¸”æ˜“äºç†è§£çš„ä»£ç ã€‚Goä¸ºJavaç­‰ç»å…¸è¯­è¨€æ‰€å¼ºåŠ çš„åˆšæ€§ç»“æ„ï¼Œæä¾›äº†æ›¿ä»£å“ã€‚

Goæ˜¯ä¸€ä¸ªå¼€æºçš„ç¼–ç¨‹è¯­è¨€ï¼Œèƒ½å¤Ÿæ„å»ºå¤§è§„æ¨¡ç®€å•ã€é«˜æ•ˆã€å¯é çš„è½¯ä»¶ã€‚

### Go Playground

### å®‰è£… Go å’Œå¼€å‘å·¥å…·

å®˜ç½‘ï¼š<https://go.dev/dl/>

Goè¯­è¨€ä¸­æ–‡ç½‘ï¼š<https://studygolang.com/>

- Goå®‰è£…åŒ…  <https://studygolang.com/dl>
- Visual Studio Code
  - Go æ’ä»¶ (>go   Go: install/update tools)
- Go  ä»£ç†
- go env -w GO111MODULE=on
- go env -w GOPROXY=<https://goproxy.cn,direct>

### åŒ…å’Œå‡½æ•° package & function

```go
package main

import (
  "fmt"
)

func main() {
  fmt.Println("Hello, playground")
}
```

### ä½œä¸šé¢˜

- Go ç¼–è¯‘å™¨æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ
- Go çš„ç¨‹åºä»å“ªé‡Œå¼€å§‹è¿è¡Œï¼Ÿ
- fmt è¿™ä¸ª package æä¾›äº†å“ªäº›åŠŸèƒ½ï¼Ÿ
- å·¦èŠ±æ‹¬å· { æ”¾åœ¨å“ªä¸ä¼šå¼•èµ·è¯­æ³•é”™è¯¯ï¼Ÿ
- ç¼–å†™ä¸€ä¸ªç¨‹åºï¼š
  - ç¬¬ä¸€è¡Œè¾“å‡º Helloï¼ŒWorld
  - ç¬¬äºŒè¡Œè¾“å‡º Helloã€‚

```go
package main

import "fmt"

// The function declares and initializes variables of different data types in Go.
func main() {
 fmt.Println("Hello World!")
 fmt.Println("Hello")
}

```

## äºŒã€åšä¸ªè®¡ç®—å™¨

### ç®—æœ¯è¿ç®—ç¬¦

- Go è¯­è¨€æä¾›äº† +ã€-ã€*ã€/ã€% æ¥åšåŠ å‡ä¹˜é™¤å’Œå–ä½™çš„ç®—æœ¯è¿ç®—

```go
// My weight loss program.
package main

import "fmt"

// main is the function where it all begins.
func main() {
 fmt.Print("My weight on the surface of Mars is")
 fmt.Print(149.0 * 0.3783)
 fmt.Print(" libs, and I would be ")
 fmt.Print(41 * 365 / 687)
 fmt.Print(" years old.")

 fmt.Println("My weight on the surface of Mars is", 149.0*0.3783, "libs, and I would be", 41*365.2425/687, "years old.")
}

```

è¿è¡Œ

```bash
Code/go/hello via ğŸ¹ v1.20.3 
âœ go run main.go
My weight on the surface of Mars is56.3667 libs, and I would be 21 years old.My weight on the surface of Mars is 56.3667 libs, and I would be 21.79758733624454 years old.

Code/go/hello via ğŸ¹ v1.20.3 
âœ 
```

### fmt.Printå’Œfmt.Println

- ä¸Šè¿°ä¾‹å­é‡Œä½¿ç”¨äº†Printï¼ŒPrintlnå‡½æ•°ã€‚
  - å¯ä»¥ä¼ é€’è‹¥å¹²ä¸ªå‚æ•°ï¼Œä¹‹é—´ç”¨é€—å·åˆ†å¼€ã€‚
  - å‚æ•°å¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€æ•°å­—ã€æ•°å­¦è¡¨è¾¾å¼ç­‰ç­‰ã€‚

### æ ¼å¼åŒ–æ‰“å°

- å¯ä»¥ä½¿ç”¨Printfæ¥æ§åˆ¶æ‰“å°çš„è¾“å‡ºç»“æœã€‚
- ä¸Printå’ŒPrintlnä¸åŒï¼ŒPrintfçš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯å­—ç¬¦ä¸²ã€‚
  - è¿™ä¸ªå­—ç¬¦ä¸²é‡ŒåŒ…å«äº†åƒ%vè¿™æ ·çš„æ ¼å¼åŒ–åŠ¨è¯ï¼Œå®ƒçš„å€¼ç”±ç¬¬äºŒä¸ªå‚æ•°çš„å€¼æ‰€ä»£æ›¿ã€‚
  - å¦‚æœæŒ‡å®šäº†å¤šä¸ªæ ¼å¼åŒ–åŠ¨è¯ï¼Œé‚£ä¹ˆå®ƒä»¬çš„å€¼ç”±åè¾¹çš„å‚æ•°å€¼æŒ‰å…¶é¡ºåºè¿›è¡Œæ›¿æ¢ã€‚

```go
// My weight loss program.
package main

import "fmt"

// main is the function where it all begins.
func main() {
 fmt.Printf("My weight on the surface of Mars is %v libs,", 149.0*0.3783)
 fmt.Printf(" and I would be %v years old.\n", 41*365/687)

 fmt.Printf("My weight on the surface of %v is %v lbs.\n", "Earth", 149.0)
}

```

è¿è¡Œ

```bash
Code/go/hello via ğŸ¹ v1.20.3 
âœ go run main.go
My weight on the surface of Mars is 56.3667 libs, and I would be 21 years old.
My weight on the surface of Earth is 149 lbs.

Code/go/hello via ğŸ¹ v1.20.3 
âœ 
```

### ä½¿ç”¨Printfå¯¹é½æ–‡æœ¬

- åœ¨æ ¼å¼åŒ–åŠ¨è¯é‡ŒæŒ‡å®šå®½åº¦ï¼Œå°±å¯ä»¥å¯¹é½æ–‡æœ¬ã€‚
- ä¾‹å¦‚ï¼Œ%4vï¼Œå°±æ˜¯å‘å·¦å¡«å……åˆ°è¶³å¤Ÿ4ä¸ªå®½åº¦
- æ­£æ•°ï¼Œå‘å·¦å¡«å……ç©ºæ ¼
- è´Ÿæ•°ï¼Œå‘å³å¡«å……ç©ºæ ¼

```go
// My weight loss program.
package main

import "fmt"

// main is the function where it all begins.
func main() {
 fmt.Printf("%-15v $%4v\n", "SpaceX", 94)
 fmt.Printf("%-15v $%4v\n", "Virgin Galactic", 100)
}

```

è¿è¡Œ

```bash
Code/go/hello via ğŸ¹ v1.20.3 
âœ go run main.go
SpaceX          $  94
Virgin Galactic $ 100

Code/go/hello via ğŸ¹ v1.20.3 
âœ 
```

### å¸¸é‡ å’Œ å˜é‡

- constï¼Œç”¨æ¥å£°æ˜å¸¸é‡
  - å¸¸é‡çš„å€¼ä¸å¯ä»¥æ”¹å˜
- varï¼Œç”¨æ¥å£°æ˜å˜é‡
  - æƒ³è¦ä½¿ç”¨å˜é‡é¦–å…ˆéœ€è¦è¿›è¡Œå£°æ˜

```go
// My weight loss program.
package main

import "fmt"

// main is the function where it all begins.
func main() {
 const lightSpeed = 200792 // km/s
 var distance = 56000000   // km

 fmt.Println(distance/lightSpeed, "seconds")

 distance = 401000000
 fmt.Println(distance/lightSpeed, "seconds")
}

```

è¿è¡Œ

```bash
Code/go/hello via ğŸ¹ v1.20.3 
âœ go run main.go
278 seconds
1997 seconds

Code/go/hello via ğŸ¹ v1.20.3 
âœ 
```

### åŒæ—¶å£°æ˜å¤šä¸ªå˜é‡

```go
// My weight loss program.
package main

import "fmt"

// main is the function where it all begins.
func main() {
 var distance = 56000000
 var speed = 100800

 var (
  distance = 56000000
  speed    = 100800
 )

 var distance, speed = 56000000, 100800

 const hoursPerDay, minutesPerHour = 24, 60
}

```

### èµ‹å€¼è¿ç®—ç¬¦

```go
// My weight loss program.
package main

// main is the function where it all begins.
func main() {
 var weight = 149.0
 weight = weight * 0.3783
 weight *= 0.3783
}

```

### è‡ªå¢è¿ç®—ç¬¦

- ä½†æ˜¯Goé‡Œé¢æ²¡æœ‰ç±»ä¼¼C#çš„++countè¿™ç§æ“ä½œã€‚

```go
// My weight loss program.
package main

// main is the function where it all begins.
func main() {
 var age = 41
 age = age + 1
 age += 1
 age++
}

```

### çŒœæ•°

- ä½¿ç”¨randåŒ…ï¼Œå¯ä»¥ç”Ÿæˆä¼ªéšæœºæ•°
  - ä¾‹å¦‚ï¼ŒIntnå¯ä»¥è¿”å›ä¸€ä¸ªæŒ‡å®šèŒƒå›´çš„éšæœºæ•´æ•°
  - importçš„è·¯å¾„æ˜¯ â€œmath/randâ€

```go
// My weight loss program.
package main

import (
 "fmt"
 "math/rand"
)

// main is the function where it all begins.
func main() {
 var num = rand.Intn(10) + 1
 fmt.Println("num = ", num)

 num = rand.Intn(10) + 1
 fmt.Println("num = ", num)
}

```

è¿è¡Œ

```bash
Code/go/hello via ğŸ¹ v1.20.3 
âœ go run main.go
num =  10
num =  3

Code/go/hello via ğŸ¹ v1.20.3 
```

### ä½œä¸šé¢˜

- Malacandraæ˜¯C.S. Lewisåœ¨ã€Šå¤ªç©ºä¸‰éƒ¨æ›²ã€‹ä¸­ç»™ç«æ˜Ÿèµ·çš„å¦ä¸€ä¸ªåå­—ã€‚ç¼–å†™ç¨‹åºæ¥ç¡®å®šé£èˆ¹è¦åœ¨28å¤©å†…åˆ°è¾¾Malacandraçš„è¡Œè¿›é€Ÿåº¦ï¼ˆå…¬é‡Œ/å°æ—¶ï¼‰ã€‚å‡è®¾è·ç¦»ä¸º56,000,000å…¬é‡Œã€‚

```go
// My weight loss program.
package main

import (
 "fmt"
)

// main is the function where it all begins.
func main() {
 var kilometer = 56000000
 var day = 28
 var speed = kilometer / (day * 24)

 fmt.Println("speed = ", speed)
}

```

## ä¸‰ã€å¾ªç¯å’Œåˆ†æ”¯

### Booleanç±»å‹

- ä½ å¯èƒ½ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„é—®é¢˜ï¼š
  - å¦‚æœä½ èµ°å‡ºäº†æ´ç©´ï¼Œé‚£ä¹ˆè¯·ç¿»åˆ°21é¡µ
- é‚£ä¹ˆä½ æ˜¯å¦èµ°å‡ºäº†æ´ç©´ï¼Ÿ
  - è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆåªæœ‰trueå’Œfalseä¸¤ç§æƒ…å†µã€‚
  - trueå’Œfalseå°±æ˜¯ä¸¤ä¸ªå·²å£°æ˜å¥½çš„å¸¸é‡ã€‚
- æŸäº›è¯­è¨€ï¼ˆä¾‹å¦‚jsï¼‰ä¼šæŠŠâ€œâ€è¿™ç§å­—ç¬¦ä¸²å½“ä½œfalseï¼Œå…¶ä»–çš„å­—ç¬¦ä¸²å½“ä½œtrueã€‚
- è€ŒGoè¯­è¨€åˆ™ä¸è¡Œï¼Œåªæœ‰trueæ˜¯çœŸçš„ï¼Œåªæœ‰falseæ˜¯å‡çš„ã€‚

### strings.Contains

- æ¥è‡ªstringsåŒ…çš„Containså‡½æ•°å¯ä»¥åˆ¤æ–­æŸä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«å¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²

```go
package main

import (
 "fmt"
 "strings"
)

// main is the function where it all begins.
func main() {
 fmt.Println("You find yourself in a dimly lit cavern.")

 var command = "walk outside"
 var exit = strings.Contains(command, "outside")

 fmt.Println("You leave the cave:", exit)
}

```

### æ¯”è¾ƒ

- å¦‚æœæˆ‘ä»¬æ¯”è¾ƒä¸¤ä¸ªå€¼ï¼Œå¾—åˆ°çš„ç»“æœä¹Ÿæ˜¯trueæˆ–false
- æ¯”è¾ƒè¿ç®—ç¬¦ï¼š
  - ==
  - <=
  - <
  - !=
  - =>
  - `>`

```go
package main

import (
 "fmt"
)

// main is the function where it all begins.
func main() {
 fmt.Println("There is a sign near the entrance that reads 'No Minors'.")

 var age = 41
 var minor = age < 18

 fmt.Printf("At age %v, am I a minor? %v\n", age, minor)
}

```

### ä½¿ç”¨ifæ¥åšåˆ†æ”¯

```go
package main

import (
 "fmt"
)

// main is the function where it all begins.
func main() {
 var command = "go east"

 if command == "go east" {
  fmt.Println("You head further up the mountain.")
 } else if command == "go inside" {
  fmt.Println("You enter the cave where you live out the rest of your life.")
 } else {
  fmt.Println("Didn't quite get that.")
 }
}

```

- åœ¨è¿™é‡Œelseå’Œelse iféƒ½æ˜¯å¯é€‰çš„
- è€Œä¸”else ifå¯ä»¥é‡å¤å¤šä¸ª

### é€»è¾‘è¿ç®—ç¬¦

- ||è¡¨ç¤ºæˆ–ï¼Œ&&è¡¨ç¤ºä¸ã€‚å®ƒä»¬é€šå¸¸ç”¨æ¥åŒæ—¶æ£€æŸ¥å¤šä¸ªæ¡ä»¶

```go
package main

import (
 "fmt"
)

// main is the function where it all begins.
func main() {
 fmt.Println("The year is 2100, should you leap?")

 var year = 2100
 var leap = year%400 == 0 || (year%4 == 0 && year%100 != 0)

 if leap {
  fmt.Println("Look before you leap!")
 } else {
  fmt.Println("Keep your feet on the ground.")
 }
}

```

- è¿™é‡Œä½¿ç”¨äº†çŸ­è·¯é€»è¾‘

### å–åé€»è¾‘è¿ç®—ç¬¦

- ï¼ï¼Œå¯ä»¥æŠŠtrueå˜ä¸ºfalseï¼Œåä¹‹äº¦ç„¶

```go
package main

import (
 "fmt"
)

// main is the function where it all begins.
func main() {
 var haveTorch = true
 var litTorch = false

 if !haveTorch || !litTorch {
  fmt.Println("Nothing to see here.")
 }
}

```

### ä½¿ç”¨switchåšåˆ†æ”¯

```go
package main

import (
 "fmt"
)

// main is the function where it all begins.
func main() {
 fmt.Println("There is cavern entrance here and a path to the east.")
 var command = "go inside"

 switch command {
 case "go east":
  fmt.Println("You head further up the mountain.")
 case "enter cave", "go inside":
  fmt.Println("You find yourself in a dimly lit cavern.")
 case "read sign":
  fmt.Println("The sign reads 'No Minors'.")
 default:
  fmt.Println("Didn't quite get that.")
 }
}

```

- switchè¯­å¥ä¹Ÿå¯ä»¥å¯¹æ•°å­—è¿›è¡ŒåŒ¹é…
- è¿˜æœ‰ä¸€ä¸ªfallthroughå…³é”®å­—ï¼Œå®ƒç”¨æ¥æ‰§è¡Œä¸‹ä¸€ä¸ªcaseçš„bodyéƒ¨åˆ†ã€‚è¿™ä¸€ç‚¹ä¸C#ã€Javaç­‰è¯­è¨€ä¸ä¸€æ ·ã€‚

```go
package main

import (
 "fmt"
)

// main is the function where it all begins.
func main() {
 var room = "lake"

 switch {
 case room == "cave":
  fmt.Println("You find yourself in a dimly lit cavern.")
 case room == "lake":
  fmt.Println("The ice seems solid enough.")
  fallthrough
 case room == "underwater":
  fmt.Println("The water is freezing cold.")
 }
}

```

### ä½¿ç”¨å¾ªç¯åšé‡å¤

- forå…³é”®å­—å¯ä»¥è®©ä½ çš„ä»£ç é‡å¤æ‰§è¡Œ
- foråè¾¹æ²¡æœ‰è·Ÿæ¡ä»¶ï¼Œé‚£å°±æ˜¯æ— é™å¾ªç¯ã€‚
  - å¯ä»¥ä½¿ç”¨breakè·³å‡ºå¾ªç¯

```go
package main

import (
 "fmt"
 "time"
)

// main is the function where it all begins.
func main() {
 var count = 10

 for count > 0 {
  fmt.Println(count)
  time.Sleep(time.Second)
  count--
 }
  
  // var count = 5
  
  // for {
  // if count < 0 {
  //   break
  //  }
  //  fmt.Println(count)
 //  time.Sleep(time.Second)
 // count--
  // }
 fmt.Println("Liftoff!")
}

```

### ä½œä¸šé¢˜

- å®ç°ä¸€ä¸ªçŒœæ•°æ¸¸æˆï¼Œé¦–å…ˆå®šä¹‰ä¸€ä¸ª1-100çš„æ•´æ•°ã€‚ç„¶åè®©è®¡ç®—æœºç”Ÿæˆä¸€ä¸ª1-100éšæœºæ•°ï¼Œå¹¶æ˜¾ç¤ºè®¡ç®—æœºçŒœæµ‹çš„ç»“æœæ˜¯å¤ªå¤§äº†è¿˜æ˜¯å¤ªå°äº†ï¼Œæ²¡çŒœå¯¹çš„è¯å°±ç»§ç»­çŒœï¼Œç›´è‡³çŒœå¯¹ã€‚

```go
package main

import (
 "fmt"
 "math/rand"
)

// main is the function where it all begins.
func main() {
 var num int
 rand_num := random(1, 100)
 for {
  fmt.Print("è¯·è¾“å…¥ä¸€ä¸ª1-100çš„æ•´æ•°:")
  fmt.Scanln(&num)
  // fmt.Printf("æ‰«æç»“æœ num:%d \n", num)
  if num > rand_num {
   fmt.Println("æ‚¨çŒœå¤§äº†ï¼")
   continue
  } else if num < rand_num {
   fmt.Println("æ‚¨çŒœå°äº†!")
   continue
  } else {
   fmt.Println("æ‚¨çŒœå¯¹äº†!")
   break
  }
 }
}

func random(min, max int) int {
 return rand.Intn(max-min) + min
}

```

Vscode fontï¼šFira code

## å››ã€å˜é‡åŠä½œç”¨åŸŸ

### å˜é‡çš„ä½œç”¨åŸŸ

- å½“å˜é‡è¢«å£°æ˜ä»¥åï¼Œå®ƒå°±è¿›å…¥äº†ä½œç”¨åŸŸï¼ˆå˜é‡å°±å˜å¾—å¯è§äº†ï¼‰ã€‚
  - åªè¦å˜é‡åœ¨ä½œç”¨åŸŸå†…ï¼Œä½ å°±å¯ä»¥è®¿é—®å®ƒ
  - å¦åˆ™ï¼Œè®¿é—®å®ƒä¼šæŠ¥é”™çš„
- å˜é‡å£°æ˜çš„ä½ç½®ï¼Œå†³å®šäº†å®ƒçš„ä½œç”¨åŸŸã€‚
- ä½œç”¨åŸŸçš„å¥½å¤„ï¼Ÿ
  - å¯ä»¥åœ¨ä¸åŒçš„ä½œç”¨åŸŸå†…ä½¿ç”¨ç›¸åŒçš„å˜é‡å
- åœ¨Goé‡Œé¢ï¼Œä½œç”¨åŸŸçš„èŒƒå›´å°±æ˜¯{ }ä¹‹é—´çš„éƒ¨åˆ†

```go
package main

import (
 "fmt"
 "math/rand"
)

// main is the function where it all begins.
func main() {
 var count = 0

 for count < 10 {
  var num = rand.Intn(10) + 1
  fmt.Println(num)

  count++
 }
}

// count å˜é‡å°±æ˜¯åœ¨functionä½œç”¨åŸŸå†…
// numçš„ä½œç”¨åŸŸå°±æ˜¯forçš„å¾ªç¯ä½“
```

### çŸ­å£°æ˜

- åœ¨Goé‡Œï¼Œå¯ä»¥ä½¿ç”¨varæ¥å£°æ˜å˜é‡ï¼š
  - var count = 10
- ä½†æ˜¯ä¹Ÿå¯ä»¥ä½¿ç”¨çŸ­å£°æ˜ï¼š
  - count := 10
- è¿™ä¸¤ç§æ–¹å¼çš„æ•ˆæœæ˜¯ä¸€æ ·çš„
- ä¸ä»…å£°æ˜è¯­å¥æ›´çŸ­ï¼Œè€Œä¸”å¯ä»¥åœ¨æ— æ³•ä½¿ç”¨varçš„åœ°æ–¹ä½¿ç”¨

ä½¿ç”¨varå£°æ˜å˜é‡

```go
var count = 0

for count = 10; count > 0; count-- {
  fmt.Println(count)
}

fmt.Println(count)
```

ä½¿ç”¨çŸ­å£°æ˜

```go
for count := 10; count > 0; count-- {
  fmt.Println(count)
}
```

ä¾‹å­ï¼šåœ¨ifè¯­å¥é‡Œä½¿ç”¨çŸ­å£°æ˜æ¥å£°æ˜å˜é‡

```go
if num := rand.Intn(3); num == 0 {
  fmt.Println("Space Adventures")
} else if num == 1 {
  fmt.Println("SpaceX")
} else {
  fmt.Println("Virgin Galactic")
}
```

ä¾‹å­ï¼šåœ¨switchè¯­å¥é‡Œä½¿ç”¨çŸ­å£°æ˜æ¥å£°æ˜å˜é‡

```go
switch num := rand.Intn(10); num {
  case 0:
  fmt.Println("Space Adventures")
 case 1:
  fmt.Println("SpaceX")
 case 2:
  fmt.Println("Virgin Galactic")
 default:
  fmt.Println("Random spaceline #", num)
}
```

### packageä½œç”¨åŸŸ

- era å˜é‡æ˜¯åœ¨mainå‡½æ•°å¤–å£°æ˜çš„
  - å®ƒæ‹¥æœ‰packageä½œç”¨åŸŸ
  - å¦‚æœmain packageæœ‰å¤šä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆeraå¯¹å®ƒä»¬éƒ½å¯è§
- çŸ­å£°æ˜ä¸å¯ç”¨æ¥å£°æ˜packageä½œç”¨åŸŸçš„å˜é‡

```go
package main

import (
 "fmt"
 "math/rand"
)

var era = "AD"

// main is the function where it all begins.
func main() {
 year := 2018

 switch month := rand.Intn(12) + 1; month {
 case 2:
  day := rand.Intn(28) + 1
  fmt.Println(era, year, month, day)
 case 4, 6, 9, 11:
  day := rand.Intn(30) + 1
  fmt.Println(era, year, month, day)
 default:
  day := rand.Intn(31) + 1
  fmt.Println(era, year, month, day)
 }

}

```

### ä½œä¸šï¼šå±•ç¤ºéšæœºæ—¥æœŸ

```go
package main

import (
 "fmt"
 "math/rand"
)

var era = "AD"

// main is the function where it all begins.
func main() {
 year := 2018
 month := rand.Intn(12) + 1
 daysInMonth := 31

 switch month {
 case 2:
  daysInMonth = 28
 case 4, 6, 9, 11:
  daysInMonth = 30
 }

 day := rand.Intn(daysInMonth) + 1
 fmt.Println(era, year, month, day)

}

```

- ä¿®æ”¹è¿™ä¸ªç¨‹åºï¼Œè®©å…¶èƒ½å¤„ç†é—°å¹´çš„æƒ…å†µ
  - ç”Ÿæˆéšæœºå¹´ä»½ï¼Œè€Œä¸æ˜¯å†™æ­»2018
  - äºŒæœˆä»½ï¼šé—°å¹´ä¸º29å¤©ï¼Œéé—°å¹´ä¸º28å¤©
  - ä½¿ç”¨forå¾ªç¯ç”Ÿæˆå’Œå±•ç¤º10ä¸ªæ—¥æœŸ

```go
package main

import (
 "fmt"
 "math/rand"
 "time"
)

var era = "AD"

// main is the function where it all begins.
func main() {
 rand.Seed(time.Now().UnixNano())    // ä¿®æ”¹éšæœºæ•°ç§å­
 year := rand.Intn(2025-1900) + 1900 // ç”Ÿæˆ1900å¹´åˆ°2025å¹´çš„éšæœºå¹´ä»½
 month := rand.Intn(12) + 1
 daysInMonth := 31
 if year%4 == 0 {
  switch month {
  case 2:
   daysInMonth = 29
  case 4, 6, 9, 11:
   daysInMonth = 30
  }

 } else {
  switch month {
  case 2:
   daysInMonth = 29
  case 4, 6, 9, 11:
   daysInMonth = 30
  }
 }
 for i := 0; i < 10; i++ {
  day := rand.Intn(daysInMonth) + 1
  fmt.Println(era, year, month, day)
 }
}

```

ä¼˜åŒ–ä»£ç ï¼š

```go
package main

import (
 "fmt"
 "math/rand"
 "time"
)

const (
 era = "AD"
 startYear = 1900
 endYear = 2025
)

func main() {
 rand.Seed(time.Now().UnixNano())
 for i := 0; i < 10; i++ {
  year := rand.Intn(endYear - startYear) + startYear
  month := rand.Intn(12) + 1
  daysInMonth := daysInMonth(year, month)
  day := rand.Intn(daysInMonth) + 1
  fmt.Println(era, year, month, day)
 }
}

func daysInMonth(year, month int) int {
 switch month {
 case 2:
  if isLeapYear(year) {
   return 29
  } else {
   return 28
  }
 case 4, 6, 9, 11:
  return 30
 default:
  return 31
 }
}

func isLeapYear(year int) bool {
 if year%4 != 0 {
  return false
 } else if year%100 != 0 {
  return true
 } else if year%400 != 0 {
  return false
 } else {
  return true
 }
}

```

## äº”ã€ç¬¬ä¸€é˜¶æ®µæµ‹è¯•é¢˜

### æµ‹è¯•é¢˜è¦æ±‚

- å‡è®¾æˆ‘ä»¬è¦å»ç«æ˜Ÿï¼Œä½†æ˜¯æœ‰å¤šæ¡èˆªçº¿ï¼Œæ¯æ¡èˆªçº¿çš„æ—¶é—´ã€ç¥¨çš„ç±»å‹ï¼ˆå•ç¨‹ã€å¾€è¿”ï¼‰ã€ä»·æ ¼éƒ½ä¸åŒï¼š
  - ä½¿ç”¨å˜é‡ã€å¸¸é‡ã€switchã€ifã€forã€fmtã€math/randç­‰ç¼–å†™è¿™ä¸ªç¨‹åºã€‚
  - ä¸€å…±å››åˆ—
  - Spacelineå°±æ˜¯èˆªç©ºå…¬å¸ï¼š
    - Space Adventures, SpaceX, or Virgin Galactic
  - Daysæ˜¯æŒ‡åˆ°ç«æ˜Ÿå•ç¨‹æ‰€éœ€çš„å¤©æ•°
    - ä½¿ç”¨2020å¹´7æœˆ28æ—¥ä½œä¸ºå‡ºå‘æ—¥æœŸã€‚è·ç¦»ç«æ˜Ÿçš„è·ç¦»ä¸º62,100,000å…¬é‡Œã€‚é€Ÿåº¦éšæœºç”Ÿæˆ16-30 km/s
  - Trip Typeå°±æ˜¯æŒ‡å•ç¨‹è¿˜æ˜¯å¾€è¿”
  - Priceçš„å•ä½æ˜¯ç™¾ä¸‡ç¾å…ƒ
    - ç¥¨ä»·éšæœºç”Ÿæˆï¼š3600ä¸‡-5000ä¸‡ä¹‹é—´ï¼ˆå•ç¨‹ï¼‰

## å…­ã€å®æ•°

### å£°æ˜æµ®ç‚¹å‹å˜é‡

- ä¸‹é¢è¿™ä¸‰ä¸ªè¯­å¥çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼š
  - `days := 365.2425`
  - `var days = 365.2425`
  - `var days float64 = 365.2425`
- åªè¦æ•°å­—å«æœ‰å°æ•°éƒ¨åˆ†ï¼Œé‚£ä¹ˆå®ƒçš„ç±»å‹å°±æ˜¯float64

### å£°æ˜æµ®ç‚¹å‹å˜é‡

- å¦‚æœä½ ä½¿ç”¨ä¸€ä¸ªæ•´æ•°æ¥åˆå§‹åŒ–æŸä¸ªå˜é‡ï¼Œé‚£ä¹ˆä½ å¿…é¡»æŒ‡å®šå®ƒçš„ç±»å‹ä¸ºfloat64ï¼Œå¦åˆ™å®ƒå°±æ˜¯ä¸€ä¸ªæ•´æ•°ç±»å‹ï¼š
  - `var answer float64 = 42`

### æµ‹è¯•

- answeræ˜¯ä»€ä¹ˆç±»å‹ï¼Ÿ
  - `answer := 42.0`

### å•ç²¾åº¦æµ®ç‚¹æ•°ç±»å‹

- Goè¯­è¨€é‡Œæœ‰ä¸¤ç§æµ®ç‚¹æ•°ç±»å‹ï¼š
- é»˜è®¤æ˜¯float64
  - 64ä½çš„æµ®ç‚¹ç±»å‹
  - å ç”¨8å­—èŠ‚å†…å­˜
  - æŸäº›ç¼–ç¨‹è¯­è¨€æŠŠè¿™ç§ç±»å‹å«åšdoubleï¼ˆåŒç²¾åº¦ï¼‰
- float32
  - å ç”¨4å­—èŠ‚å†…å­˜
  - ç²¾åº¦æ¯”float64ä½
  - æœ‰æ—¶å«åšå•ç²¾åº¦ç±»å‹

### å•ç²¾åº¦æµ®ç‚¹ç±»å‹

- æƒ³è¦ä½¿ç”¨å•ç²¾åº¦ç±»å‹ï¼Œä½ å¿…é¡»åœ¨å£°æ˜å˜é‡çš„æ—¶å€™æŒ‡å®šè¯¥ç±»å‹

```go
var pi64 = math.Pi
var pi32 float32 = math.Pi
fmt.Println("pi64: ", pi64)
fmt.Println("pi32: ", pi32)
```

### å•åŒç²¾åº¦çš„ä½¿ç”¨åœºæ™¯

- å½“å¤„ç†å¤§é‡æ•°æ®æ—¶ï¼Œä¾‹å¦‚3Dæ¸¸æˆä¸­çš„æ•°åƒä¸ªé¡¶ç‚¹ï¼Œä½¿ç”¨float32ç‰ºç‰²ç²¾åº¦æ¥èŠ‚çœå†…å­˜æ˜¯å¾ˆæœ‰æ„ä¹‰çš„ã€‚
- mathåŒ…é‡Œé¢çš„å‡½æ•°æ“ä½œçš„éƒ½æ˜¯float64ç±»å‹ï¼Œæ‰€ä»¥åº”è¯¥é¦–é€‰ä½¿ç”¨float64ï¼Œé™¤éä½ æœ‰è¶³å¤Ÿçš„ç†ç”±ä¸å»ä½¿ç”¨å®ƒã€‚

### é›¶å€¼

- Goé‡Œé¢æ¯ä¸ªç±»å‹éƒ½æœ‰ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå®ƒç§°ä½œé›¶å€¼ã€‚
- å½“ä½ å£°æ˜å˜é‡å´ä¸å¯¹å®ƒè¿›è¡Œåˆå§‹åŒ–çš„æ—¶å€™ï¼Œå®ƒçš„å€¼å°±æ˜¯é›¶å€¼ã€‚

```go
var price float64
fmt.Println("price: ", price)

price1 := 0.0
fmt.Println("price: ", price1)
```

### æ˜¾ç¤ºæµ®ç‚¹ç±»å‹

- ä½¿ç”¨Printæˆ–Printlnæ‰“å°æµ®ç‚¹ç±»å‹çš„æ—¶å€™ï¼Œé»˜è®¤çš„è¡Œä¸ºæ˜¯å°½å¯èƒ½çš„å¤šæ˜¾ç¤ºå‡ ä½å°æ•°
- å¦‚æœä½ ä¸æƒ³è¿™æ ·ï¼Œé‚£ä¹ˆä½ åº”è¯¥ä½¿ç”¨Printfå‡½æ•°ï¼Œç»“åˆ%fæ ¼å¼åŒ–åŠ¨è¯æ¥æŒ‡å®šæ˜¾ç¤ºå°æ•°çš„ä½æ•°ï¼š

```go
third := 1.0 / 3
fmt.Println(third)
fmt.Printf("%v\n", third)
fmt.Printf("%f\n", third)
fmt.Printf("%.3f\n", third)
fmt.Printf("%4.2f\n", third)
```

è¿è¡Œ

```bash
Code/go/hello via ğŸ¹ v1.20.3 
âœ go run main.go 
0.3333333333333333
0.3333333333333333
0.333333
0.333
0.33

Code/go/hello via ğŸ¹ v1.20.3 
âœ 
```

### %f æ ¼å¼åŒ–åŠ¨è¯

- å®ƒç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š
- å®½åº¦ï¼šä¼šæ˜¾ç¤ºå‡ºçš„æœ€å°‘å­—ç¬¦ä¸ªæ•°ï¼ˆåŒ…å«å°æ•°ç‚¹å’Œå°æ•°ï¼‰
  - å¦‚æœå®½åº¦å¤§äºæ•°å­—çš„ä¸ªæ•°ï¼Œé‚£ä¹ˆå·¦è¾¹ä¼šå¡«å……ç©ºæ ¼
  - å¦‚æœæ²¡æŒ‡å®šå®½åº¦ï¼Œé‚£ä¹ˆå°±æŒ‰å®é™…çš„ä½æ•°è¿›è¡Œæ˜¾ç¤º
- ç²¾åº¦ï¼šå°æ•°ç‚¹åè¾¹æ˜¾ç¤ºçš„ä½æ•°
- å¦‚æœæƒ³ä½¿ç”¨0ä»£æ›¿ç©ºæ ¼ä½œä¸ºå¡«å……ï¼š
  - `fmt.Printf("%05.2f\n", third)`

### æµ®ç‚¹ç±»å‹çš„ç²¾åº¦

```go
third := 1.0 / 3.0
fmt.Println(third + third + third)

piggyBank := 0.1
piggyBank += 0.2
fmt.Println(piggyBank)
```

å¯ä»¥çœ‹åˆ°ï¼Œæµ®ç‚¹ç±»å‹ä¸é€‚åˆç”¨äºé‡‘èç±»è®¡ç®—ä¸ºäº†å°½é‡æœ€å°åŒ–èˆå…¥é”™è¯¯ï¼Œå»ºè®®å…ˆåšä¹˜æ³•ï¼Œå†åšé™¤æ³•

- å¯ä»¥çœ‹åˆ°ï¼Œæµ®ç‚¹ç±»å‹ä¸é€‚åˆç”¨äºé‡‘èç±»è®¡ç®—
- ä¸ºäº†å°½é‡æœ€å°åŒ–èˆå…¥é”™è¯¯ï¼Œå»ºè®®å…ˆåšä¹˜æ³•ï¼Œå†åšé™¤æ³•

```go
celsius := 21.0
fmt.Print((celsius/5.0*9.0)+32, "Â° F\n")
fmt.Print((9.0/5.0*celsius)+32, "Â° F\n")
```

```go
celsius := 21.0
fahrenheit := (celsius * 9.0 / 5.0) + 32.0
fmt.Print(fahrenheit, "Â° F")
```

### é—®é¢˜

- å¦‚ä½•é¿å…ä¸Šè¿°çš„èˆå…¥é”™è¯¯ï¼Ÿ

### å¦‚ä½•æ¯”è¾ƒæµ®ç‚¹ç±»å‹

```go
piggyBank := 0.1
piggyBank += 0.2
fmt.Println(piggyBank == 0.3)

fmt.Println(math.Abs(piggyBank-0.3) < 0.0001)
```

### ä½œä¸šé¢˜

- ç¼–å†™ä¸€ä¸ªç¨‹åºï¼š
  - éšæœºåœ°å°†äº”åˆ†é•å¸ï¼ˆ0.05ç¾å…ƒï¼‰ã€ä¸€è§’ç¡¬å¸ï¼ˆ0.10ç¾å…ƒï¼‰å’Œ25ç¾åˆ†ç¡¬å¸ï¼ˆ0.25ç¾å…ƒï¼‰æ”¾å…¥ä¸€ä¸ªç©ºçš„å‚¨è“„ç½ï¼Œç›´åˆ°é‡Œé¢è‡³å°‘æœ‰20ç¾å…ƒã€‚
  - æ¯æ¬¡å­˜æ¬¾åæ˜¾ç¤ºå­˜é’±ç½çš„ä½™é¢
  - å¹¶ä»¥é€‚å½“çš„å®½åº¦å’Œç²¾åº¦æ ¼å¼åŒ–ã€‚

## ä¸ƒã€æ•´æ•°ç±»å‹

### Goè¯­è¨€é‡Œçš„æ•´æ•°ç±»å‹

- Goæä¾›äº†10ç§æ•´æ•°ç±»å‹ï¼š
  - ä¸å¯ä»¥å­˜å°æ•°éƒ¨åˆ†
  - èŒƒå›´æœ‰é™
  - é€šå¸¸æ ¹æ®æ•°å€¼èŒƒå›´æ¥é€‰å–æ•´æ•°ç±»å‹
- 5ç§æ•´æ•°ç±»å‹æ˜¯æœ‰ç¬¦å·çš„
  - èƒ½è¡¨ç¤ºæ­£æ•°ã€0ã€è´Ÿæ•°
- 5ç§æ•´æ•°ç±»å‹æ˜¯æ— ç¬¦å·çš„
  - èƒ½è¡¨ç¤ºæ­£æ•°ã€0

### ä¾‹å­

- æœ€å¸¸ç”¨çš„æ•´æ•°ç±»å‹æ˜¯intï¼š`var year int = 2018`
- æ— ç¬¦å·æ•´æ•°ç±»å‹æ˜¯uintï¼š`var month uint = 2`

### ä¾‹å­ â€“ ä½¿ç”¨ç±»å‹æ¨æ–­

- ä¸‹é¢ä¸‰ä¸ªè¯­å¥æ˜¯ç­‰ä»·çš„ï¼š

```go
year := 2018
var year = 2018
var year int = 2018
```

### 8ç§æ•´æ•°ç±»å‹

- æ•´æ•°ç±»å‹ï¼ŒåŒ…æ‹¬æœ‰ç¬¦å·å’Œæ— ç¬¦å·çš„ï¼Œå®é™…ä¸Šä¸€å…±æ˜¯8ç§ç±»å‹:
  - ä»–ä»¬çš„å–å€¼èŒƒå›´å„ä¸ç›¸åŒã€‚
  - ä¸æ¶æ„æ— å…³
  - `int8 uint8 int16 uint16 int32 uint32 int64 uint64`

### intå’Œuint

- è€Œintå’Œuintæ˜¯é’ˆå¯¹ç›®æ ‡è®¾å¤‡ä¼˜åŒ–çš„ç±»å‹ï¼š
  - åœ¨æ ‘è“æ´¾2ã€æ¯”è¾ƒè€çš„ç§»åŠ¨è®¾å¤‡ä¸Šï¼Œintå’Œuintéƒ½æ˜¯32ä½çš„ã€‚
  - åœ¨æ¯”è¾ƒæ–°çš„è®¡ç®—æœºä¸Šï¼Œintå’Œuintéƒ½æ˜¯64ä½çš„ã€‚
- Tipï¼š
  - å¦‚æœä½ åœ¨è¾ƒè€çš„32ä½è®¾å¤‡ä¸Šï¼Œä½¿ç”¨äº†è¶…è¿‡20äº¿çš„æ•´æ•°ï¼Œå¹¶ä¸”ä»£ç è¿˜èƒ½è¿è¡Œï¼Œé‚£ä¹ˆæœ€å¥½ä½¿ç”¨int64å’Œuint64æ¥ä»£æ›¿intå’Œuint

- è™½ç„¶åœ¨æŸäº›è®¾å¤‡ä¸Šintå¯ä»¥çœ‹ä½œæ˜¯int32ï¼Œåœ¨æŸäº›è®¾å¤‡ä¸Šintå¯ä»¥çœ‹ä½œæ˜¯int64ï¼Œä½†å®ƒä»¬å…¶å®æ˜¯3ç§ä¸åŒçš„ç±»å‹ã€‚
- intå¹¶ä¸æ˜¯å…¶å®ƒç±»å‹çš„åˆ«å

### å°æµ‹è¯•

- å“ªäº›æ•´æ•°ç±»å‹èƒ½å¤ŸåŒ…å« â€“20151021ï¼Ÿ

### æ‰“å°æ•°æ®ç±»å‹

- åœ¨Printfé‡Œä½¿ç”¨%Tå°±å¯ä»¥æ‰“å°å‡ºæ•°æ®çš„ç±»å‹ã€‚

```go
package main

import (
 "fmt"
)

// main is the function where it all begins.
func main() {
 year := 2018
 fmt.Printf("Type %T for %v\n", year, year)

 a := "text"
 fmt.Printf("Type %T for %[1]v\n", a)

 b := 42
 fmt.Printf("Type %T for %[1]v\n", b)

 c := 3.14
 fmt.Printf("Type %T for %[1]v\n", c)

 d := true
 fmt.Printf("Type %T for %[1]v\n", d)
}

```

è¿è¡Œ

```bash
Code/go/hello via ğŸ¹ v1.20.3 
âœ go run main.go 
Type int for 2018
Type string for text
Type int for 42
Type float64 for 3.14
Type bool for true

Code/go/hello via ğŸ¹ v1.20.3 
âœ 
```

### uint8

- uint8å¯ä»¥ç”¨æ¥è¡¨ç¤º8ä½çš„é¢œè‰²ï¼ˆçº¢ç»¿è“ï¼š0-255ï¼‰ã€‚
  - `var red, green, blue uint8 = 0, 141, 213`
- ä¸ºä»€ä¹ˆä¸ä½¿ç”¨intï¼Ÿ
  - uint8çš„å–å€¼èŒƒå›´æ­£å¥½åˆé€‚ï¼Œè€Œintåˆ™å¤šå‡ºæ¥å‡ åäº¿ä¸åˆç†çš„æ•°ã€‚
  - å¦‚æœå¾ˆå¤šé¢œè‰²æ•°æ®è¿ç»­å­˜å‚¨ï¼Œä¾‹å¦‚æœªè¢«å‹ç¼©çš„å›¾ç‰‡ï¼Œé‚£ä¹ˆä½¿ç”¨uint8å¯ä»¥èŠ‚çœå¾ˆå¤šå†…å­˜ã€‚

### åå…­è¿›åˆ¶è¡¨ç¤ºæ³•

- Goè¯­è¨€é‡Œï¼Œåœ¨æ•°å‰é¢åŠ ä¸Š0xå‰ç¼€ï¼Œå°±å¯ä»¥ç”¨åå…­è¿›åˆ¶çš„å½¢å¼æ¥è¡¨ç¤ºæ•°å€¼ã€‚

```go
var red, green, blue uint8 = 0, 141, 213
var red, green, blue uint8 == 0x00, 0x8d, 0xd5
```

### æ‰“å°åå…­è¿›åˆ¶

- æ‰“å°åå…­è¿›åˆ¶çš„æ•°ï¼Œä½¿ç”¨%xæ ¼å¼åŒ–åŠ¨è¯

```go
fmt.Printf("%x %x %x", red, green, blue)
```

- ä¹Ÿå¯ä»¥æŒ‡å®šæœ€å°å®½åº¦å’Œå¡«å……ï¼š

```go
var red, green, blue uint8 = 0, 141, 213
fmt.Printf("clolr: #%02x%02x%02x;", red, green, blue)
```

### é—®é¢˜

- å­˜å‚¨ä¸€ä¸ªuint8çš„å˜é‡éœ€è¦å¤šå¤§å†…å­˜ï¼Ÿ

### æ•´æ•°ç¯ç»•

- æ‰€æœ‰çš„æ•´æ•°ç±»å‹éƒ½æœ‰ä¸€ä¸ªå–å€¼èŒƒå›´ï¼Œè¶…å‡ºè¿™ä¸ªèŒƒå›´ï¼Œå°±ä¼šå‘ç”Ÿâ€œç¯ç»•â€

```go
var red uint8 = 255
red++
fmt.Println(red)  // 0

var number int8 = 127
number++
fmt.Println(number)  // -128
```

### æ‰“å°æ¯ä¸ªbit

- ä½¿ç”¨%bæ ¼å¼åŒ–åŠ¨è¯

```go
var green uint8 = 3
fmt.Printf("%08b\n", green)  // 00000011
green++
fmt.Printf("%08b\n", green)  // 00000100
```

### ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿæ•´æ•°ç¯ç»•ï¼Ÿ

### æ•´æ•°ç±»å‹çš„æœ€å¤§ã€æœ€å°å€¼

- mathåŒ…é‡Œï¼Œä¸ºä¸æ¶æ„æ— å…³çš„æ•´æ•°ç±»å‹ï¼Œå®šä¹‰äº†æœ€å¤§ã€æœ€å°å€¼å¸¸é‡ï¼š
  - `math.MaxInt16`
  - `math.MinInt64`
- è€Œintå’Œuintï¼Œå¯èƒ½æ˜¯32æˆ–64ä½çš„ã€‚

### å¦‚ä½•é¿å…æ—¶é—´å‘ç”Ÿç¯ç»•

- Unixç³»ç»Ÿé‡Œï¼Œæ—¶é—´æ˜¯ä»¥1970å¹´1æœˆ1æ—¥è‡³ä»Šçš„ç§’æ•°æ¥è¡¨ç¤ºçš„ã€‚
- ä½†æ˜¯åœ¨2038å¹´ï¼Œè¿™ä¸ªæ•°å°±ä¼šè¶…è¿‡20å¤šäº¿ï¼Œä¹Ÿå°±æ˜¯è¶…è¿‡äº†int32çš„èŒƒå›´ã€‚
- åº”ä½¿ç”¨ï¼šint64æˆ–uint64

```go
package main

import (
 "fmt"
 "time"
)

// main is the function where it all begins.
func main() {
 future := time.Unix(12622780800, 0)
 fmt.Println(future)
}

```

### ä½œä¸šé¢˜

- ç¼–å†™ä¸€ä¸ªæ–°çš„å­˜é’±ç½ç¨‹åºï¼Œå®ƒä½¿ç”¨æ•´æ•°æ¥è·Ÿè¸ªç¾åˆ†è€Œä¸æ˜¯ç¾å…ƒçš„æ•°é‡ã€‚ï¼š
  - éšæœºå°†äº”åˆ†é•å¸ï¼ˆ5ç¾åˆ†ï¼‰ã€ä¸€è§’ç¡¬å¸ï¼ˆ10ç¾åˆ†ï¼‰å’Œ25ç¾åˆ†ç¡¬å¸ï¼ˆ25ç¾åˆ†ï¼‰æ”¾å…¥ä¸€ä¸ªç©ºçš„å‚¨è“„ç½ï¼Œç›´åˆ°é‡Œé¢è‡³å°‘æœ‰20ç¾å…ƒã€‚
  - ä»¥ç¾å…ƒæ˜¾ç¤ºæ¯æ¬¡å­˜æ¬¾åå­˜é’±ç½çš„ä½™é¢ï¼ˆä¾‹å¦‚$1.05ï¼‰ã€‚

## å…«ã€æ¯”è¾ƒå¤§çš„æ•°

### æ•°å¤ªå¤§äº†æ€åŠï¼Ÿ

- æµ®ç‚¹ç±»å‹å¯ä»¥å­˜å‚¨éå¸¸å¤§çš„æ•°å€¼ï¼Œä½†æ˜¯ç²¾åº¦ä¸é«˜
- æ•´å‹å¾ˆç²¾ç¡®ï¼Œä½†æ˜¯å–å€¼èŒƒå›´æœ‰é™ã€‚
- å¦‚æœä½ éœ€è¦å¾ˆå¤§çš„æ•°ï¼Œè€Œä¸”è¦æ±‚å¾ˆç²¾ç¡®ï¼Œé‚£ä¹ˆæ€ä¹ˆåŠ
  - int64å¯ä»¥å®¹çº³å¾ˆå¤§çš„æ•°ï¼Œå¦‚æœè¿˜ä¸è¡Œï¼Œé‚£ä¹ˆï¼š
  - uint64å¯ä»¥å®¹çº³æ›´å¤§çš„æ­£æ•°ï¼Œå¦‚æœè¿˜ä¸è¡Œï¼Œé‚£ä¹ˆï¼š
  - ä¹Ÿå¯ä»¥å‡‘åˆç”¨æµ®ç‚¹ç±»å‹ï¼Œä½†æ˜¯è¿˜æœ‰å¦å¤–ä¸€ç§æ–¹æ³•ï¼š
- ä½¿ç”¨bigåŒ…ã€‚

ä¾‹å­ä¸€

```go
package main

import "fmt"

func main() {
 const lightSpeed = 299792 // km/s
 const secondsPerDay = 86400

 var distance int64 = 41.3e12
 fmt.Println("Alpha Centauri is", distance, "km away.")

 days := distance / lightSpeed / secondsPerDay
 fmt.Println("That is", days, "days of travel at light speed.")
}

```

ä¾‹å­äºŒ

```go
package main

import "fmt"

func main() {
  var distance uint64 = 24e18 // æŠ¥é”™ cannot use 24e18 (untyped float constant 2.4e+19) as uint64 value in variable declaration (truncated)
  
  var distance float64 = 24e18
  fmt.Println(distance)
}
```

### æç¤º

- å¦‚æœæ²¡æœ‰ä¸ºæŒ‡æ•°å½¢å¼çš„æ•°å€¼æŒ‡å®šç±»å‹çš„è¯ï¼Œé‚£ä¹ˆGoå°†ä¼šå°†å®ƒè§†ä½œfloat64ç±»å‹

### bigåŒ…

- å¯¹äºè¾ƒå¤§çš„æ•´æ•°ï¼ˆè¶…è¿‡1018ï¼‰ï¼šbig.Int
- å¯¹äºä»»æ„ç²¾åº¦çš„æµ®ç‚¹ç±»å‹ï¼Œbig.Float
- å¯¹äºåˆ†æ•°ï¼Œbig.Rat

### big.Int

ä¾‹å­ä¸€

```go
package main

import (
 "fmt"
 "math/big"
)

func main() {
 lightSpeed := big.NewInt(299792)
 secondsPerDay := big.NewInt(86400)
 fmt.Println("lightSpeed is", lightSpeed, "seconds per day", secondsPerDay)
}

```

ä¾‹å­äºŒ

```go
package main

import (
 "fmt"
 "math/big"
)

func main() {
 distance := new(big.Int)
 distance.SetString("2400000000000000000000000", 10)
 fmt.Println("distance.", distance)
}

```

ä¾‹å­ä¸‰

```go
package main

import (
 "fmt"
 "math/big"
)

func main() {
 lightSpeed := big.NewInt(299792)
 secondsPerDay := big.NewInt(86400)

 distance := new(big.Int)
 distance.SetString("240000000000000000000", 10)
 fmt.Println("Andromeda Galaxy is", distance, "km away.")

 seconds := new(big.Int)
 seconds.Div(distance, lightSpeed) // é™¤æ³•

 days := new(big.Int)
 days.Div(seconds, secondsPerDay)

 fmt.Println("That is", days, "days of travel at light speed.")
}

```

- ä¸€æ—¦ä½¿ç”¨äº†big.Intï¼Œé‚£ä¹ˆç­‰å¼é‡Œå…¶å®ƒçš„éƒ¨åˆ†ä¹Ÿå¿…é¡»ä½¿ç”¨big.Int
- NewInt()å‡½æ•°å¯ä»¥æŠŠint64è½¬åŒ–ä¸ºbig.Intç±»å‹
- å¦‚ä½•æŠŠ24 x 10çš„18æ¬¡æ–¹è½¬åŒ–ä¸ºbig.Intç±»å‹ï¼Ÿ
  - é¦–å…ˆnewä¸€ä¸ªbig.Int
  - å†é€šè¿‡SetStringå‡½æ•°æŠŠæ•°å€¼çš„å­—ç¬¦ä¸²å½¢å¼ï¼Œå’Œå‡ è¿›åˆ¶ä¼ é€’è¿›è¡Œå³å¯ã€‚
- ç¼ºç‚¹ï¼šç”¨èµ·æ¥ç¹çï¼Œä¸”é€Ÿåº¦æ…¢

### æµ‹è¯•é¢˜

- ç”¨ä¸¤ç§æ–¹å¼æŠŠ86400è½¬åŒ–ä¸ºbig.Intç±»å‹ã€‚

### è¾ƒå¤§æ•°å€¼çš„å¸¸é‡

- åœ¨Goé‡Œé¢ï¼Œå¯ä»¥ä¸ºå¸¸é‡æŒ‡æ˜ç±»å‹ï¼ˆè¿™å¥è¯ä¼šæŠ¥é”™ï¼‰ï¼š`const distance uint64 = 24000000000000000`
- ä¹Ÿå¯ä»¥ä¸æŒ‡æ˜å¸¸é‡çš„ç±»å‹ã€‚ã€‚ã€‚
- å¯¹äºå˜é‡ï¼ŒGoä¼šä½¿ç”¨ç±»å‹æ¨æ–­ï¼›
- è€Œåœ¨Goé‡Œé¢ï¼Œå¸¸é‡æ˜¯å¯ä»¥æ— ç±»å‹çš„ï¼ˆuntypedï¼‰ï¼Œè¿™å¥è¯å°±ä¸ä¼šæŠ¥é”™ï¼š
  - `const distance = 24000000000000000`

### è¾ƒå¤§æ•°å€¼çš„å¸¸é‡

- å¸¸é‡ä½¿ç”¨constå…³é”®å­—æ¥å£°æ˜ï¼Œç¨‹åºé‡Œçš„æ¯ä¸ªå­—é¢å€¼éƒ½æ˜¯å¸¸é‡ã€‚
- è¿™æ„å‘³ç€ï¼šæ¯”è¾ƒå¤§çš„æ•°å€¼å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼ˆä½œä¸ºå­—é¢å€¼ï¼‰
- é’ˆå¯¹å­—é¢å€¼å’Œå¸¸é‡çš„è®¡ç®—æ˜¯åœ¨ç¼–è¯‘é˜¶æ®µå®Œæˆçš„ã€‚
- Goçš„ç¼–è¯‘å™¨æ˜¯ç”¨Goç¼–å†™çš„ï¼Œè¿™ç§æ— ç±»å‹çš„æ•°å€¼å­—é¢å€¼å°±æ˜¯ç”±bigåŒ…æ‰€æ”¯æŒçš„ã€‚è¿™ä½¿ä½ å¯ä»¥æ“ä½œå¾ˆå¤§çš„æ•°ï¼ˆè¶…è¿‡18çš„10Â¹â¸ï¼‰
- åªè¦èƒ½å¤Ÿå®¹çº³å¾—ä¸‹ï¼Œé‚£ä¹ˆå¸¸é‡å°±å¯ä»¥èµ‹å€¼ç»™å˜é‡ã€‚

```go
package main

import "fmt"

func main() {
  fmt.Println("Andromeda Galaxy is", 2400000000000000/299792/86400, "light days away.")
}
```

### è¾ƒå¤§æ•°å€¼çš„å¸¸é‡

- å°½ç®¡Goç¼–è¯‘å™¨ä½¿ç”¨bigåŒ…æ¥å¤„ç†æ— ç±»å‹çš„æ•°å€¼å¸¸é‡ï¼Œä½†æ˜¯å¸¸é‡å’Œbig.Intçš„å€¼æ˜¯ä¸èƒ½äº’æ¢çš„ã€‚

### å°æµ‹è¯•

- å¸¸é‡å’Œå­—é¢å€¼çš„è®¡ç®—æ˜¯åœ¨å“ªä¸ªé˜¶æ®µå‘ç”Ÿçš„ï¼Ÿ
- å‡½æ•°å¯ä»¥ä½¿ç”¨æ— ç±»å‹çš„å¸¸é‡ä½œä¸ºå‡½æ•°çš„å®é™…ä¼ å…¥çš„å‚æ•°å—ï¼Ÿ

### ä½œä¸šé¢˜

- å¤§çŸ®æ˜Ÿæ˜¯å·²çŸ¥çš„è·ç¦»åœ°çƒæœ€è¿‘çš„æ˜Ÿç³»ï¼Œè·ç¦»æˆ‘ä»¬çš„å¤ªé˜³236000000000000000å…¬é‡Œï¼ˆå°½ç®¡æœ‰äººè´¨ç–‘å®ƒæ˜¯ä¸€ä¸ªæ˜Ÿç³»ï¼‰ã€‚ä½¿ç”¨å¸¸é‡å°†æ­¤è·ç¦»è½¬æ¢ä¸ºå…‰å¹´ã€‚

## ä¹ã€å¤šè¯­è¨€æ–‡æœ¬

### å£°æ˜å­—ç¬¦ä¸²

- å£°æ˜å­—ç¬¦ä¸²ï¼š

```go
peace := "peace"
var peace = "peace"
var peace string = "peace"
```

- å­—ç¬¦ä¸²çš„é›¶å€¼ï¼š`var blank string`

### å­—ç¬¦ä¸²å­—é¢å€¼/åŸå§‹å­—ç¬¦ä¸²å­—é¢å€¼

- å­—ç¬¦ä¸²å­—é¢å€¼å¯ä»¥åŒ…å«è½¬ä¹‰å­—ç¬¦ï¼Œä¾‹å¦‚\n
- ä½†å¦‚æœä½ ç¡®å®æƒ³å¾—åˆ°\nè€Œä¸æ˜¯æ¢è¡Œçš„è¯ï¼Œå¯ä»¥ä½¿ç”¨`æ¥ä»£æ›¿â€œï¼Œè¿™å«åšåŸå§‹å­—ç¬¦ä¸²å­—é¢å€¼ã€‚

```go
fmt.Println("peace be upon you\nupon you be peace")
fmt.Println(`strings can span multiple lines with the \n escape sequence`)

fmt.Println(`
peace be upon you
upon you be peace`)
```

### å°æµ‹è¯•

- å¦‚æœä½ æƒ³è¾“å‡ºC:\goï¼Œé‚£ä¹ˆåº”è¯¥ä½¿ç”¨å­—ç¬¦ä¸²å­—é¢å€¼è¿˜æ˜¯åŸå§‹å­—ç¬¦ä¸²å­—é¢å€¼ã€‚
- å­—ç¬¦ä¸²å­—é¢å€¼ï¼šstring literal
- åŸå§‹å­—ç¬¦ä¸²å­—é¢å€¼ï¼šraw string literal

### å­—ç¬¦ï¼Œcode pointsï¼Œrunesï¼Œbytes

- Unicodeè”ç›Ÿä¸ºè¶…è¿‡100ä¸‡ä¸ªå­—ç¬¦åˆ†é…äº†ç›¸åº”çš„æ•°å€¼ï¼Œè¿™ä¸ªæ•°å«åšcode pointã€‚
  - ä¾‹å¦‚ï¼š65ä»£è¡¨Aï¼Œ128515 ä»£è¡¨ ä¸€ä¸ªè¡¨æƒ…å­—ç¬¦
- ä¸ºäº†è¡¨ç¤ºè¿™æ ·çš„unicode code pointï¼ŒGoè¯­è¨€æä¾›äº†runeè¿™ä¸ªç±»å‹ï¼Œå®ƒæ˜¯int32çš„ä¸€ä¸ªç±»å‹åˆ«åã€‚
- è€Œbyteæ˜¯uint8ç±»å‹çš„åˆ«åï¼Œç›®çš„æ˜¯ç”¨äºäºŒè¿›åˆ¶æ•°æ®ã€‚
  - byteå€’æ˜¯å¯ä»¥è¡¨ç¤ºç”±ASCIIå®šä¹‰çš„è‹±è¯­å­—ç¬¦ï¼Œå®ƒæ˜¯Unicodeçš„ä¸€ä¸ªå­é›†ï¼ˆå…±128ä¸ªå­—ç¬¦ï¼‰

### ç±»å‹åˆ«å

- ç±»å‹åˆ«åå°±æ˜¯åŒä¸€ä¸ªç±»å‹çš„å¦ä¸€ä¸ªåå­—ã€‚
  - æ‰€ä»¥ï¼Œruneå’Œint32å¯ä»¥äº’æ¢ä½¿ç”¨ã€‚
- ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ç±»å‹åˆ«åï¼Œè¯­æ³•å¦‚ä¸‹ï¼š

```go
type byte = uint8
type rune = int32
```

### æ‰“å°

- å¦‚æœæƒ³æ‰“å°å­—ç¬¦è€Œä¸æ˜¯æ•°å€¼ï¼Œä½¿ç”¨%cæ ¼å¼åŒ–åŠ¨è¯
- ä»»ä½•æ•´æ•°ç±»å‹éƒ½å¯ä»¥ä½¿ç”¨%cæ‰“å°ï¼Œä½†æ˜¯runeæ„å‘³ç€è¯¥æ•°å€¼è¡¨ç¤ºäº†ä¸€ä¸ªå­—ç¬¦

```go
package main

import (
 "fmt"
)

func main() {
 fmt.Println("peace be upon you\nupon you be peace")
 fmt.Println(`strings can span multiple lines with the \n escape sequence`)

 fmt.Println(`
 peace be upon you
 upon you be peace`)

 var pi rune = 960
 var alpha rune = 940
 var omega rune = 969
 var bang byte = 33

 fmt.Printf("%v %v %v %v\n", pi, alpha, omega, bang)
 // å°†ä¼šæ‰“å°å‡º code point çš„å€¼

 fmt.Printf("%c%c%c%c\n", pi, alpha, omega, bang)
 // å°†ä¼šæ‰“å°å‡º å­—ç¬¦
}

```

è¿è¡Œ

```bash
Code/go/started via ğŸ¹ v1.20.3 via ğŸ…’ base 
âœ go run main.go
peace be upon you
upon you be peace
strings can span multiple lines with the \n escape sequence

        peace be upon you
        upon you be peace
960 940 969 33
Ï€Î¬Ï‰!

Code/go/started via ğŸ¹ v1.20.3 via ğŸ…’ base 
âœ 

```

### å­—ç¬¦

- å­—ç¬¦å­—é¢å€¼ä½¿ç”¨â€˜â€™æ‹¬èµ·æ¥ã€‚ä¾‹å¦‚ï¼šâ€™Aâ€™
- å¦‚æœæ²¡æŒ‡å®šå­—ç¬¦ç±»å‹çš„è¯ï¼Œé‚£ä¹ˆGoä¼šæ¨æ–­å®ƒçš„ç±»å‹ä¸ºrune
- è¿™é‡Œçš„gradeä»ç„¶åŒ…å«ä¸€ä¸ªæ•°å€¼ï¼Œæœ¬ä¾‹ä¸­å°±æ˜¯65ï¼Œå®ƒæ˜¯Açš„code pointã€‚
- å­—ç¬¦å­—é¢å€¼ä¹Ÿå¯ä»¥ç”¨byteç±»å‹ï¼š`var star byte = '*'`

```go
var grade rune
grade := 'A'
var grade1 = 'A'
var grade2 rune = 'A'
```

### å°æµ‹è¯•

- ASCIIç¼–ç é‡ŒåŒ…å«å¤šå°‘ä¸ªå­—ç¬¦ï¼Ÿ
- byteå’Œruneåˆ†åˆ«æ˜¯å“ªä¸ªç±»å‹çš„åˆ«åï¼Ÿ
- *ï¼ŒÃ©ï¼Œçš„code pointåˆ†åˆ«æ˜¯å¤šå°‘ï¼Ÿ

### string

- å¯ä¸€ä¸ªç»™æŸä¸ªå˜é‡èµ‹äºˆä¸åŒçš„stringå€¼ï¼Œä½†æ˜¯stringæœ¬èº«æ˜¯ä¸å¯å˜çš„

```go
peace := "shalom"
peace = "salam"
```

ä¾‹å­äºŒ

```go
package main

import (
 "fmt"
)

func main() {
 message := "shalom"
 c := message[5]
 fmt.Printf("%c\n", c) // m

 message[5] = 'd' // æŠ¥é”™ cannot assign to message[5]
}

```

### å°æµ‹è¯•

- å†™ä¸ªç¨‹åºï¼Œæ‰“å°å‡ºshalomçš„æ¯ä¸ªå­—ç¬¦ï¼Œæ¯ä¸ªå­—ç¬¦ç‹¬å ä¸€è¡Œã€‚

### Caesar cipherå‡¯æ’’åŠ å¯†æ³•

- å¯¹äºåŠ å¯†ä¿¡æ¯ï¼Œä¸€ç§ç®€å•æœ‰æ•ˆçš„åŠæ³•å°±æ˜¯æŠŠæ¯ä¸ªå­—æ¯éƒ½ç§»åŠ¨å›ºå®šé•¿åº¦çš„ä½ç½®ã€‚
  - ä¾‹å¦‚ï¼ša -> dï¼Œb -> e

```go
package main

import (
 "fmt"
)

func main() {
 c := 'a'
 c = c + 3
 fmt.Printf("%c\n", c)

 if c > 'z' {
  c = c - 26
 }
 fmt.Printf("%c\n", c)
}

```

### å°æµ‹è¯•

- è¿™ä¸ªè¯­å¥çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿc = c - 'a' + â€˜Aâ€™
- å¦‚æœ c æ˜¯ â€˜gâ€™ï¼Œé‚£ä¹ˆcæœ€åçš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ

### ROT13

- ROT13ï¼ˆæ—‹è½¬13ï¼‰æ˜¯å‡¯æ’’å¯†ç åœ¨20ä¸–çºªçš„å˜ä½“ã€‚
  - å®ƒä¼šæŠŠå­—æ¯æ›¿æ¢æˆ+13åçš„å¯¹åº”çš„å­—æ¯ã€‚

### Goçš„å†…ç½®å‡½æ•°

- lenæ˜¯ Go è¯­è¨€çš„ä¸€ä¸ªå†…ç½®å‡½æ•°ã€‚

```go
message := "uv vagreangvbany fcnpr fgngvba"
fmt.Println(len(message))
```

- æœ¬ä¾‹ä¸­lenè¿”å›messageæ‰€å çš„byteæ•°ã€‚
- Goæœ‰å¾ˆå¤šå†…ç½®å‡½æ•°ï¼Œå®ƒä»¬ä¸éœ€è¦import

### UTF-8

- Goä¸­çš„å­—ç¬¦ä¸²æ˜¯ç”¨UTF-8ç¼–ç çš„ï¼ŒUTF-8æ˜¯Unicode CodePointçš„å‡ ç§ç¼–ç ä¹‹ä¸€ã€‚
- UTF-8æ˜¯ä¸€ç§æœ‰æ•ˆç‡çš„å¯å˜é•¿åº¦çš„ç¼–ç ï¼Œæ¯ä¸ªcode pointå¯ä»¥æ˜¯8ä½ã€16ä½æˆ–32ä½çš„ã€‚
- é€šè¿‡ä½¿ç”¨å¯å˜é•¿åº¦ç¼–ç ï¼ŒUTF-8ä½¿å¾—ä»ASCIIçš„è½¬æ¢å˜å¾—ç®€å•æ˜äº†ï¼Œå› ä¸ºASCIIå­—ç¬¦ä¸å…¶UTF-8ç¼–ç çš„å¯¹åº”å­—ç¬¦æ˜¯ç›¸åŒçš„ã€‚
- UTF-8æ˜¯ä¸‡ç»´ç½‘çš„ä¸»è¦å­—ç¬¦ç¼–ç ã€‚å®ƒæ˜¯ç”±Ken Thompsonäº1992å¹´å‘æ˜çš„ï¼Œä»–æ˜¯Goè¯­è¨€çš„è®¾è®¡è€…ä¹‹ä¸€ã€‚

### ROT13

```go
package main

import (
 "fmt"
)

func main() {
 message := "uv vagreangvbany fcnpr fgngvba"

 for i := 0; i < len(message); i++ {
  c := message[i]
  if c >= 'a' && c <= 'z' {
   c = c + 13
   if c > 'z' {
    c = c - 26
   }
  }
  fmt.Printf("%c", c)
 }
}

```

- æœ¬ä¾‹ä¸­ï¼Œç¨‹åºè®¿é—®çš„æ˜¯messageè¿™ä¸ªå­—ç¬¦ä¸²çš„æ¯ä¸ªå­—èŠ‚ï¼ˆ8ä½ï¼‰ï¼Œæ²¡æœ‰è€ƒè™‘å¤šå­—èŠ‚çš„æƒ…å†µï¼ˆ16ã€32ä½ï¼‰ã€‚
- å¦‚ä½•æ”¯æŒè¥¿ç­ç‰™è¯­ã€ä¿„è¯­ã€æ±‰è¯­ç­‰ï¼Ÿ
  - æŠŠå­—ç¬¦è§£ç æˆruneç±»å‹ï¼Œç„¶åå†è¿›è¡Œæ“ä½œã€‚
- ä½¿ç”¨utf-8åŒ…ï¼Œå®ƒæä¾›å¯ä»¥æŒ‰runeè®¡ç®—å­—ç¬¦ä¸²é•¿åº¦çš„æ–¹æ³•ã€‚
- DecodeRuneInString å‡½æ•°ä¼šè¿”å›ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œä»¥åŠå­—ç¬¦æ‰€å çš„å­—èŠ‚æ•°ã€‚
- æ‰€ä»¥Goé‡Œçš„å‡½æ•°å¯ä»¥è¿”å›å¤šä¸ªå€¼ã€‚

```go
package main

import (
 "fmt"
 "unicode/utf8"
)

func main() {
 question := "espaÃ±ol?"
 fmt.Println(len(question), "bytes")
 fmt.Println(utf8.RuneCountInString(question))

 c, size := utf8.DecodeRuneInString(question)
 fmt.Printf("First rune: %c %v bytes\n", c, size)
}

```

### range

- ä½¿ç”¨rangeå…³é”®å­—ï¼Œå¯ä»¥éå†å„ç§é›†åˆã€‚

```go
package main

import (
 "fmt"
)

func main() {
 question := "espaÃ±ol ?"

 for i, c := range question {
  fmt.Printf("%v %c\n", i, c)
 }
  
  for _, c := range question {
  fmt.Printf("%c\n", c)
 }
}

```

### ä½œä¸šé¢˜

1. L fdph, L vdz, L frqtxhuhgï¼Œæ¯ä¸ªå­—æ¯å‘å‰ç§»åŠ¨3ä¸ªä½ç½®ï¼Œèƒ½å¾—åˆ°ä»€ä¹ˆå­—ç¬¦ä¸²ï¼Ÿ

2. æŠŠè¥¿ç­ç‰™è¯­ â€œHola EstaciÃ³n Espacial Internacionalâ€ç”¨ROT13è¿›è¡ŒåŠ å¯†
   1. ä½¿ç”¨rangeå…³é”®å­—
   2. å¸¦é‡éŸ³ç¬¦å·çš„å­—æ¯è¦ä¿ç•™

## åã€ç±»å‹é—´è½¬æ¢

ç±»å‹ä¸èƒ½æ··ç€ç”¨

- è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œä½¿ç”¨+è¿ç®—ç¬¦ï¼š
  - `countdown := "Launch in T minus " + "10 seconds."`
- å¦‚æœæƒ³è¿æ¥å­—ç¬¦ä¸²å’Œæ•°å€¼ï¼Œæ˜¯ä¼šæŠ¥é”™çš„ï¼š
  - `countdown := "Launch in T minus " + 10 + " seconds."`  æŠ¥é”™
- æ•´å‹å’Œæµ®ç‚¹ç±»å‹ä¹Ÿä¸èƒ½æ··ç€ç”¨ï¼š

```go
age := 41
marsDays := 687
earthDays := 365.2425
fmt.Println("I am", age*earthDays/marsDays, "years old on Mars.")  // æŠ¥é”™
```

### å°æµ‹è¯•

- Goè¯­è¨€é‡Œï¼Œâ€œ10â€ â€“ 1è¿™ä¸ªè¡¨è¾¾å¼ä¼šæŠ¥é”™å—ï¼Ÿ

### æ•°å€¼ç±»å‹é—´çš„è½¬æ¢

- ä¸‹ä¾‹ä¸­ï¼Œå¦‚æœæƒ³æŠŠageè½¬åŒ–æˆ æµ®ç‚¹ç±»å‹ï¼Œéœ€è¦ä½¿ç”¨ç›®æ ‡ç±»å‹å°†å…¶â€œåŒ…è£¹â€èµ·æ¥ï¼š

```go
age := 41
marsAge := float64(age)
```

### ä»æµ®ç‚¹ç±»å‹è½¬ä¸ºæ•´æ•°ç±»å‹

- å¯ä»¥ä»æµ®ç‚¹ç±»å‹è½¬åŒ–ä¸ºæ•´æ•°ç±»å‹ï¼Œå°æ•°ç‚¹åè¾¹çš„éƒ¨åˆ†ä¼šè¢«æˆªæ–­ï¼Œè€Œä¸æ˜¯èˆå…¥ï¼š

```go
earthDays := 365.2425
fmt.Println(int(earthDays))
```

- æ— ç¬¦å·å’Œæœ‰ç¬¦å·æ•´æ•°ç±»å‹ä¹‹é—´ä¹Ÿéœ€è¦è½¬æ¢
- ä¸åŒå¤§å°çš„æ•´æ•°ç±»å‹ä¹‹é—´ä¹Ÿéœ€è¦è½¬æ¢

### ç±»å‹è½¬æ¢æ—¶éœ€è¦è°¨æ…

1996å¹´ï¼Œæ— äººé©¾é©¶çš„é˜¿ä¸½äºšå¨œ5å·ç«ç®­åç¦»é£è¡Œè·¯çº¿ï¼Œè§£ä½“ï¼Œå‘å°„åä»…40ç§’çˆ†ç‚¸ã€‚æŠ¥å‘Šçš„åŸå› æ˜¯ä»float64åˆ°int16çš„ç±»å‹è½¬æ¢é”™è¯¯ï¼Œå…¶å€¼è¶…è¿‡äº†int16æ‰€èƒ½å®¹çº³çš„æœ€å¤§å€¼32767ã€‚æœªå¤„ç†çš„æ•…éšœå¯¼è‡´é£è¡Œæ§åˆ¶ç³»ç»Ÿæ²¡æœ‰æ–¹ä½æ•°æ®ï¼Œå¯¼è‡´å…¶åç¦»èˆªå‘ï¼Œè§£ä½“ï¼Œæœ€ç»ˆè‡ªæ¯ã€‚

### ç±»å‹è½¬æ¢æ—¶éœ€è°¨æ…

- â€œç¯ç»•è¡Œä¸ºâ€ï¼š

```go
var bh float64 = 32768
var h = int16(bh)
fmt.Println(h) // -32768
```

- å¯ä»¥é€šè¿‡mathåŒ…æä¾›çš„maxã€minå¸¸é‡ï¼Œæ¥åˆ¤æ–­æ˜¯å¦è¶…è¿‡æœ€å¤§æœ€å°å€¼

```go
var bh float64 = 32768

if bh < math.MinInt16 || bh > math.MaxInt16 {
  // handle out of range value
}
```

### å°æµ‹è¯•

- ä¸‹åˆ—ä»£ç è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ

```go
v := 42
if v >= 0 && v <= math.MaxUint8 {
  v8 := uint8(v)
  fmt.Println("converted:", v8)
}
```

### å­—ç¬¦ä¸²è½¬æ¢

- æƒ³æŠŠruneã€byteè½¬åŒ–ä¸ºstringï¼Œè¯­æ³•æ˜¯ä¸€æ ·çš„ï¼šâ€˜

```go
var pi rune = 960
var alpha rune = 940
var omega rune = 969
var bang byte = 33

fmt.Println(string(pi), string(alpha), string(omega), string(bang))
```

### å­—ç¬¦ä¸²è½¬æ¢

- æƒ³æŠŠæ•°å€¼è½¬åŒ–ä¸ºstringï¼Œå®ƒçš„å€¼å¿…é¡»èƒ½è½¬åŒ–ä¸ºcode pointã€‚
- strconvåŒ…çš„Itoaå‡½æ•°å°±å¯ä»¥åšè¿™ä»¶äº‹:
- Itoaæ˜¯Integer to ASCIIçš„æ„æ€ã€‚
- Unicodeæ˜¯ASCIIçš„è¶…é›†ï¼Œå®ƒä»¬å‰128ä¸ªcode pointsæ˜¯ä¸€æ ·çš„ï¼ˆæ•°å­—ã€è‹±æ–‡å­—æ¯ã€å¸¸ç”¨æ ‡ç‚¹ï¼‰ã€‚

```go
countdown := 10

str := "Launch in T minus " + strconv.Itoa(countdown) + " seconds."
fmt.Println(str)
```

- å¦å¤–ä¸€ç§æŠŠæ•°å€¼è½¬åŒ–ä¸ºstringçš„æ–¹å¼æ˜¯ä½¿ç”¨Sprintfå‡½æ•°ï¼Œå’ŒPrintfç•¥ç±»ä¼¼ï¼Œä½†æ˜¯ä¼šè¿”å›ä¸€ä¸ªstringï¼š

```go
countdown := 9
str := fmt.Sprintf("Launch in T minus %v seconds.", countdown)
fmt.Println(str)
```

- strconvåŒ…é‡Œé¢è¿˜æœ‰ä¸ªAtoiï¼ˆASCII to Integerï¼‰å‡½æ•°ã€‚

- ç”±äºå­—ç¬¦ä¸²é‡Œé¢å¯èƒ½åŒ…å«ä»»æ„å­—ç¬¦ï¼Œæˆ–è€…è¦è½¬æ¢çš„æ•°å­—å­—ç¬¦ä¸²å¤ªå¤§ï¼Œæ‰€ä»¥Atoiå‡½æ•°å¯èƒ½ä¼šå‘ç”Ÿé”™è¯¯ï¼š
  - å¦‚æœerrçš„å€¼ä¸ºnilï¼Œé‚£ä¹ˆå°±ä»£è¡¨æ²¡å‘ç”Ÿé”™è¯¯ã€‚

```go
countdown, err := strconv.Atoi("10")
if err != nil {
  // oh no, something went wrong
  fmt.Println(err.Error())
}
fmt.Println(countdown)
```

### å°æµ‹è¯•

- è¯´å‡ºä¸¤ä¸ªå‡½æ•°ï¼Œå®ƒä»¬å¯ä»¥æŠŠæ•´æ•°ç±»å‹è½¬åŒ–ä¸ºstring

### æç¤º

- Goæ˜¯é™æ€ç±»å‹è¯­è¨€ï¼Œä¸€æ—¦æŸä¸ªå˜é‡è¢«å£°æ˜ï¼Œé‚£ä¹ˆå®ƒçš„ç±»å‹å°±æ— æ³•å†æ”¹å˜äº†ã€‚

### å¸ƒå°”ç±»å‹çš„è½¬æ¢

- Printå®¶æ—çš„å‡½æ•°ï¼Œä¼šæŠŠboolç±»å‹çš„å€¼æ‰“å°æˆtrue/falseçš„æ–‡æœ¬

```go
launch := false

launchText := fmt.Sprintf("%v", launch)
fmt.Println("Ready for launch:", launchText)

var yesNo string
if launch {
  yesNo = "yes"
} else {
  yesNo = "no"
}
fmt.Println("Ready for launch:", yesNo)
```

- æ³¨æ„ï¼šå¦‚æœä½ æƒ³ä½¿ç”¨string(false), int(false)ï¼›bool(1), bool("yes")ç­‰ç±»ä¼¼çš„æ–¹å¼è¿›è¡Œè½¬æ¢ï¼Œé‚£ä¹ˆGoç¼–è¯‘å™¨ä¼šæŠ¥é”™
- æŸäº›è¯­è¨€é‡Œï¼Œç»å¸¸æŠŠ1å’Œ0å½“ä½œtrueå’Œfalseï¼Œä½†æ˜¯åœ¨Goé‡Œé¢ä¸è¡Œã€‚

### å°æµ‹è¯•

- å†™ä¸€ä¸ªç¨‹åºï¼ŒæŠŠå¸ƒå°”ç±»å‹è½¬åŒ–ä¸ºæ•´æ•°ç±»å‹ï¼Œtrue -> 1ï¼Œfalse -> 0

### ä½œä¸šé¢˜

- å†™ä¸€ä¸ªç¨‹åºï¼ŒæŠŠå­—ç¬¦ä¸²è½¬åŒ–ä¸ºå¸ƒå°”ç±»å‹ï¼š
  - â€œtrueâ€, â€œyesâ€, â€œ1â€æ˜¯true
  - â€œfalseâ€, â€œnoâ€, â€œ0â€æ˜¯false
  - é’ˆå¯¹å…¶å®ƒå€¼ï¼Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯

## åä¸€ã€ç¬¬äºŒéƒ¨åˆ†æµ‹è¯•é¢˜

### VigenÃ¨re cipherç»´å‰å°¼äºšåŠ å¯†ç®—æ³•

- ç»´å‰å°¼äºšåŠ å¯†ç®—æ³•æ˜¯å‡¯æ’’åŠ å¯†ç®—æ³•çš„å˜ç§ã€‚
- å‡¯æ’’ç®—æ³•ï¼š
  - ä¹‹å‰è®²çš„å‡¯æ’’ç®—æ³•ä¾‹å­æ˜¯æŠŠå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—æ¯éƒ½å‘åç§»åŠ¨äº†3ä½ã€‚
  - å‡è®¾A=0ï¼ŒB=1 â€¦ Z=25ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬å°±ç”¨D=3æ¥è¡¨ç¤ºå‘åç§»åŠ¨3ä½ã€‚

- ç»´å‰å°¼äºšåŠ å¯†ç®—æ³•ä½¿ç”¨çš„æ˜¯å¯†é’¥ï¼ˆkeywordï¼‰

- å‡è®¾å¯†é’¥æ˜¯ï¼šGOLANG

### ç¬¬1é¢˜

- ç¼–å†™ä¸€ä¸ªç¨‹åºæ¥è§£å¯†ä¸‹é¢ç¬¬ä¸€è¡Œçš„æ–‡å­—ï¼š
  - å®ƒçš„å¯†é’¥å°±æ˜¯GOLANG
  - æ‰€æœ‰å­—æ¯éƒ½æ˜¯å¤§å†™çš„è‹±æ–‡å­—æ¯ã€‚

### ç¬¬2é¢˜

- ç¼–å†™ä¸€ä¸ªç¨‹åºï¼š
  - ä½¿ç”¨ç»´å‰å°¼äºšåŠ å¯†ç®—æ³•æ¥åŠ å¯†ä¿¡æ¯ã€‚
  - å¯†é’¥ä¸ºGOLANG
- å¯èƒ½ç”¨åˆ°çš„å‡½æ•°ï¼š
  - strings.Replace
  - strings.ToUpper

## åäºŒã€å‡½æ•°

### ä¸ºä»€ä¹ˆéœ€è¦å‡½æ•°

- åšä¸€ä»¶äº‹é€šå¸¸éœ€è¦å¾ˆå¤šæ­¥éª¤ï¼Œæ¯ä¸ªæ­¥éª¤å¯ä»¥åˆ†è§£ä¸ºç‹¬ç«‹çš„å‡½æ•°ï¼Œè¿™äº›å‡½æ•°ä»¥åå¯èƒ½ä¼šå¤ç”¨åˆ°ã€‚

### å‡½æ•°å£°æ˜

- Goåœ¨æ ‡å‡†åº“æ–‡æ¡£ä¸­åˆ—å‡ºäº†æ ‡å‡†åº“æ¯ä¸ªåŒ…ä¸­å£°æ˜çš„å‡½æ•°ã€‚
- ä¾‹å¦‚ï¼š
  - randåŒ…çš„Intnï¼šfunc Intn(n int) int
  - å®ƒçš„ç”¨æ³•ï¼šnum := rand.Intn(10)

- ä½¿ç”¨funcå…³é”®å­—å£°æ˜å‡½æ•°

- åœ¨Goé‡Œï¼Œå¤§å†™å­—æ¯å¼€å¤´çš„å‡½æ•°ã€å˜é‡æˆ–å…¶å®ƒæ ‡è¯†ç¬¦éƒ½ä¼šè¢«å¯¼å‡ºï¼Œå¯¹å…¶å®ƒåŒ…å¯ç”¨ã€‚
- å°å†™å­—æ¯å¼€å¤´çš„å°±ä¸è¡Œã€‚

- å½¢å¼å‚æ•°ï¼šparameter
- å®é™…å‚æ•°ï¼šargument

### å‡½æ•°å£°æ˜ â€“ å¤šä¸ªå‚æ•°

- å‡½æ•°çš„å‚æ•°å¯ä»¥æ˜¯å¤šä¸ªï¼š
  - func Unix(sec int64, nsec int64) Time
  - è°ƒç”¨ï¼šfuture := time.Unix(12622780800, 0)

- å‡½æ•°å£°æ˜æ—¶ï¼Œå¦‚æœå¤šä¸ªå½¢å‚ç±»å‹ç›¸åŒï¼Œé‚£ä¹ˆè¯¥ç±»å‹åªå†™ä¸€æ¬¡å³å¯ï¼š
  - func Unix(sec int64, nsec int64) Time
  - func Unix(sec, nsec int64) Time
- è¿™ç§ç®€åŒ–æ˜¯å¯é€‰çš„ã€‚

### å‡½æ•°å£°æ˜ â€“ è¿”å›å¤šä¸ªå€¼

- Goçš„å‡½æ•°å¯ä»¥è¿”å›å¤šä¸ªå€¼ï¼š
  - countdown, err := strconv.Atoi("10")
- è¯¥å‡½æ•°çš„å£°æ˜å¦‚ä¸‹ï¼š
  - func Atoi(s string) (i int, err error)
- å‡½æ•°çš„å¤šä¸ªè¿”å›å€¼éœ€è¦ç”¨æ‹¬å·æ‹¬èµ·æ¥ï¼Œæ¯ä¸ªè¿”å›å€¼åå­—åœ¨å‰ï¼Œç±»å‹åœ¨åã€‚å£°æ˜å‡½æ•°æ—¶å¯ä»¥æŠŠåå­—å»æ‰ï¼Œåªä¿ç•™ç±»å‹ï¼š
  - func Atoi(s string) (int, error)

### å‡½æ•°å£°æ˜ â€“ å¯å˜å‚æ•°å‡½æ•°

- Printlnæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°ï¼Œå®ƒå¯ä»¥æ¥æ”¶ä¸€ä¸ªã€äºŒä¸ªç”šè‡³å¤šä¸ªå‚æ•°ï¼Œå‚æ•°ç±»å‹è¿˜å¯ä»¥ä¸åŒï¼š
  - fmt.Println("Hello, playground")
  - fmt.Println(186, "seconds")
- Printlnçš„å£°æ˜æ˜¯è¿™æ ·çš„ï¼š
  - func Println(a ...interface{}) (n int, err error)
  - â€¦ è¡¨ç¤ºå‡½æ•°çš„å‚æ•°çš„æ•°é‡æ˜¯å¯å˜çš„ã€‚
  - å‚æ•°açš„ç±»å‹ä¸ºinterface{}ï¼Œæ˜¯ä¸€ä¸ªç©ºæ¥å£ã€‚
- â€¦ å’Œç©ºæ¥å£ç»„åˆåˆ°ä¸€èµ·å°±å¯ä»¥æ¥å—ä»»æ„æ•°é‡ã€ç±»å‹çš„å‚æ•°äº†

### å°æµ‹è¯•

1. è°ƒç”¨å‡½æ•°æ—¶ä½¿ç”¨çš„æ˜¯å®å‚è¿˜æ˜¯å½¢å‚ï¼Ÿ
2. è¯¸å¦‚Containså’Œcontainsè¿™ä¸¤ä¸ªå‡½æ•°ä¼šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
3. å‡½æ•°å£°æ˜ä¸­çš„ â€¦ è¡¨ç¤ºä»€ä¹ˆæ„æ€ï¼Ÿ

### ç¼–å†™å‡½æ•°

- ä¾‹å­

```go
package main

import "fmt"

// kelvinToCelsius converts Â°K to Â°C
func kelvinToCelsius(k float64) float64 {
 k -= 273.15
 return k
}

func main() {
 kelvin := 294.0
 celsius := kelvinToCelsius(kelvin)
 fmt.Print(kelvin, "Â° K is ", celsius, "Â° C")
}

```

- å‡½æ•°æŒ‰å€¼ä¼ é€’å‚æ•°
- åŒä¸€ä¸ªåŒ…ä¸­å£°æ˜çš„å‡½æ•°åœ¨è°ƒç”¨å½¼æ­¤æ—¶ä¸éœ€è¦åŠ ä¸ŠåŒ…åã€‚

### å°æµ‹è¯•

- å°†ä»£ç æ‹†åˆ†ä¸ºå‡½æ•°æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ

### ä½œä¸šé¢˜

```go
package main

import "fmt"

// kelvinToCelsius converts Â°K to Â°C
func kelvinToCelsius(k float64) float64 {
 k -= 273.15
 return k
}

func main() {
 kelvin := 294.0
 celsius := kelvinToCelsius(kelvin)
 fmt.Print(kelvin, "Â° K is ", celsius, "Â° C")
}
```

- ä¿®æ”¹è¿™æ®µä»£ç ï¼š
  - å¤ç”¨kelvinToCelsiuså‡½æ•°ï¼Œå°†233Kè½¬åŒ–ä¸º â„ƒã€‚
  - ç¼–å†™celsiusToFahrenheitå‡½æ•°ï¼Œå®ƒå¯å°†æ‘„æ°åº¦è½¬åŒ–ä¸ºåæ°åº¦ã€‚
  - å…¬å¼ä¸º(c x 9.0/5.0) + 32.0
  - ç¼–å†™kelvinToFahrenheitå‡½æ•°ï¼Œçœ‹çœ‹å®ƒèƒ½å¦å°†0Kè½¬åŒ–ä¸ºçº¦-459.67â„‰

## åä¸‰ã€æ–¹æ³•

### å£°æ˜æ–°ç±»å‹

- å…³é”®å­—typeå¯ä»¥ç”¨æ¥å£°æ˜æ–°ç±»å‹ï¼š
  - type celsius float64
  - var temperature celsius = 20
- è™½ç„¶Celsiusæ˜¯ä¸€ç§å…¨æ–°çš„ç±»å‹ï¼Œä½†æ˜¯ç”±äºå®ƒå’Œfloat64å…·æœ‰ç›¸åŒçš„è¡Œä¸ºå’Œè¡¨ç¤ºï¼Œæ‰€ä»¥èµ‹å€¼æ“ä½œèƒ½é¡ºåˆ©æ‰§è¡Œã€‚
- ä¾‹å¦‚åŠ æ³•ç­‰è¿ç®—ï¼Œä¹Ÿå¯ä»¥åƒfloat64é‚£æ ·ä½¿ç”¨ã€‚
- ï¼ˆä¾‹å­ï¼‰

```go
package main

import "fmt"


func main() {
 type celsius float64

 const degrees = 20
 var temperature celsius = degrees

 temperature += 10

 fmt.Println("temperature: ", temperature)
}

```

- ä¸ºä»€ä¹ˆè¦å£°æ˜æ–°ç±»å‹ï¼šæå¤§çš„æé«˜ä»£ç å¯è¯»æ€§å’Œå¯é æ€§
- ä¸åŒçš„ç±»å‹æ˜¯æ— æ³•æ··ç”¨çš„
- ï¼ˆä¾‹å­ï¼‰

```go
type celsius float64

const degrees = 20
var temperature celsius = degrees

temperature += 10

var warmUp float64 = 10
temperature += warmUp // æŠ¥é”™
```

### é€šè¿‡æ–¹æ³•æ·»åŠ è¡Œä¸º

- åœ¨C#ã€Javaé‡Œï¼Œæ–¹æ³•å±äºç±»
- åœ¨Goé‡Œï¼Œå®ƒæä¾›äº†æ–¹æ³•ï¼Œä½†æ˜¯æ²¡æä¾›ç±»å’Œå¯¹è±¡
- Goæ¯”å…¶ä»–è¯­è¨€çš„æ–¹æ³•è¦çµæ´»
- å¯ä»¥å°†æ–¹æ³•ä¸åŒåŒ…ä¸­å£°æ˜çš„ä»»ä½•ç±»å‹ç›¸å…³è”ï¼Œä½†ä¸å¯ä»¥æ˜¯intã€float64ç­‰é¢„å£°æ˜çš„ç±»å‹è¿›è¡Œå…³è”ã€‚

```go
type celsius float64
type kelvin float64

func kelvinToCelsius(k kelvin) celsius {
  return celsius(k - 273.15)
}

func (k kelvin) celsius() celsius { // celsius æ˜¯ kelvin ç±»å‹çš„æ–¹æ³•
  return celsius(k - 273.15)
}
```

- ä¸Šä¾‹ä¸­ï¼Œcelsiusæ–¹æ³•è™½ç„¶æ²¡æœ‰å‚æ•°ã€‚ä½†å®ƒå‰é¢å´æœ‰ä¸€ä¸ªç±»å‹å‚æ•°çš„æ¥æ”¶è€…ã€‚
- æ¯ä¸ªæ–¹æ³•å¯ä»¥æœ‰å¤šä¸ªå‚æ•°ï¼Œä½†åªèƒ½æœ‰ä¸€ä¸ªæ¥æ”¶è€…ã€‚
- åœ¨æ–¹æ³•ä½“ä¸­ï¼Œæ¥æ”¶è€…çš„è¡Œä¸ºå’Œå…¶å®ƒå‚æ•°ä¸€æ ·ã€‚

### æ–¹æ³•è°ƒç”¨

- å˜é‡.æ–¹æ³•()

```go
package main

import "fmt"

func main() {
 var k kelvin = 294.0
  var c celsius
  
  c = kelvinToCelsius(k)
  c = k.celsius()

 fmt.Println("c: ", c)
}

type celsius float64
type kelvin float64

func kelvinToCelsius(k kelvin) celsius {
  return celsius(k - 273.15)
}

func (k kelvin) celsius() celsius { // celsius æ˜¯ kelvin ç±»å‹çš„æ–¹æ³•
  return celsius(k - 273.15)
}
```

### å°æµ‹è¯•

- æ ‡è¯†å‡ºè¿™ä¸ªæ–¹æ³•å£°æ˜ä¸­çš„æ¥æ”¶è€…ï¼šfunc (f fahrenheit) celsius() celsius

### ä½œä¸šé¢˜

- ç¼–å†™ä¸€ä¸ªç¨‹åºï¼š
  - å®ƒåŒ…å«ä¸‰ç§ç±»å‹ï¼šcelsiusã€fahrenheitã€kelvin
  - 3ç§æ¸©åº¦ç±»å‹ä¹‹é—´è½¬æ¢çš„æ–¹æ³•

## åå››ã€ä¸€ç­‰å‡½æ•°

### ä¸€ç­‰å‡½æ•°

- åœ¨Goé‡Œï¼Œå‡½æ•°æ˜¯å¤´ç­‰çš„ï¼Œå®ƒå¯ä»¥ç”¨åœ¨æ•´æ•°ã€å­—ç¬¦ä¸²æˆ–å…¶å®ƒç±»å‹èƒ½ç”¨çš„åœ°æ–¹:
  - å°†å‡½æ•°èµ‹ç»™å˜é‡
  - å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°
  - å°†å‡½æ•°ä½œä¸ºå‡½æ•°çš„è¿”å›ç±»å‹

### å°†å‡½æ•°èµ‹ç»™å˜é‡

```go
package main

import (
  "fmt"
  "math/rand"
)

type kelvin float64

func fakeSensor() kelvin {
  return kelvin(rand.Intn(151) + 150)
}

func realSensor() kelvin {
  return 0
}

func main() {
  sensor := fakeSensor
  fmt.Println(sensor())
  
  sensor = realSensor
  fmt.Println(sensor())
}
```

- å˜é‡sensorå°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸æ˜¯å‡½æ•°æ‰§è¡Œçš„ç»“æœ
- æ— è®ºsensorçš„å€¼æ˜¯fakeSensorè¿˜æ˜¯realSensorï¼Œéƒ½å¯ä»¥é€šè¿‡sensor()æ¥è°ƒç”¨
- sensorè¿™ä¸ªå˜é‡çš„ç±»å‹æ˜¯å‡½æ•°ï¼Œè¯¥å‡½æ•°æ²¡æœ‰å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªkelvinç±»å‹çš„å€¼ã€‚
- æ¢ä¸€ç§å£°æ˜å½¢å¼çš„è¯ï¼š
  - var sensor func() kelvin

### å°æµ‹è¯•

1. å¦‚ä½•åŒºåˆ†â€œå°†å‡½æ•°æœ¬èº«èµ‹ç»™å˜é‡â€å’Œâ€œå°†å‡½æ•°æ‰§è¡Œçš„ç»“æœèµ‹ç»™å˜é‡â€è¿™ä¸¤ç§è¡Œä¸ºï¼Ÿ
2. å¦‚æœå­˜åœ¨ä¸€ä¸ªè¿”å›celsiusæ¸©åº¦çš„groundSensorå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒèµ‹ç»™ä¸Šä¾‹ä¸­çš„sensorå˜é‡å—ï¼Ÿ

### å°†å‡½æ•°ä¼ é€’ç»™å…¶å®ƒå‡½æ•°

- ï¼ˆä¾‹å­ï¼‰

```go
package main

import (
 "fmt"
  "math/rand"
  "time"
)

type kelvin float64

func measureTemperature(samples int, sensor func() kelvin) {
  for i := 0; i < samples; i++ {
    k := sensor()
    fmt.Printf("%vÂ° K\n", k)
    time.Sleep(time.Second)
  }
}

func fakeSensor() kelvin {
  return kelvin(rand.Intn(151) + 150)
}

func main() {
  measureTemperature(3, fakeSensor)
}
```

### å°æµ‹è¯•

- æ‹¥æœ‰å‘å…¶å®ƒå‡½æ•°ä¼ é€’å‡½æ•°çš„èƒ½åŠ›æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ

### å£°æ˜å‡½æ•°ç±»å‹

- ä¸ºå‡½æ•°å£°æ˜ç±»å‹æœ‰åŠ©äºç²¾ç®€å’Œæ˜ç¡®è°ƒç”¨è€…çš„ä»£ç ã€‚
  - ä¾‹å¦‚ï¼štype sensor func() kelvin
  - æ‰€ä»¥ï¼šfunc measureTemperature(samples int, s func() kelvin)
  - å¯ä»¥ç²¾ç®€ä¸ºï¼šfunc measureTemperature(samples int, s sensor)

### å°æµ‹è¯•

- è¯·ä½¿ç”¨å‡½æ•°ç±»å‹é‡å†™ä¸€ä¸‹å‡½æ•°çš„ç­¾åï¼š
- func drawTable(rows int, getRow func(row int) (string, string))

### é—­åŒ…å’ŒåŒ¿åå‡½æ•°

- åŒ¿åå‡½æ•°å°±æ˜¯æ²¡æœ‰åå­—çš„å‡½æ•°ï¼Œåœ¨Goé‡Œä¹Ÿç§°ä½œå‡½æ•°å­—é¢å€¼ã€‚
- å› ä¸ºå‡½æ•°å­—é¢å€¼éœ€è¦ä¿ç•™å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡å¼•ç”¨ï¼Œæ‰€ä»¥å‡½æ•°å­—é¢å€¼éƒ½æ˜¯é—­åŒ…çš„ã€‚
- ï¼ˆä¾‹å­ï¼‰

ä¾‹å­ä¸€ï¼š

```go
package main

import "fmt"

var f = func() {
  fmt.Println("Dress up for the masquerade.")
}

func main() {
  f()
}
```

ä¾‹å­äºŒ

```go
package main

import "fmt"

func main() {
  f := func(message string) {
    fmt.Println(message)
  }
  f("Go to the party.")
}
```

ä¾‹å­ä¸‰

```go
package main

import "fmt"

func main() {
  func() {
    fmt.Println("Functions anonymous")
  }()
}
```

ä¾‹å­å››

```go
package main

import "fmt"

type kelvin float64

// sensor function type
type sensor func() kelvin

func realSensor() kelvin {
  return 0
}

func calibrate(s sensor, offset kelvin) sensor {
  return func() kelvin {
    return s() + offset
  }
}

func main() {
  sensor := calibrate(realSensor, 5)
  fmt.Println(sensor())
}
```

- é—­åŒ…ï¼ˆclosureï¼‰å°±æ˜¯ç”±äºåŒ¿åå‡½æ•°å°é—­å¹¶åŒ…å›´ä½œç”¨åŸŸä¸­çš„å˜é‡è€Œå¾—åçš„ã€‚

ä¾‹å­äº”

```go
package main

import "fmt"

type kelvin float64

func main() {
  var k kelvin = 294.0
  
  sensor := func() kelvin {
    return k
  }
  
  fmt.Println(sensor())
  
  k++
  fmt.Println(sensor())
}
```

### å°æµ‹è¯•

1. åŒ¿åå‡½æ•°åœ¨Goä¸­çš„å¦ä¸€ä¸ªåå­—æ˜¯ä»€ä¹ˆï¼Ÿ
2. é—­åŒ…æä¾›äº†å“ªäº›æ™®é€šå‡½æ•°ä¸å…·å¤‡çš„ç‰¹æ€§ï¼Ÿ

### ä½œä¸šé¢˜

```go
package main

import "fmt"

type kelvin float64

// sensor function type
type sensor func() kelvin

func realSensor() kelvin {
  return 0
}

func calibrate(s sensor, offset kelvin) sensor {
  return func() kelvin {
    return s() + offset
  }
}

func main() {
  sensor := calibrate(realSensor, 5)
  fmt.Println(sensor())
}
```

- ä¿®æ”¹è¿™æ®µç¨‹åºï¼š

1. å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œå¹¶å°†å…¶ç”¨ä½œcalibrateå‡½æ•°çš„offsetå®å‚ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å­—é¢å€¼æ•°å­—5ã€‚åœ¨æ­¤ä¹‹åï¼Œå³ä½¿ä¿®æ”¹å˜é‡ï¼Œè°ƒç”¨sensor()çš„ç»“æœä¹Ÿä»ç„¶ä¸º5ã€‚è¿™æ˜¯å› ä¸ºoffsetå½¢å‚æ¥å—çš„æ˜¯å®å‚çš„å‰¯æœ¬è€Œä¸æ˜¯å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„æŒ‰å€¼ä¼ é€’ã€‚
2. ä½¿ç”¨calibrateå‡½æ•°å’Œä»Šå¤©è®²çš„fakeSensorå‡½æ•°ä»¥åˆ›å»ºæ–°çš„sensorå‡½æ•°ï¼Œç„¶åå¤šæ¬¡è°ƒç”¨è¿™ä¸ªæ–°çš„sensorå‡½æ•°ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦æ¯æ¬¡éƒ½ä¼šè°ƒç”¨fakeSensorå‡½æ•°å¹¶äº§ç”Ÿéšæœºçš„è¯»æ•°ã€‚

## åäº”ã€ç¬¬ä¸‰éƒ¨åˆ†ä¹ é¢˜

### æ¸©åº¦è¡¨

- ç¼–å†™ä¸€ä¸ªæ¸©åº¦è½¬æ¢è¡¨æ ¼ç¨‹åºï¼š

1. ç”»ä¸¤ä¸ªè¡¨æ ¼ï¼š
   1. ç¬¬ä¸€ä¸ªè¡¨æ ¼æœ‰ä¸¤åˆ—ï¼Œç¬¬ä¸€åˆ—æ˜¯æ‘„æ°åº¦ï¼Œç¬¬äºŒåˆ—æ˜¯åæ°åº¦ã€‚
      1. ä»-40â„ƒæ‰“å°åˆ°100â„ƒï¼Œé—´éš”ä¸º5â„ƒï¼Œå¹¶å°†æ‘„æ°åº¦è½¬åŒ–ä¸ºåæ°åº¦ã€‚
   2. ç¬¬äºŒä¸ªè¡¨æ ¼å°±æ˜¯ç¬¬ä¸€ä¸ªè¡¨æ ¼çš„ä¸¤åˆ—äº’æ¢ä¸€ä¸‹ï¼Œä»åæ°åº¦è½¬åŒ–ä¸ºæ‘„æ°åº¦ã€‚
2. è´Ÿè´£ç”»çº¿å’Œå¡«å……å€¼çš„ä»£ç éƒ½åº”è¯¥æ˜¯å¯å¤ç”¨çš„ã€‚ç”»è¡¨æ ¼å’Œè®¡ç®—æ¸©åº¦åº”è¯¥ç”¨ä¸åŒçš„å‡½æ•°åˆ†åˆ«æ¥å®ç°ã€‚
3. å®ç°ä¸€ä¸ªdrawTableå‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªä¸€ç­‰å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè°ƒç”¨è¯¥å‡½æ•°å°±å¯ä»¥ç»˜åˆ¶æ¯ä¸€è¡Œçš„æ¸©åº¦ã€‚ä¼ å…¥ä¸åŒçš„å‡½æ•°å°±å¯ä»¥äº§ç”Ÿä¸åŒçš„è¾“å‡ºæ•°æ®ã€‚

## åå…­ã€æ•°ç»„

### æ•°ç»„

- æ•°ç»„æ˜¯ä¸€ç§å›ºå®šé•¿åº¦ä¸”æœ‰åºçš„å…ƒç´ é›†åˆã€‚

```go
var planets [8]string
```

### è®¿é—®æ•°ç»„å…ƒç´ 

- æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½å¯ä»¥é€šè¿‡[ ]å’Œä¸€ä¸ªä»0å¼€å§‹çš„ç´¢å¼•è¿›è¡Œè®¿é—®ã€‚

```go
package main

import "fmt"

func main() {
 var planets [8]string

 planets[0] = "Mercury"
 planets[1] = "Venus"
 planets[2] = "Earth"

 earth := planets[2]
 fmt.Println(earth)
}

```

- æ•°ç»„çš„é•¿åº¦å¯ç”±å†…ç½®å‡½æ•°lenæ¥ç¡®å®šã€‚

```go
package main

import "fmt"

func main() {
 var planets [8]string

 planets[0] = "Mercury"
 planets[1] = "Venus"
 planets[2] = "Earth"

 earth := planets[2]
 fmt.Println(earth)
  
  fmt.Println(len(planets))
  fmt.Println(planets[3] == "")
}

```

- åœ¨å£°æ˜æ•°ç»„æ—¶ï¼Œæœªè¢«èµ‹å€¼å…ƒç´ çš„å€¼æ˜¯å¯¹åº”ç±»å‹çš„é›¶å€¼ã€‚

### å°æµ‹è¯•

1. å¦‚ä½•æ‰èƒ½è®¿é—®planetsæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Ÿ
2. å¯¹æ–°åˆ›å»ºçš„æ•´æ•°æ•°ç»„æ¥è¯´ï¼Œå…¶å…ƒç´ çš„é»˜è®¤å€¼æ˜¯ä»€ä¹ˆï¼Ÿ

### æ•°ç»„è¶Šç•Œ

- Goç¼–è¯‘å™¨åœ¨æ£€æµ‹åˆ°å¯¹è¶Šç•Œå…ƒç´ çš„è®¿é—®æ—¶ä¼šæŠ¥é”™

```go
package main

func main() {
  var plantes [8]string
  
  planets[8] = "Pluto" // æŠ¥é”™
  pluto := planets[8] // æŠ¥é”™
}
```

- å¦‚æœGoç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶æœªèƒ½å‘ç°è¶Šç•Œé”™è¯¯ï¼Œé‚£ä¹ˆç¨‹åºåœ¨è¿è¡Œæ—¶ä¼šå‡ºç°panic
- Panicä¼šå¯¼è‡´ç¨‹åºå´©æºƒ

```go
package main

import "fmt"

func main() {
  var planets [8]string
  
  i := 8
  planets[i] = "Pluto"
  pluto := planets[i]
  
  fmt.Println(pluto)
}
```

### å°æµ‹è¯•

- è®¿é—®planets[11]ä¼šå¯¼è‡´ç¼–è¯‘æ—¶é”™è¯¯è¿˜æ˜¯è¿è¡Œæ—¶ panicï¼Ÿ

### ä½¿ç”¨å¤åˆå­—é¢å€¼åˆå§‹åŒ–æ•°ç»„

- å¤åˆå­—é¢å€¼ï¼ˆcomposite literalï¼‰æ˜¯ä¸€ç§ç»™å¤åˆç±»å‹åˆå§‹åŒ–çš„ç´§å‡‘è¯­æ³•ã€‚
- Goçš„å¤åˆå­—é¢å€¼è¯­æ³•å…è®¸æˆ‘ä»¬åªç”¨ä¸€æ­¥å°±å®Œæˆæ•°ç»„å£°æ˜å’Œæ•°ç»„åˆå§‹åŒ–ä¸¤æ­¥æ“ä½œï¼š
  - `dwarfs := [5]string{"Ceres", "Pluto", "Haumea", "Makemake", "Eris"}`
- å¯ä»¥åœ¨å¤åˆå­—é¢å€¼é‡Œä½¿ç”¨ â€¦ ä½œä¸ºæ•°ç»„çš„é•¿åº¦ï¼Œè¿™æ ·Goç¼–è¯‘å™¨ä¼šä¸ºä½ ç®—å‡ºæ•°ç»„çš„å…ƒç´ æ•°é‡

```go
package main

import "fmt"

func main() {
  planets := [...]string{
    "Mercury",
    "Venus",
    "Earth",
    "Mars",
    "Jupiter",
    "Saturn",
    "Uranus",
    "Neptune",
  }
  
  fmt.Println(planets)
}
```

- æ— è®ºå“ªç§æ–¹å¼ï¼Œæ•°ç»„çš„é•¿åº¦éƒ½æ˜¯å›ºå®šçš„ã€‚

### éå†æ•°ç»„

- forå¾ªç¯

```go
package main

import "fmt"

func main() {
  dwarfs := [5]string{"Ceres", "Pluto", "Haumea", "Makemake", "Eris"}
  
  for i := 0; i < len(dwarfs); i++ {
    dwarf := dwarfs[i]
    fmt.Println(i, dwarf)
  }
}
```

- ä½¿ç”¨range

```go
package main

import "fmt"

func main() {
  dwarfs := [5]string{"Ceres", "Pluto", "Haumea", "Makemake", "Eris"}
  
  for i, dwarf := range dwarfs {
    fmt.Println(i, dwarf)
  }
}
```

### å°æµ‹è¯•

1. ä½¿ç”¨rangeå…³é”®å­—éå†æ•°ç»„å¯é¿å…å“ªäº›é”™è¯¯ï¼Ÿ
2. ä»€ä¹ˆæƒ…å†µä¸‹ï¼Œä½¿ç”¨forå¾ªç¯æ¯”rangeæ›´åˆé€‚ï¼Ÿ

### æ•°ç»„çš„å¤åˆ¶

- æ— è®ºæ•°ç»„èµ‹å€¼ç»™æ–°çš„å˜é‡è¿˜æ˜¯å°†å®ƒä¼ é€’ç»™å‡½æ•°ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªå®Œæ•´çš„æ•°ç»„å‰¯æœ¬ã€‚

```go
package main

import "fmt"

func main() {
  planets := [...]string{
    "Mercury",
    "Venus",
    "Earth",
    "Mars",
    "Jupiter",
    "Saturn",
    "Uranus",
    "Neptune",
  }
  
  planetsMarkII := planets
  
  planets[2] = "whoops"
  
  fmt.Println(planets)
  fmt.Println(planetsMarkII)
}
```

- æ•°ç»„ä¹Ÿæ˜¯ä¸€ç§å€¼ï¼Œå‡½æ•°é€šè¿‡å€¼ä¼ é€’æ¥æ¥å—å‚æ•°ã€‚æ‰€ä»¥æ•°ç»„ä½œä¸ºå‡½æ•°çš„å‚æ•°å°±éå¸¸ä½æ•ˆã€‚

```go
package main

import "fmt"

// terraform accomplishes nothing
func terraform(planets [8]string) {
  for i := range planets {
    planets[i] = "New " + planets[i]
  }
}

func main() {
  planets := [...]string{
    "Mercury",
    "Venus",
    "Earth",
    "Mars",
    "Jupiter",
    "Saturn",
    "Uranus",
    "Neptune",
  }
 
  terraform(planets)
  fmt.Println(planets)
}
```

- æ•°ç»„çš„é•¿åº¦ä¹Ÿæ˜¯æ•°ç»„ç±»å‹çš„ä¸€éƒ¨åˆ†ã€‚
  - å°è¯•å°†é•¿åº¦ä¸ç¬¦çš„æ•°ç»„ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œå°†ä¼šæŠ¥é”™ã€‚
- å‡½æ•°ä¸€èˆ¬ä½¿ç”¨ slice è€Œä¸æ˜¯æ•°ç»„ä½œä¸ºå‚æ•°ã€‚

### æ•°ç»„çš„æ•°ç»„

```go
package main

import "fmt"

func main() {
  var board [8][8]string
  
  board[0][0] = "r"
  board[0][7] = "r"
  
  for column := range board[1] {
    board[1][column] = "p"
  }
  
  fmt.Print(board)
}
```

### å°æµ‹è¯•

- å¦‚æœæˆ‘ä»¬è¦è®¾è®¡ä¸€ä¸ªæ•°ç‹¬æ¸¸æˆç¨‹åºï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•å£°æ˜9 x 9çš„æ•´æ•°ç½‘æ ¼ï¼Ÿ

### ä½œä¸šé¢˜

```go
package main

import "fmt"

func main() {
  var board [8][8]string
  
  board[0][0] = "r"
  board[0][7] = "r"
  
  for column := range board[1] {
    board[1][column] = "p"
  }
  
  fmt.Print(board)
}
```

1. æ‰©å±•ä¸Šé¢ä¾‹å­çš„ç¨‹åºï¼Œä½¿ç”¨å­—ç¬¦kqrbnpè¡¨ç¤ºä¸Šæ–¹çš„é»‘æ£‹ï¼Œå­—ç¬¦KQRBNPè¡¨ç¤ºä¸‹æ–¹çš„ç™½æ£‹ï¼Œç„¶ååœ¨æ£‹å­çš„èµ·å§‹ä½ç½®æ˜¯æ‰“å°å‡ºæ‰€æœ‰çš„æ£‹å­ã€‚
2. ç¼–å†™ä¸€ä¸ªèƒ½å¤Ÿç¾è§‚çš„æ‰“å°å‡ºæ•´ä¸ªæ£‹ç›˜çš„å‡½æ•°
3. ä½¿ç”¨`[8][8]rune`æ•°ç»„è€Œä¸æ˜¯å­—ç¬¦ä¸²æ¥è¡¨ç¤ºæ£‹

## åä¸ƒã€Sliceï¼ˆåˆ‡ç‰‡ï¼‰

### SliceæŒ‡å‘æ•°ç»„çš„çª—å£

- å‡è®¾planetsæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆplanets[0:4] å°±æ˜¯ä¸€ä¸ªåˆ‡ç‰‡ï¼Œå®ƒåˆ‡åˆ†å‡ºäº†æ•°ç»„é‡Œå‰4ä¸ªå…ƒç´ ã€‚
- åˆ‡åˆ†æ•°ç»„ä¸ä¼šå¯¼è‡´æ•°ç»„è¢«ä¿®æ”¹ï¼Œå®ƒåªæ˜¯åˆ›å»ºäº†æŒ‡å‘æ•°ç»„çš„ä¸€ä¸ªçª—å£æˆ–è§†å›¾ï¼Œè¿™ç§è§†å›¾å°±æ˜¯sliceç±»å‹ã€‚

### åˆ‡åˆ†æ•°ç»„

- Sliceä½¿ç”¨çš„æ˜¯åŠå¼€åŒºé—´
  - ä¾‹å¦‚planets[0:4]ï¼ŒåŒ…å«ç´¢å¼•0ã€1ã€2ã€3å¯¹åº”çš„å…ƒç´ ï¼Œä¸åŒ…æ‹¬ç´¢å¼•4å¯¹åº”çš„å…ƒç´ ã€‚

```go
package main

import "fmt"

func main() {
  planets := [...]string{
    "Mercury",
    "Venus",
    "Earth",
    "Mars",
    "Jupiter",
    "Saturn",
    "Uranus",
    "Neptune",
  }
 
  terrestrial := planets[0:4]
  gasGiants := planets[4:6]
  iceGiants := planets[6:8]
  fmt.Println(terrestrizl, gasGiants, iceGiants)
}
```

### å°æµ‹è¯•

1. åˆ‡åˆ†æ•°ç»„ä¼šäº§ç”Ÿä»€ä¹ˆï¼Ÿ
2. ä½¿ç”¨planets[4:6]åˆ‡åˆ†æ•°ç»„æ—¶ï¼Œç»“æœåŒ…å«å¤šå°‘ä¸ªå…ƒç´ ï¼Ÿ

### Sliceçš„é»˜è®¤ç´¢å¼•

- å¿½ç•¥æ‰sliceçš„èµ·å§‹ç´¢å¼•ï¼Œè¡¨ç¤ºä»æ•°ç»„çš„èµ·å§‹ä½ç½®è¿›è¡Œåˆ‡åˆ†ï¼›
- å¿½ç•¥æ‰sliceçš„ç»“æŸç´¢å¼•ï¼Œç›¸å½“äºä½¿ç”¨æ•°ç»„çš„é•¿åº¦ä½œä¸ºç»“æŸç´¢å¼•ã€‚
- æ³¨æ„ï¼šsliceçš„ç´¢å¼•ä¸èƒ½æ˜¯è´Ÿæ•°ã€‚

```go
package main

import "fmt"

func main() {
  planets := [...]string{
    "Mercury",
    "Venus",
    "Earth",
    "Mars",
    "Jupiter",
    "Saturn",
    "Uranus",
    "Neptune",
  }
 
  terrestrial := planets[:4]
  gasGiants := planets[4:6]
  iceGiants := planets[6:]
  
  allPlenets := planets[:]
  fmt.Println(terrestrizl, gasGiants, iceGiants, allPlanets)
}
```

- å¦‚æœåŒæ—¶çœç•¥æ‰èµ·å§‹å’Œç»“æŸç´¢å¼•ï¼Œé‚£å°±æ˜¯åŒ…å«æ•°ç»„æ‰€æœ‰å…ƒç´ çš„ä¸€ä¸ªsliceã€‚
- åˆ‡åˆ†æ•°ç»„çš„è¯­æ³•ä¹Ÿå¯ä»¥ç”¨äºåˆ‡åˆ†å­—ç¬¦ä¸²

```go
package main

import "fmt"

func main() {
  neptune := "Neptune"
  tune := neptune[3:]
  
  fmt.Println(tune)
  
  neptune = "Poseidon"
  fmt.Println(tune) // å°†åŸæ¥åˆ‡ç‰‡çš„å€¼èµ‹ç»™ä¸€ä¸ªæ–°çš„å€¼ï¼Œå¹¶ä¸ä¼šæ”¹å˜åŸæ¥åˆ‡ç‰‡çš„å€¼
}
```

- â€‹ åˆ‡åˆ†å­—ç¬¦ä¸²æ—¶ï¼Œç´¢å¼•ä»£è¡¨çš„æ˜¯å­—èŠ‚æ•°è€Œé rune çš„æ•°ã€‚

```go
package main

import "fmt"

func main() {
  question := "Â¡QuÃ© pasa!"
  fmt.Println(question[:6])
}
```

### Sliceçš„å¤åˆå­—é¢å€¼

- Goé‡Œé¢å¾ˆå¤šå‡½æ•°éƒ½å€¾å‘äºä½¿ç”¨sliceè€Œä¸æ˜¯æ•°ç»„ä½œä¸ºå‚æ•°ã€‚
- æƒ³è¦è·å¾—ä¸åº•å±‚æ•°ç»„ç›¸åŒå…ƒç´ çš„sliceï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ [:] è¿›è¡Œåˆ‡åˆ†
- åˆ‡åˆ†æ•°ç»„å¹¶ä¸æ˜¯åˆ›å»ºsliceå”¯ä¸€çš„æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥å£°æ˜sliceï¼š
  - ä¾‹å¦‚[]string

```go
package main

import "fmt"

func main() {
  dwarfArray := [...]string{"Ceres", "Pluto", "Haumea", "Makemake", "Eris"}
  
  dwarfSlice := dwarfArray[:]
  
  dwarfs := []string{"Ceres", "Pluto", "Haumea", "Makemake", "Eris"}
  
  fmt.Println(dwarfSlice, dwarfs)
}
```

### å°æµ‹è¯•

- ä½¿ç”¨æ ¼å¼åŒ–åŠ¨è¯%Tæ¯”è¾ƒdwarfArrayå’Œdwarfsçš„ç±»å‹ã€‚

### åˆ‡ç‰‡çš„å¨åŠ›

```go
package main

import "fmt"

// hyperspace removes the space surrounding worlds
func hyperspace(worlds []string) {
  for i := range worlds {
    worlds[i] = strings.TrimSpace(worlds[i])
  }
}

func main() {
  planets := []string{" Venus ", "Earth ", " Mars"}
  hyperspace(planets)
  
  fmt.Println(strings.Join(planets, ""))
}
```

### å°æµ‹è¯•

- è®¿é—®Goæ ‡å‡†åº“ç½‘ç«™ï¼ŒæŸ¥é˜…TrimSpaceå’ŒJoinå‡½æ•°çš„ç›¸å…³æ–‡æ¡£ï¼Œè¯´å‡ºä»–ä»¬çš„ä½œç”¨

### å¸¦æœ‰æ–¹æ³•çš„åˆ‡ç‰‡

- åœ¨Goé‡Œï¼Œå¯ä»¥å°†sliceæˆ–æ•°ç»„ä½œä¸ºåº•å±‚ç±»å‹ï¼Œç„¶åç»‘å®šå…¶å®ƒæ–¹æ³•ã€‚

```go
package main

import (
  "fmt"
  "sort"
)

type StringSlice []string

func (p StringSlice) Sort() {
  
}

func main() {
  planets := []string{
    "Mercury", "Venus", "Earth", "Mars",
    "Jupiter", "Saturn", "Uranus", "Neptune",
  }
  
  sort.StringSlice(planets).Sort()
  fmt.Println(planets)
}
```

### å°æµ‹è¯•

- æ‰§è¡Œä»£ç sort.StringSlice(planets)ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ

### ä½œä¸šé¢˜

- ç¼–å†™ä¸€ä¸ªç¨‹åºï¼š
  - å®ƒé€šè¿‡ç»™å­—ç¬¦ä¸²sliceä¸­æ‰€æœ‰çš„è¡Œæ˜ŸåŠ ä¸Šâ€œNew â€å‰ç¼€æ¥å®Œæˆè¡Œæ˜Ÿçš„åœ°çƒåŒ–å¤„ç†ï¼Œç„¶åä½¿ç”¨è¯¥ç¨‹åºå¯¹Marsã€Uranusã€Neptuneå®è¡Œåœ°çƒåŒ–
  - å¿…é¡»ä½¿ç”¨planetsç±»å‹ï¼Œå¹¶ä¸ºä¹‹å®ç°ç›¸åº”çš„terraformæ–¹æ³•ã€‚

## åå…«ã€æ›´å¤§çš„slice

### appendå‡½æ•°

- appendå‡½æ•°ä¹Ÿæ˜¯å†…ç½®å‡½æ•°ï¼Œå®ƒå¯ä»¥å°†å…ƒç´ æ·»åŠ åˆ°sliceé‡Œé¢ã€‚

```go
package main

import "fmt"

func main() {
  dwarfs := []string{"Ceres", "Pluto", "Haumea", "Makemake", "Eris"}
  
  dwarfs = append(dwarfs, "Orcus")
  
  dwarfs = append(dwarfs, "Salacia", "Quaoar", "Sedna")
  
  fmt.Println(dwarfs)
}
```

### å°æµ‹è¯•

- æ‰§è¡Œä¸Šä¾‹çš„ä»£ç åï¼Œdwarfsåˆ‡ç‰‡æ€»å…±åŒ…å«å¤šå°‘ä¸ªçŸ®è¡Œæ˜Ÿï¼Ÿç”¨ä»€ä¹ˆå‡½æ•°èƒ½å¤Ÿè·çŸ¥è¿™ä¸€ç‚¹ï¼Ÿ

### é•¿åº¦å’Œå®¹é‡ï¼ˆlength & capacityï¼‰

- Sliceä¸­å…ƒç´ çš„ä¸ªæ•°å†³å®šäº†sliceçš„é•¿åº¦ã€‚
- å¦‚æœsliceçš„åº•å±‚æ•°ç»„æ¯”sliceè¿˜å¤§ï¼Œé‚£ä¹ˆå°±è¯´è¯¥sliceè¿˜æœ‰å®¹é‡å¯ä¾›å¢é•¿ã€‚

```go
package main

import "fmt"

// dump slice length, capacity, and contents
func dump(label string, slice []string) {
  fmt.Printf("%v: length %v, capacity %v %v\n", label, len(slice), cap(slice), slice)
}

func main() {
  dwarfs := []string{"Ceres", "Pluto", "Haumea", "Makemake", "Eris"}
  dump("dwarfs", dwarfs)
  dump("dwarfs[1:2]", dwarfs[1:2])
}
```

### å°æµ‹è¯•

- ä¸ºä»€ä¹ˆdwarfs[1:2]è¿™ä¸ªsliceçš„å®¹é‡æ˜¯4ï¼Ÿ

### è¯¦è§£append

```go
package main

import "fmt"

// dump slice length, capacity, and contents
func dump(label string, slice []string) {
  fmt.Printf("%v: length %v, capacity %v %v\n", label, len(slice), cap(slice), slice)
}

func main() {
  planets := []string{
    "Mercury", "Venus", "Earth", "Mars",
    "Jupiter", "Saturn", "Uranus", "Neptune",
  }
  terrestrial := planets[0:4:4]
  worlds := append(terrestrial, "Ceres")
  
  dump("planets", planets) // 8 8
  dump("terrestrial", terrestrial) // 4 4
  dump("worlds", worlds) // 5 8
}
```

### å°æµ‹è¯•

- å¯¹äºä¸Šé¢ä¾‹å­ä¸­çš„dwarfs3è¿™ä¸ªsliceï¼Œå¦‚æœæˆ‘ä»¬ä¿®æ”¹å®ƒçš„ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆdwarfs2å’Œdwarfs1è¿™ä¸¤ä¸ªåˆ‡ç‰‡ä¼šå‘ç”Ÿå˜åŒ–å—ï¼Ÿdwarfs3[1] = â€œPluto!â€

### ä¸‰ä¸ªç´¢å¼•çš„åˆ‡åˆ†æ“ä½œ

- Go 1.2ä¸­å¼•å…¥äº†èƒ½å¤Ÿé™åˆ¶æ–°å»ºåˆ‡ç‰‡å®¹é‡çš„ä¸‰ç´¢å¼•åˆ‡åˆ†æ“ä½œã€‚

```go
package main

import "fmt"

// dump slice length, capacity, and contents
func dump(label string, slice []string) {
  fmt.Printf("%v: length %v, capacity %v %v\n", label, len(slice), cap(slice), slice)
}

func main() {
  dwarfs := []string{"Ceres", "Pluto", "Haumea", "Makemake", "Eris"}
  dump("dwarfs", dwarfs)
  dump("dwarfs[1:2]", dwarfs[1:2])
}
```

### å°æµ‹è¯•

- ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨ä¸‰ç´¢å¼•çš„åˆ‡ç‰‡æ“ä½œï¼Ÿ

### ä½¿ç”¨makeå‡½æ•°å¯¹sliceè¿›è¡Œé¢„åˆ†é…

- å½“sliceçš„å®¹é‡ä¸è¶³ä»¥æ‰§è¡Œappendæ“ä½œæ—¶ï¼ŒGoå¿…é¡»åˆ›å»ºæ–°æ•°ç»„å¹¶å¤åˆ¶æ—§æ•°ç»„ä¸­çš„å†…å®¹ã€‚
- ä½†é€šè¿‡å†…ç½®çš„makeå‡½æ•°ï¼Œå¯ä»¥å¯¹sliceè¿›è¡Œé¢„åˆ†é…ç­–ç•¥ã€‚
  - å°½é‡é¿å…é¢å¤–çš„å†…å­˜åˆ†é…å’Œæ•°ç»„å¤åˆ¶æ“ä½œã€‚

```go
package main

import "fmt"

// dump slice length, capacity, and contents
func dump(label string, slice []string) {
  fmt.Printf("%v: length %v, capacity %v %v\n", label, len(slice), cap(slice), slice)
}

func main() {
  dwarfs := make([]string, 0, 10)
  dump("dwarfs", dwarfs)
  
  dwarfs = append(dwarfs, "Ceres", "Pluto", "Haumea", "Makemake", "Eris")
  
  dump("dwarfs", dwarfs)
}
```

### å°æµ‹è¯•

- ä½¿ç”¨makeå‡½æ•°åˆ›å»ºsliceæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ

### å£°æ˜å¯å˜å‚æ•°çš„å‡½æ•°

- å£°æ˜Printfã€appendè¿™æ ·çš„å¯å˜å‚æ•°å‡½æ•°ï¼Œéœ€è¦åœ¨å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°å‰é¢åŠ ä¸Š â€¦ ç¬¦å·ã€‚

```go
package main

import "fmt"

func terraform(prefix string, worlds ...string) []string {
  newWorlds := make([]string, len(worlds))
  
  for i := range worlds {
    newWorlds[i] = prefix + " " + worlds[i]
  }
  return newWorlds
}

func main() {
  twoWorlds := terraform("New", "Venus", "Mars")
  fmt.Println(twoWorlds)
  
  planets := []string{"Venus", "Mars", "Jupiter"}
  newPlanets := terraform("New", planets...)
  fmt.Println(newPlanets)
}
```

å°æµ‹è¯•

- å…³äº â€¦ ç¬¦å·ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬è§è¿‡çš„3ç§ç”¨æ³•åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ

ä½œä¸š

- ç¼–å†™ä¸€ä¸ªç¨‹åºï¼š
  - é€šè¿‡å¾ªç¯ï¼ŒæŒç»­çš„å°†å…ƒç´ è¿½åŠ åˆ°sliceé‡Œ
  - åœ¨sliceå®¹é‡å‘ç”Ÿå˜åŒ–çš„æ—¶å€™æ‰“å°å‡ºå®ƒçš„å®¹é‡
  - è¯·åˆ¤æ–­append å‡½æ•°åœ¨åº•å±‚æ•°ç»„çš„ç©ºé—´è¢«å¡«æ»¡ä¹‹åï¼Œæ˜¯å¦ä¼šå°†æ•°ç»„çš„å®¹é‡å¢åŠ ä¸€å€ï¼Ÿ

## åä¹ã€Map

### map

- mapæ˜¯Goæä¾›çš„å¦å¤–ä¸€ç§é›†åˆï¼š
  - å®ƒå¯ä»¥å°†keyæ˜ å°„åˆ°valueã€‚
  - å¯å¿«é€Ÿé€šè¿‡keyæ‰¾åˆ°å¯¹åº”çš„value
  - å®ƒçš„keyå‡ ä¹å¯ä»¥æ˜¯ä»»ä½•ç±»å‹

### å£°æ˜map

- å£°æ˜mapï¼Œå¿…é¡»æŒ‡å®škeyå’Œvalueçš„ç±»å‹ï¼š`map [string] int`

```go
package main

import "fmt"

func main() {
  temperature := map[string]int{
    "Earth": 15,
    "Mars": -65,
  }
  
  temp := temperature["Earth"]
  fmt.Printf("On average the Earth is %vÂ° C.\n", temp)
  
  temperature["Earth"] = 16
  temperature["Venus"] = 464
  
  fmt.Println(temperature)
  
  moon := temperature["Moon"]
  fmt.Println(moon) // è¿”å›å¯¹åº”çš„é›¶å€¼
}
```

### é€—å·ä¸okå†™æ³•

```go
package main

import "fmt"

func main() {
  temperature := map[string]int{
    "Earth": 15,
    "Mars": -65,
  }
  
  temp := temperature["Earth"]
  fmt.Printf("On average the Earth is %vÂ° C.\n", temp)
  
  temperature["Earth"] = 16
  temperature["Venus"] = 464
  
  fmt.Println(temperature)
  
  moon := temperature["Moon"]
  fmt.Println(moon) // è¿”å›å¯¹åº”çš„é›¶å€¼
  
  if moon, ok := temperature["Moon"]; ok {
    fmt.Printf("On average the moon is %vÂ° C.\n", moon)
  } else {
    fmt.Println("Where is the moon?")
  }
}
```

### å°æµ‹è¯•

1. å¦‚æœä½ è¦å£°æ˜ä¸€ä¸ªkeyä¸º64ä½æµ®ç‚¹æ•°ï¼Œvalueä¸ºæ•´æ•°çš„mapï¼Œé‚£ä¹ˆåº”è¯¥ä½¿ç”¨ä»€ä¹ˆç±»å‹ï¼Ÿ
2. å¦‚æœä½ ä¿®æ”¹ä¸Šä¾‹çš„ä»£ç ï¼Œå°†key â€œMoonâ€çš„å€¼è®¾ä¸º0ï¼Œé‚£ä¹ˆä½¿ç”¨ é€—å·ä¸okè¯­æ³•å°†äº§ç”Ÿä»€ä¹ˆç»“æœï¼Ÿ

### mapä¸ä¼šè¢«å¤åˆ¶

- æ•°ç»„ã€intã€float64ç­‰ç±»å‹åœ¨èµ‹å€¼ç»™æ–°å˜é‡æˆ–ä¼ é€’è‡³å‡½æ•°/æ–¹æ³•çš„æ—¶å€™ä¼šåˆ›å»ºç›¸åº”çš„å‰¯æœ¬
- ä½†mapä¸ä¼š

```go
package main

import "fmt"

func main() {
  planets := map[string]string {
    "Earth": "Sector ZZ9",
    "Mars": "Sector  ZZ9",
  }
  
  planetsMarkII := planets
  planets["Earth"] = "whoops"
  
  fmt.Println(planets)
  fmt.Println(planetsMarkII)
  
  delete(planets, "Earth")
  fmt.Println(planetsMarkII)
  fmt.Println(planets)
}
```

### å°æµ‹è¯•

- åœ¨ä¸Šä¾‹ä¸­ï¼Œä¸ºä»€ä¹ˆå¯¹planetsä¿®æ”¹ä¼šåæ˜ åœ¨planetMarkIIä¸­ï¼Ÿ
- å†…ç½®çš„deleteå‡½æ•°æœ‰ä»€ä¹ˆç”¨ï¼Ÿ

### ä½¿ç”¨makeå‡½æ•°å¯¹ map è¿›è¡Œé¢„åˆ†é…

- é™¤éä½ ä½¿ç”¨å¤åˆå­—é¢å€¼æ¥åˆå§‹åŒ–mapï¼Œå¦åˆ™å¿…é¡»ä½¿ç”¨å†…ç½®çš„makeå‡½æ•°æ¥ä¸ºmapåˆ†é…ç©ºé—´ã€‚
- åˆ›å»ºmapæ—¶ï¼Œmakeå‡½æ•°å¯æ¥å—ä¸€ä¸ªæˆ–ä¸¤ä¸ªå‚æ•°
  - ç¬¬äºŒä¸ªå‚æ•°ç”¨äºä¸ºæŒ‡å®šæ•°é‡çš„keyé¢„å…ˆåˆ†é…ç©ºé—´
- ä½¿ç”¨makeå‡½æ•°åˆ›å»ºçš„mapçš„åˆå§‹é•¿åº¦ä¸º0

```go
package main

import "fmt"

func main() {
  temperature := make(map[float64]int, 8)
  
  fmt.Println(temperature)
  fmt.Println(len(temperature))
}
```

### ä½¿ç”¨mapä½œè®¡æ•°å™¨

```go
package main

import "fmt"

func main() {
  temperatures := []float64{
    -28.0, 32.0, -31.0, -29.0, -23.0, -29.0, -28.0, -33.0,
  }
  
  frequency := make(map[float64]int)
  
  for _, t := range temperatures {
    frequency[t]++
  }
  
  for t, num := range frequency {
    fmt.Printf("%+.2f occurs %d times\n", t, num)
  }
}
```

### å°æµ‹è¯•

- ä½¿ç”¨rangeå…³é”®å­—éå†mapçš„æ—¶å€™ï¼Œå®ƒä¼šä¸ºä¸¤ä¸ªå˜é‡æä¾›ä»€ä¹ˆæ•°æ®ï¼Ÿ

### ä½¿ç”¨mapå’Œsliceå®ç°æ•°æ®åˆ†ç»„

```go
package main

import (
 "fmt"
  "math"
)

func main() {
  temperatures := []float64{
    -28.0, 32.0, -31.0, -29.0, -23.0, -29.0, -28.0, -33.0,
  }
  
  groups := make(map[float64][]float64)
  
  for _, t := range temperatures {
    g := math.Trunc(t/10) * 10
    groups[g] = append(groups[g], t)
  }
  
  for g, temperatures := range groups {
    fmt.Printf("%v: %v\n", g, temperatures)
  }
}
```

### å°æµ‹è¯•

- å£°æ˜`var groups map[string][]int`ä¸­çš„keyå’Œvalueéƒ½æ˜¯ä»€ä¹ˆç±»å‹ï¼Ÿ

### å°†mapç”¨ä½œset

- Setè¿™ç§é›†åˆä¸æ•°ç»„ç±»ä¼¼ï¼Œä½†å…ƒç´ ä¸ä¼šé‡å¤
- Goè¯­è¨€é‡Œæ²¡æœ‰æä¾›seté›†åˆ

```go
package main

import "fmt"

func main() {
  var temperatures = []float64{
    -28.0, 32.0, -31.0, -29.0, -23.0, -29.0, -28.0, -33.0,
  }
  
  set := make(map[float64]bool)
  for _, t := range temperatures {
    set[t] = true
  }
  
  if set[-28.0] {
    fmt.Println("set member")
  }
  
  fmt.Println(set)
  
  unique := make([]float64, 0, len(set))
  for t := range set {
    unique = append(unique, t)
  }
  sort.Float64s(unique)
  
  fmt.Println(unique)
}
```

### å°æµ‹è¯•

- å¯¹äºä¸Šé¢ä¾‹å­ä¸­çš„seté›†åˆï¼Œæˆ‘ä»¬å¦‚ä½•åˆ¤æ–­32.0æ˜¯å¦æ˜¯å®ƒçš„æˆå‘˜ï¼Ÿ

### ä½œä¸šé¢˜

- ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼š
  - å®ƒå¯ä»¥ç»Ÿè®¡æ–‡æœ¬å­—ç¬¦ä¸²ä¸­ä¸åŒå•è¯çš„å‡ºç°é¢‘ç‡ï¼Œå¹¶è¿”å›ä¸€ä¸ªè¯é¢‘mapã€‚
  - è¯¥å‡½æ•°éœ€è¦å°†æ–‡æœ¬è½¬æ¢ä¸ºå°å†™å­—æ¯å¹¶ç§»é™¤åŒ…å«çš„æ ‡ç‚¹ç¬¦å·
  - stringsåŒ…ä¸­çš„Fieldsã€ToLowerã€Trimå‡½æ•°åº”è¯¥å¯¹æ­¤æœ‰æ‰€å¸®åŠ©
  - ä½¿ç”¨è¯¥å‡½æ•°ç»Ÿè®¡ä¸‹æ–‡ä¸­å„å•è¯å‡ºç°çš„é¢‘ç‡ï¼Œæ‰“å°å‡ºç°ä¸æ­¢ä¸€æ¬¡çš„å•è¯å’Œè¯é¢‘ï¼šAs far as eye could reach he saw nothing but the stems of the great plants about him receding inthe violet shade, and far overhead the multiple transparency of huge leaves filtering the sunshineto the solemn splendour of twilight in which he walked. Whenever he felt able he ran again; theground continued soft and springy, covered with the same resilient weed which was the firstthing his hands had touched in Malacandra. Once or twice a small red creature scuttled across hispath, but otherwise there seemed to be no life stirring in the wood; nothing to fearâ€”except thefact of wandering unprovisioned and alone in a forest of unknown vegetation thousands ormillions of miles beyond the reach or knowledge of man.

## äºŒåã€ç¬¬å››éƒ¨åˆ†ä¹ é¢˜

- å¼€å¤©è¾Ÿåœ°
  - è§‚å¯Ÿä¸–ç•Œ
  - æ¿€æ´»ç»†èƒ
- é€‚è€…ç”Ÿå­˜
  - å­˜æ´»è¿˜æ˜¯æ­»äº¡
  - ç»Ÿè®¡é‚»è¿‘ç»†èƒ
  - æ¸¸æˆé€»è¾‘
- å¹³è¡Œä¸–ç•Œ

## äºŒåä¸€ã€ç»“æ„

### ç»“æ„ç±»å‹ï¼ˆstructï¼‰

- ä¸ºäº†å°†åˆ†æ•£çš„é›¶ä»¶ç»„æˆä¸€ä¸ªå®Œæ•´çš„ç»“æ„ä½“ï¼ŒGoæä¾›äº†structç±»å‹ã€‚
- structå…è®¸ä½ å°†ä¸åŒç±»å‹çš„ä¸œè¥¿ç»„åˆåœ¨ä¸€èµ·ã€‚
- å£°æ˜ç»“æ„

```go
package main

func distance(lat1, long1, lat2, long2 float64) float64 {
  return 0.0
}

func main() {
  var curiosity struct {
    lat float64
    long float64
  }
  
  curiosity.lat = -4.5895
  curiosity.long = 137.4417
  
  fmt.Println(curiosity.lat, curiosity.long)
  fmt.Println(curiosity)
}
```

### å°æµ‹è¯•

1. ä¸ç‹¬ç«‹çš„å˜é‡ç›¸æ¯”ï¼Œä½¿ç”¨structçš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ
2. ä¸Šä¾‹ä¸­ï¼Œå¦‚æœcuriosityæœ‰ä¸€ä¸ªæµ·æ‹”ï¼ˆaltitudeï¼‰å­—æ®µï¼Œé‚£ä¹ˆä½ å¦‚ä½•ç»™å®ƒèµ‹å€¼ä¸º-4400ï¼Ÿ

### é€šè¿‡ç±»å‹å¤ç”¨ç»“æ„ä½“

```go
package main

func distance(loc1, loc2 location) dis {
  return dis{0.0, 0.0}
}

type location struct {
  lat float64
  long float64
}

// type dis location

type dis struct {
  lat float64
  long float64
}

func main() {
  //var curiosity struct {
   // lat float64
  //  long float64
  //}
  
  //type location struct {
    //lat float64
   // long float64
 // }
  
  var spirit location
  spirit.lat = -14.5684
  spirit.long = 175.472636
  
  var opportunity location
  opportunity.lat = -1.9462
  opportunity.long = 354.4734 
  
  fmt.Println(spirit, opportunity)
}
```

### å°æµ‹è¯•

- ä¿®æ”¹ä¸Šé¢ä¾‹å­çš„ä»£ç ï¼Œæ”¹ç”¨locationç±»å‹è¡¨ç¤ºå¥½å¥‡å·ç«æ˜Ÿæ¢æµ‹å™¨çš„ä½ç½®

### é€šè¿‡å¤åˆå­—é¢å€¼åˆå§‹åŒ–struct

- ä¸¤ç§å½¢å¼ï¼š
  - é€šè¿‡æˆå¯¹çš„å­—æ®µå’Œå€¼è¿›è¡Œåˆå§‹åŒ–
  - æŒ‰å­—æ®µå®šä¹‰çš„é¡ºåºè¿›è¡Œåˆå§‹åŒ–

```go
package main

import "fmt"

func main() {
  type location struct {
    lat, long float64
  }
  
  opportunity := location{lat: -1.9462, long: 354.4734}
  fmt.Println(opportunity)
  
  insight := location{lat: 4.5, long: 135.9}
  fmt.Println(insight)
  
  spirit := location{-14.5684, 175.472636}
  fmt.Println(spirit)
}
```

- æ‰“å°struct

```go
pakcage main

import "fmt"

func main() {
  type location struct {
    lat, long float64
  }
  
  curiosity := location{-4.5859, 137.4417}
  fmt.Printf("%v\n", curiosity)
  fmt.Printf("%+v\n", curiosity)
}
```

- %vï¼Œæ‰“å°å‡º{-4.5895 137.4417}
- %+vï¼Œæ‰“å°å‡º{lat:-4.5895 long:137.4417}

### å°æµ‹è¯•

- ä¸åªç»™å®šå€¼çš„åˆå§‹åŒ–æ–¹å¼ç›¸æ¯”ï¼Œæˆå¯¹ç»™å®šå­—æ®µå’Œå€¼çš„åˆå§‹åŒ–æ–¹å¼æœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ

### structçš„å¤åˆ¶

```go
pakcage main

import "fmt"

func main() {
  type location struct {
    lat, long float64
  }
  
  bradbury := location{-4.5859, 137.4417}
  curiosity := bradbury
  
  curiosity.long += 0.0106
  
  fmt.Println(bradbury, curiosity)
}
```

### å°æµ‹è¯•

- å¦‚æœå°†curiosityå˜é‡ä¼ é€’ç»™å‡½æ•°ï¼Œå¹¶åœ¨å‡½æ•°ä¸­å¯¹latå’Œlongå­—æ®µè¿›è¡Œä¿®æ”¹ï¼Œé‚£ä¹ˆè°ƒç”¨è€…æ˜¯å¦ä¼šçœ‹åˆ°è¿™äº›å˜åŒ–ï¼Ÿ

### ç”±ç»“æ„ä½“ç»„æˆçš„slice

```go
package main

import "fmt"

func main() {
  type location struct {
    name string
    lat float64
    long float64
  }
  
  lats := []float64{-4.5859, -14.5684, -1.9462}
  longs := []float64{137.4417, 175.472636, 354.4734}
  
  locations := []location{
    {name: "Bradbury Landing", lat: -4.5859, long: 137.4417},
    {name: "Columbia Memorial Station", lat: -14.5684, long: 175.472636},
    {name: "Challenger Memorial Station", lat: -1.9462, long: 354.4734},
  }
  
  fmt.Println(lats, longs, locations)
}
```

### å°æµ‹è¯•

- ä½¿ç”¨å¤šä¸ªç›¸äº’å…³è”çš„sliceæœ‰ä»€ä¹ˆåå¤„ï¼Ÿ

### å°†structç¼–ç ä¸ºJSON

- JSONï¼ˆJavaScript Object Notationï¼ŒJavaScriptå¯¹è±¡è¡¨ç¤ºæ³•ï¼‰

- å¸¸ç”¨äºWeb API
- jsonåŒ…çš„Marshalå‡½æ•°å¯ä»¥å°†structä¸­çš„æ•°æ®è½¬åŒ–ä¸ºJSONæ ¼å¼ã€‚

```go
package main

import (
  "encoding/json"
  "fmt"
  "os"
)

func main() {
  type location struct {
    Lat, Long, float64
  }
  
  curiosity := location{-4.5895, 137.4417}
  
  bytes, err := json.Marshal(curiosity)
  exitOnError(err)
  
  fmt.Println(string(bytes))
}

// exitOnError prints any errors and exits.
func exitOnError(err error) {
  if err != nil {
    fmt.Println(err)
    os.Exit(1)
  }
}
```

- Marshalå‡½æ•°åªä¼šå¯¹structä¸­è¢«å¯¼å‡ºçš„å­—æ®µè¿›è¡Œç¼–ç ã€‚

### å°æµ‹è¯•

- JSONä»£è¡¨ä»€ä¹ˆæ„æ€ï¼Ÿ

### ä½¿ç”¨structæ ‡ç­¾æ¥è‡ªå®šä¹‰JSON

- Goè¯­è¨€ä¸­çš„jsonåŒ…è¦æ±‚structä¸­çš„å­—æ®µå¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œç±»ä¼¼CamelCaseé©¼å³°å‹å‘½åè§„èŒƒã€‚

- ä½†æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦snake_caseè›‡å½¢å‘½åè§„èŒƒï¼Œé‚£ä¹ˆè¯¥æ€ä¹ˆåŠï¼Ÿ
- å¯ä»¥ä¸ºå­—æ®µæ³¨æ˜æ ‡ç­¾ï¼Œä½¿å¾—jsonåŒ…åœ¨è¿›è¡Œç¼–ç çš„æ—¶å€™èƒ½å¤ŸæŒ‰ç…§æ ‡ç­¾é‡Œçš„æ ·å¼ä¿®æ”¹å­—æ®µåã€‚

```go
package main

import (
  "encoding/json"
  "fmt"
  "os"
)

func main() {
  type location struct {
    Lat float64 `json: "latitude"`
    Long, float64 `json: "longitude"`
  }
  
  curiosity := location{-4.5895, 137.4417}
  
  bytes, err := json.Marshal(curiosity)
  exitOnError(err)
  
  fmt.Println(string(bytes))
}

// exitOnError prints any errors and exits.
func exitOnError(err error) {
  if err != nil {
    fmt.Println(err)
    os.Exit(1)
  }
}
```

### å°æµ‹è¯•

- ä¸ºä»€ä¹ˆåœ¨ç¼–ç JSONæ•°æ®çš„æ—¶å€™ï¼ŒLatå’ŒLongå­—æ®µå¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Ÿ

### ä½œä¸šé¢˜

- ç¼–å†™ä¸€ä¸ªç¨‹åºï¼š
  - èƒ½å¤Ÿä»¥JSONæ ¼å¼æ‰“å°å‡º ä¸Šé¢ä¾‹å­ä¸­3å° æ¢æµ‹å™¨çš„ç€é™†ç‚¹ã€‚
  - è¢«æ‰“å°çš„JSONæ•°æ®å¿…é¡»åŒ…å«æ¯ä¸ªç€é™†ç‚¹çš„åç§°ï¼Œå¹¶ä½¿ç”¨ä¸Šé¢ä¾‹å­ä¸­å±•ç¤ºçš„structæ ‡ç­¾ç‰¹æ€§ã€‚
  - è¯·ä½¿ç”¨jsonåŒ…ä¸­çš„MarshalIndentå‡½æ•°è®©æ‰“å°è¾“å‡ºå˜å¾—æ›´åŠ ç¾è§‚å’Œæ˜“è¯»ã€‚

## äºŒåäºŒã€Goè¯­è¨€æ²¡æœ‰class

### Goè¯­è¨€é‡Œæ²¡æœ‰class

- Goå’Œå…¶å®ƒç»å…¸è¯­è¨€ä¸åŒï¼Œå®ƒæ²¡æœ‰classï¼Œæ²¡æœ‰å¯¹è±¡ï¼Œä¹Ÿæ²¡æœ‰ç»§æ‰¿ã€‚
- ä½†æ˜¯Goæä¾›äº†structå’Œæ–¹æ³•ã€‚

### å°†æ–¹æ³•å…³è”åˆ°struct

- æ–¹æ³•å¯ä»¥è¢«å…³è”åˆ°ä½ å£°æ˜çš„ç±»å‹ä¸Š

```go
package main

import "fmt"

// coordinate in degrees, minutes, seconds in a N/S/E/W hemisphere.
type coordinate struct {
  d, m, s float64
  h rune
}

// decimal converts a d/m/s coordinate to decimal degrees.
func (c coordinate) decimal() float64 {
  sign := 1.0
  switch c.h {
  case 'S', 'W', 's', 'w':
    sign = -1
  }
  return sign * (c.d + c.m/60 + c.s/3600)
}

func main() {
  // Bradbury Landing: 4Â°35'22.2" S, 137Â°26â€˜30.1â€œ E
  lat := coordinate{4, 35, 22.2, 'S'}
  long := coordinate{137, 26, 30.12, 'E'}
  
  fmt.Println(lat.decimal(), long.decimal())
}
```

### å°æµ‹è¯•

- ä¸Šä¾‹ä¸­ï¼Œdecimalæ–¹æ³•çš„æ¥æ”¶è€…æ˜¯è°ï¼Ÿ

### æ„é€ å‡½æ•°

- å¯ä»¥ä½¿ç”¨structå¤åˆå­—é¢å€¼æ¥åˆå§‹åŒ–ä½ æ‰€è¦çš„æ•°æ®ã€‚
- ä½†å¦‚æœstructåˆå§‹åŒ–çš„æ—¶å€™è¿˜è¦åšå¾ˆå¤šäº‹æƒ…ï¼Œé‚£å°±å¯ä»¥è€ƒè™‘å†™ä¸€ä¸ªæ„é€ ç”¨çš„å‡½æ•°ã€‚

```go
package main

import "fmt"

// coordinate in degrees, minutes, seconds in a N/S/E/W hemisphere.
type coordinate struct {
  d, m, s float64
  h rune
}

// decimal converts a d/m/s coordinate to decimal degrees.
func (c coordinate) decimal() float64 {
  sign := 1.0
  switch c.h {
  case 'S', 'W', 's', 'w':
    sign = -1
  }
  return sign * (c.d + c.m/60 + c.s/3600)
}

type location struct {
  lat, long float64
}

// newLocation from latitude, longitude d/m/s coordinates.
func newLocation(lat, long, coordinate) location {
  return location{lat.decimal(), long.decimal()}
}

func main() {
  // Bradbury Landing: 4Â°35'22.2" S, 137Â°26â€˜30.1â€œ E
  lat := coordinate{4, 35, 22.2, 'S'}
  long := coordinate{137, 26, 30.12, 'E'}
  
  fmt.Println(lat.decimal(), long.decimal())
  
  // curiosity := location{lat.decimal(), long.decimal()}
  curiosity := newLocation(lat, long)
  
  fmt.Println(curiosity)
}
```

- Goè¯­è¨€æ²¡æœ‰ä¸“ç”¨çš„æ„é€ å‡½æ•°ï¼Œä½†ä»¥newæˆ–è€…Newå¼€å¤´çš„å‡½æ•°ï¼Œé€šå¸¸æ˜¯ç”¨æ¥æ„é€ æ•°æ®çš„ã€‚ä¾‹å¦‚newPerson()ï¼ŒNewPerson()

### Newå‡½æ•°

- æœ‰ä¸€äº›ç”¨äºæ„é€ çš„å‡½æ•°çš„åç§°å°±æ˜¯Newï¼ˆä¾‹å¦‚errorsåŒ…é‡Œé¢çš„Newå‡½æ•°ï¼‰ã€‚
- è¿™æ˜¯å› ä¸ºå‡½æ•°è°ƒç”¨æ—¶ä½¿ç”¨åŒ…å.å‡½æ•°åçš„å½¢å¼ã€‚
- å¦‚æœè¯¥å‡½æ•°å«NewErrorï¼Œé‚£ä¹ˆè°ƒç”¨çš„æ—¶å€™å°±æ˜¯errors.NewError()ï¼Œè¿™å°±ä¸å¦‚errors.New()ç®€æ´

### å°æµ‹è¯•

- å¦‚æœä½ æƒ³æ„å»ºä¸€ä¸ªUniverseç±»å‹çš„å˜é‡ï¼Œé‚£ä¹ˆä½ å¦‚ä½•ä¸ºè¯¥å‡½æ•°å‘½åï¼Ÿ

### classçš„æ›¿ä»£æ–¹æ¡ˆ

- Goè¯­è¨€æ²¡æœ‰classï¼Œä½†ä½¿ç”¨structå¹¶é…å¤‡å‡ ä¸ªæ–¹æ³•ä¹Ÿå¯ä»¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœã€‚

```go
package main

import (
  "fmt"
  "math"
)

type location struct {
  lat, long float64
}

type world struct {
  radius float64
}

// distance calculation using the Spherical Law of Cosines.
func (w world) distance(p1, p2 location) float64 {
  s1, c1 := math.Sincos(rad(p1.lat))
  s2, c2 := math.Sincos(rad(p2.lat))
  clong := math.Cos(rad(p1.long - p2.long))
  return w.radius * math.Acos(s1*s2+c1*c2*clong)
}

// rad converts degrees to radians.
func rad(deg float64) float64 {
  return deg * math.Pi / 180
}

func main() {
  var mars = world{radius: 3389.5}
  spirit := location{-14.5684, 175.472636}
  opportunity := location{-1.9462, 354.4734}
  
  dist := mars.distance(spirit, opportunity)
  fmt.Printf("%.2f km\n", dist)
}
```

### å°æµ‹è¯•

- ä¸ä¸é‡‡ç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼ç›¸æ¯”ï¼Œåœ¨worldç±»å‹ä¸Šå£°æ˜ä¸€ä¸ªdistanceæ–¹æ³•çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ

### ä½œä¸šé¢˜

1. ä½¿ç”¨ä¾‹å­ä¸­çš„ä»£ç ï¼Œç¼–å†™ä¸€ä¸ªç¨‹åºã€‚å¹¶ä¸ºä¸‹è¡¨ä¸­æ¯ä¸ª ä½ç½®éƒ½å£°æ˜ä¸€ä¸ªlocationï¼Œä»¥åè¿›åˆ¶åº¦æ•°æ‰“å°å‡ºæ¯ä¸ªä½ç½®ã€‚
2. ä½¿ç”¨ä¾‹å­ä¸­çš„distanceæ–¹æ³•ï¼Œç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œæ¥åˆ¤å®šä¸Šé¢˜è¡¨ä¸­æ¯å¯¹ç€é™†ç‚¹ä¹‹é—´çš„è·ç¦»ã€‚å¹¶å›ç­”ï¼š
   1. å“ªä¸¤ä¸ªç€é™†ç‚¹ä¹‹é—´æœ€è¿‘ï¼Ÿ
   2. å“ªä¸¤ä¸ªç€é™†ç‚¹ä¹‹é—´æœ€è¿œï¼Ÿ
   3. è®¡ç®—ä¼¦æ•¦åˆ°å·´é»ä¹‹é—´çš„è·ç¦»ï¼ˆ51Â°30â€™N 0Â°08â€™Wï¼‰ï¼Œï¼ˆ48Â°51â€™N 2Â°21â€™Eï¼‰,åœ°çƒåŠå¾„ä¸º6371å…¬é‡Œã€‚
   4. è®¡ç®—ä½ çš„åŸå¸‚åˆ°åŒ—äº¬è·ç¦»
   5. è®¡ç®—ç«æ˜Ÿä¸ŠMount Sharp (5Â°4â€™ 48â€S, 137Â°51â€™E)åˆ°Olympus Mons (18Â°39â€™N,226Â°12â€™E)ä¹‹é—´çš„è·ç¦»ã€‚ç«æ˜Ÿçš„åŠå¾„æ˜¯3389.5å…¬é‡Œã€‚

## äºŒåä¸‰ã€ç»„åˆä¸è½¬å‘ Composition and forwarding

### ç»„åˆ

- åœ¨é¢å‘å¯¹è±¡çš„ä¸–ç•Œä¸­ï¼Œå¯¹è±¡ç”±æ›´å°çš„å¯¹è±¡ç»„åˆè€Œæˆã€‚
- æœ¯è¯­ï¼šå¯¹è±¡ç»„åˆæˆ–ç»„åˆ
- Goé€šè¿‡ç»“æ„ä½“å®ç°ç»„åˆï¼ˆcompositionï¼‰ã€‚
- Goæä¾›äº†â€œåµŒå…¥â€ï¼ˆembeddingï¼‰ç‰¹æ€§ï¼Œå®ƒå¯ä»¥å®ç°æ–¹æ³•çš„è½¬å‘ï¼ˆforwardingï¼‰
- ç»„åˆæ˜¯ä¸€ç§æ›´ç®€å•ã€çµæ´»çš„æ–¹å¼ã€‚

### ç»„åˆç»“æ„ä½“

ä¾‹å­ä¸€

```go
package main

type report struct {
  sol int
  high, low float64
  lat, hong float64
}

func main() {
  
}
```

ä¾‹å­äºŒ

```go
package main

type report struct {
  sol int 
  temperature temperature
  location location
}

type temperature struct {
  hign, low celsius
}

type location struct {
  lat, long float64
}

type celsius float64

func (t temperature) average() celsius {
  return (t.high + t.low) / 2
}

func (r report) average() celsius {
  return r.temperature.average()
}

func main() {
  bradbury := location{-4.5895, 137.4417}
  t := temperature{high: -1.0, low: -78.0}
  fmt.Println(t.average())
  report := report {
    sol: 15,
    temperature: t,
    location: bradbury
  }
  
  fmt.Println(report.temperature.average())
  fmt.Println(report.average())
  
  fmt.Printf("%+v\n", report)
  
  fmt.Printf("a balmy %vÂ° C\n", report.temperature.high)
}
```

### å°æµ‹è¯•

- æ¯”è¾ƒä¾‹å­1å’Œ2çš„ä»£ç ï¼Œä½ æ›´å–œæ¬¢å“ªä¸€ç§ï¼ŸåŸå› æ˜¯ä»€ä¹ˆï¼Ÿ

### è½¬å‘æ–¹æ³•

- Goå¯ä»¥é€šè¿‡structåµŒå…¥ æ¥å®ç°æ–¹æ³•çš„è½¬å‘ã€‚
- åœ¨structä¸­åªç»™å®šå­—æ®µç±»å‹ï¼Œä¸ç»™å®šå­—æ®µåå³å¯ã€‚

```go
package main

import "fmt"

//type report struct {
//  sol int
//  temperature temperature
//  location location
//}

type report struct {
  sol int
  temperature
  location
}

type temperature struct {
  high, low celsius
}

type location struct {
  lat, long float64
}

type celsius float64

func (t temperature) average() celsius {
  return (t.high + t.low) / 2
}

func main() {
  bradbury := location{-4.5895, 137.4417}
  t := temperature{high: -1.0, low: -78.0}
  fmt.Println(t.average())
  report := report {
    sol: 15,
    temperature: t,
    location: bradbury
  }
  
  fmt.Println(report.average())
  
  fmt.Println(report.high)
  
  fmt.Printf("%+v\n", report)
  
  fmt.Printf("a balmy %vÂ° C\n", report.temperature.high)
}
```

- åœ¨structä¸­ï¼Œå¯ä»¥è½¬å‘ä»»æ„ç±»å‹ã€‚

```go
package main

import "fmt"

//type report struct {
//  sol int
//  temperature temperature
//  location location
//}

type sol int

type report struct {
  sol 
  temperature
  location
}

type temperature struct {
  high, low celsius
}

type location struct {
  lat, long float64
}

type celsius float64

func (t temperature) average() celsius {
  return (t.high + t.low) / 2
}

func (s sol) days(s2 sol) int {
  days := int(s2 - s)
  if days < 0 {
    days = -days
  }
  return days
}

func main() {
  report := report {
    sol: 15,
  }
  
  fmt.Println(report.sol.days(1446))
  
  fmt.Println(report.days(1446))
}
```

### å°æµ‹è¯•

- ç»“æ„ä½“å¯ä»¥åµŒå…¥ä»€ä¹ˆç±»å‹ï¼Ÿ
- è®¿é—®report.latå­—æ®µæ˜¯å¦åˆæ³•ï¼Ÿå¦‚æœåˆæ³•ï¼Œé‚£ä¹ˆä¸Šé¢ä¾‹å­ä¸­å®ƒæŒ‡å‘å“ªä¸ªå­—æ®µï¼Ÿ

### å‘½åå†²çª

```go
package main

import "fmt"

//type report struct {
//  sol int
//  temperature temperature
//  location location
//}

type sol int

type report struct {
  sol 
  temperature
  location
}

type temperature struct {
  high, low celsius
}

type location struct {
  lat, long float64
}

type celsius float64

func (t temperature) average() celsius {
  return (t.high + t.low) / 2
}

func (s sol) days(s2 sol) int {
  days := int(s2 - s)
  if days < 0 {
    days = -days
  }
  return days
}

func (l location) days(l2 location) int {
  // To-do: complicated distance calculation
  return 5
}

func (r report) days(s2 sol) int {
  return r.sol.days(s2)
}

func main() {
  report := report {
    sol: 15,
  }
  
  fmt.Println(report.sol.days(1446))
  
  //fmt.Println(report.days(1446)) // æŠ¥é”™
  fmt.Println(report.days(1446))
}
```

### ç»§æ‰¿ è¿˜æ˜¯ ç»„åˆï¼Ÿ

- Favor object composition over class inheritance.
- ä¼˜å…ˆä½¿ç”¨å¯¹è±¡ç»„åˆè€Œä¸æ˜¯ç±»çš„ç»§æ‰¿ã€‚
- Use of classical inheritance is always optional; every problem thatit solves can be solved another way.
- å¯¹ä¼ ç»Ÿçš„ç»§æ‰¿ä¸æ˜¯å¿…éœ€çš„ï¼›æ‰€æœ‰ä½¿ç”¨ç»§æ‰¿è§£å†³çš„é—®é¢˜éƒ½å¯ä»¥é€šè¿‡å…¶å®ƒæ–¹æ³•è§£å†³ã€‚

### å°æµ‹è¯•

- å¦‚æœå¤šä¸ªåµŒå…¥çš„ç±»å‹éƒ½å®ç°äº†åŒåçš„æ–¹æ³•ï¼Œé‚£ä¹ˆGoç¼–è¯‘å™¨ä¼šæŠ¥é”™å—ï¼Ÿ

### ä½œä¸šé¢˜

å®éªŒï¼šgps.go

## äºŒåå››ã€æ¥å£

### æ¥å£

- æ¥å£å…³æ³¨äºç±»å‹å¯ä»¥åšä»€ä¹ˆï¼Œè€Œä¸æ˜¯å­˜å‚¨äº†ä»€ä¹ˆã€‚
- æ¥å£é€šè¿‡åˆ—ä¸¾ç±»å‹å¿…é¡»æ»¡è¶³çš„ä¸€ç»„æ–¹æ³•æ¥è¿›è¡Œå£°æ˜ã€‚
- åœ¨Goè¯­è¨€ä¸­ï¼Œä¸éœ€è¦æ˜¾å¼å£°æ˜æ¥å£ã€‚

ä¾‹å­ä¸€

```go
package main

var t interface {
  talk() string
}

func main() {
  
}
```

ä¾‹å­äºŒ

```go
package main

import (
  "fmt"
  "strings"
)

var t interface {
  talk() string
}

type martian struct {}

func (m martian) talk() string {
  return "nack nack"
}

type laser int

func (l laser) talk() string {
  return strings.Repeat("pew ", int(l))
}

func main() {
  t = martian{}
  fmt.Println(t.talk())
  
  t = laser(3)
  fmt.Println(t.talk())
}
```

### æ¥å£ç±»å‹

- ä¸ºäº†å¤ç”¨ï¼Œé€šå¸¸ä¼šæŠŠæ¥å£å£°æ˜ä¸ºç±»å‹ã€‚
- æŒ‰çº¦å®šï¼Œæ¥å£åç§°é€šå¸¸ä»¥erç»“å°¾ã€‚

ä¾‹å­ä¸€

```go
package main

import (
  "fmt"
)

type talker interface {
  talk() string
}

type martian struct {}

func (m martian) talk() string {
  return "nack nack"
}

type laser int

func (l laser) talk() string {
  return strings.Repeat("pew ", int(l))
}

func shout(t talker) {
  louder := strings.ToUpper(t.talk())
  fmt.Println(louder)
}

func main() {
  shout(martian{})
  shout(laser(2))
}
```

ä¾‹å­äºŒ

```go
package main

import (
  "fmt"
)

type talker interface {
  talk() string
}

type martian struct {}

func (m martian) talk() string {
  return "nack nack"
}

type laser int

func (l laser) talk() string {
  return strings.Repeat("pew ", int(l))
}

func shout(t talker) {
  louder := strings.ToUpper(t.talk())
  fmt.Println(louder)
}

type starship struct {
  laser
}

func main() {
  s := starship{laser(3)}
  
  fmt.Println(s.talk())
  shout(s)
}
```

- æ¥å£å¯ä»¥ä¸structåµŒå…¥ ç‰¹æ€§ä¸€åŒä½¿ç”¨ã€‚
- åŒæ—¶ä½¿ç”¨ç»„åˆå’Œæ¥å£å°†æ„æˆéå¸¸å¼ºå¤§çš„è®¾è®¡å·¥å…·ã€‚

### å°æµ‹è¯•

1. ä¿®æ”¹ä¾‹å­ä¸­laserç±»å‹çš„talkæ–¹æ³•ï¼Œé˜»æ­¢ç«æ˜Ÿçš„æ¿€å…‰æªå‘å°„ï¼Œæ‹¯æ•‘äººç±»å…é­å…¥ä¾µã€‚
2. æ‰©å±•ä¾‹å­çš„ä»£ç ï¼Œå£°æ˜ä¸€ä¸ªå¸¦æœ‰talkæ–¹æ³•çš„roverç±»å‹ï¼Œå¹¶ä½¿æ–¹æ³•è¿”å›â€œwhir whirâ€ï¼Œæœ€åå†ä½¿ç”¨shoutå‡½æ•°å¤„ç†è¿™ä¸ªæ–°ç±»å‹ã€‚

### æ¢ç´¢æ¥å£

- Goè¯­è¨€çš„æ¥å£éƒ½æ˜¯éšå¼æ»¡è¶³çš„ã€‚

ä¾‹å­ä¸€

```go
package main

import (
  "fmt"
  "time"
)

// stardate returns a fictional measure of time for a given date.
func stardate(t time.Time) float64 {
  doy := float64(t.YearDay())
  h := float64(t.Hour()) / 24.0
  return 1000 + doy + h
}

func main() {
  day := time.Date(2012, 8, 6, 5, 17, 0, 0, time.UTC)
  fmt.Printf("%.1f Curiosity has landed\n", stardate(day))
}
```

ä¾‹å­äºŒ

```go
package main

import (
  "fmt"
  "time"
)

type stardater interface {
  YearDay() int
  Hour() int
}

type sol int

func (s sol) YearDay() int {
  return int(s % 668)
}

func (s sol) Hour() int {
  return 0
}

// stardate returns a fictional measure of time for a given date.
func stardate(t stardater) float64 {
  doy := float64(t.YearDay())
  h := float64(t.Hour()) / 24.0
  return 1000 + doy + h
}

func main() {
  day := time.Date(2012, 8, 6, 5, 17, 0, 0, time.UTC)
  fmt.Printf("%.1f Curiosity has landed\n", stardate(day))
  
  s := sol(1422)
  fmt.Printf("%.1f Happy birthday\n", stardate(s))
}
```

### å°æµ‹è¯•

- éšå¼æ»¡è¶³æ¥å£æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ

### æ»¡è¶³æ¥å£

- Goæ ‡å‡†åº“å¯¼å‡ºäº†å¾ˆå¤šåªæœ‰å•ä¸ªæ–¹æ³•çš„æ¥å£ã€‚
- Goé€šè¿‡ç®€å•çš„ã€é€šå¸¸åªæœ‰å•ä¸ªæ–¹æ³•çš„æ¥å£â€¦â€¦æ¥é¼“åŠ±ç»„åˆè€Œä¸æ˜¯ç»§æ‰¿ï¼Œè¿™äº›æ¥å£åœ¨å„ä¸ªç»„ä»¶ä¹‹é—´å½¢æˆäº†ç®€æ˜æ˜“æ‡‚çš„ç•Œé™ã€‚---- Rob Pike
- ä¾‹å¦‚fmtåŒ…å£°æ˜çš„Stringeræ¥å£ï¼š`type Stringer interface {String() string}`

```go
package main

import "fmt"

// location with a latitude, longitude in decimal degrees.
type location struct {
  lat, long float64
}

// String formats a location with latitude, longitude.
func (l location) String() string {
  return fmt.Sprintf("%v, %v", l.lat, l.long)
}

func main() {
  curiosity := location{-4.5859, 137.4417}
  fmt.Println(curiosity)
}
```

- æ ‡å‡†åº“ä¸­å¸¸ç”¨æ¥å£è¿˜åŒ…æ‹¬ï¼šio.Readerï¼Œio.Writerï¼Œjson.Marshaler...

### å°æµ‹è¯•

- è¯·ä¸ºcoordinateç±»å‹ç¼–å†™Stringæ–¹æ³•ï¼Œå¹¶ä½¿ç”¨è¯¥æ–¹æ³•ä»¥æ›´ä¸ºå¯è¯»çš„æ–¹å¼æ‰“å°å‡ºåæ ‡æ•°æ®ã€‚

```go
type coordinate struct {
  d, m, s float64
  h rune
}
```

- è¯·ä½¿ä½ çš„ç¨‹åºæ‰“å°å‡ºï¼šElysium Planitia is at 4Â°30'0.0" N, 135Â°54'0.0" E

### ä½œä¸šé¢˜

- åŸºäºåˆšæ‰å°æµ‹è¯•çš„ç­”æ¡ˆï¼Œæ‰©å±•å¹¶ç¼–å†™ä¸€ä¸ªç”¨JSONæ ¼å¼è¾“å‡ºåæ ‡çš„ç¨‹åºã€‚è¿™ä¸ªç¨‹åºçš„JSONè¾“å‡ºåº”è¯¥åˆ†åˆ«ç”¨åè¿›åˆ¶ï¼ˆDDï¼‰å’Œåº¦/åˆ†/ç§’ï¼ˆDMSï¼‰ä¸¤ç§æ ¼å¼æä¾›åæ ‡ï¼š
- é€šè¿‡æ»¡è¶³å®šåˆ¶JSONæ•°æ®çš„json.Marshaleræ¥å£ï¼Œä½ åº”è¯¥æ— éœ€ä¿®æ”¹åæ ‡ç»“æ„å°±èƒ½å¤Ÿè¾¾åˆ°ä¸Šè¿°ç›®çš„ã€‚åœ¨ç¼–å†™MarshalJSONæ–¹æ³•çš„æ—¶å€™å¯ä»¥è€ƒè™‘ä½¿ç”¨json.Marshalå‡½æ•°ã€‚
- å¯ä»¥ä½¿ç”¨22ç« ä»‹ç»è¿‡çš„decimalæ–¹æ³•

## äºŒåäº”ã€ç¬¬äº”éƒ¨åˆ†ä¹ é¢˜

å•å…ƒå®éªŒï¼šç«æ˜Ÿä¸Šçš„åŠ¨ç‰©é¿éš¾æ‰€

## äºŒåå…­ã€æŒ‡é’ˆ

### ä»€ä¹ˆæ˜¯æŒ‡é’ˆ

- æŒ‡é’ˆæ˜¯æŒ‡å‘å¦ä¸€ä¸ªå˜é‡åœ°å€çš„å˜é‡ã€‚
- Goè¯­è¨€çš„æŒ‡é’ˆåŒæ—¶ä¹Ÿå¼ºè°ƒå®‰å…¨æ€§ï¼Œä¸ä¼šå‡ºç°è¿·é€”æŒ‡é’ˆï¼ˆdanglingpointersï¼‰

### &å’Œ`*`ç¬¦å·

- å˜é‡ä¼šå°†å®ƒä»¬çš„å€¼å­˜å‚¨åœ¨è®¡ç®—æœºçš„RAMé‡Œï¼Œå­˜å‚¨ä½ç½®å°±æ˜¯è¯¥å˜é‡çš„å†…å­˜åœ°å€ã€‚
- & è¡¨ç¤ºåœ°å€æ“ä½œç¬¦ï¼Œé€šè¿‡&å¯ä»¥è·å¾—å˜é‡çš„å†…å­˜åœ°å€ã€‚

```go
package main

import "fmt"

func main() {
  answer := 42
  fmt.Println(&answer)
}
```

- &æ“ä½œç¬¦æ— æ³•è·å¾—å­—ç¬¦ä¸²/æ•°å€¼/å¸ƒå°”å­—é¢å€¼çš„åœ°å€ã€‚
  - &42ï¼Œ&â€œhelloâ€è¿™äº›éƒ½ä¼šå¯¼è‡´ç¼–è¯‘å™¨æŠ¥é”™
- *æ“ä½œç¬¦ä¸&çš„ä½œç”¨ç›¸åï¼Œå®ƒç”¨æ¥è§£å¼•ç”¨ï¼Œæä¾›å†…å­˜åœ°å€æŒ‡å‘çš„å€¼ã€‚

```go
package main

import "fmt"

func main() {
  answer := 42
  fmt.Println(&answer)
  
  address := &answer
  fmt.Println(*address)
}
```

### æ³¨æ„

- Cè¯­è¨€ä¸­çš„å†…å­˜åœ°å€å¯ä»¥é€šè¿‡ä¾‹å¦‚address++è¿™æ ·çš„æŒ‡é’ˆè¿ç®—è¿›è¡Œæ“ä½œï¼Œä½†æ˜¯åœ¨Goé‡Œé¢ä¸å…è®¸è¿™ç§ä¸å®‰å…¨æ“ä½œã€‚

### å°æµ‹è¯•

1. åœ¨ä¾‹å­ä¸­æ‰§è¡Œ`fmt.Println(*&answer)`ä¼šæ‰“å°å‡ºä»€ä¹ˆç»“æœï¼Ÿ
2. ä¹˜æ³•è¿ç®—å’Œè§£å¼•ç”¨éƒ½éœ€è¦ç”¨åˆ°æ˜Ÿå·`*`ï¼ŒGoç¼–è¯‘å™¨å°†å¦‚ä½•åŒºåˆ†å‘¢ï¼Ÿ

### æŒ‡é’ˆç±»å‹

- æŒ‡é’ˆå­˜å‚¨çš„æ˜¯å†…å­˜åœ°å€ã€‚

```go
package main

import "fmt"

func main() {
  answer := 42
  
  address := &answer // *int
  
  fmt.Printf("address is a %T\n", address)
}
```

- æŒ‡é’ˆç±»å‹å’Œå…¶å®ƒæ™®é€šç±»å‹ä¸€æ ·ï¼Œå‡ºç°åœ¨æ‰€æœ‰éœ€è¦ç”¨åˆ°ç±»å‹çš„åœ°æ–¹ï¼Œå¦‚å˜é‡å£°æ˜ã€å‡½æ•°å½¢å‚ã€è¿”å›å€¼ç±»å‹ã€ç»“æ„ä½“å­—æ®µç­‰ã€‚

```go
package main

import "fmt"

func main() {
  canada := "Canada"
  
  var home *string
  fmt.Printf("home is a %T\n", home)
  
  home = &canada
  fmt.Printf("canada is a %v\n", *canada)
}
```

- å°†`*`æ”¾åœ¨ç±»å‹å‰é¢è¡¨ç¤ºå£°æ˜æŒ‡é’ˆç±»å‹
- å°†`*`æ”¾åœ¨å˜é‡å‰é¢è¡¨ç¤ºè§£å¼•ç”¨æ“ä½œ

### å°æµ‹è¯•

1. ä½ ä¼šä½¿ç”¨ä»€ä¹ˆä»£ç æ¥å£°æ˜ä¸€ä¸ªæŒ‡å‘æ•´æ•°çš„åä¸ºaddressçš„å˜é‡ï¼Ÿ
2. ä½ æ˜¯å¦‚ä½•åŒºåˆ† ä¾‹å­ä¸­å£°æ˜æŒ‡é’ˆå˜é‡å’Œè§£å¼•ç”¨æŒ‡é’ˆè¿™ä¸¤ä¸ªæ“ä½œçš„ï¼Ÿ

### æŒ‡é’ˆå°±æ˜¯ç”¨æ¥æŒ‡å‘çš„

```go
package main

import "fmt"

func main() {
  var administrator *string
  
  scolese := "Christopher J. Scolese"
  administrator = &scolese
  fmt.Println(*administrator)
  
  bolden := "Charies F. Bolden"
  administrator = &bolden
  fmt.Println(*administrator)
  
  bolden = "Charles Frank Bolden Jr."
  fmt.Printf(*administrator)
  
  *administrator = "Maj. Gen. Charles Frank Bolden Jr."
  fmt.Println(bolden)
  
  major := administrator
  *major = "Major General Charles Frank Bolden Jr."
  fmt.Println(bolden)
  
  fmt.Println(administrator == major)
  
  lightfoot := "Robert M. Lightfoot Jr."
  administrator = &lightfoot
  fmt.Println(administrator == major)
  
  charles := *major
  *major = "Charles Bolden"
  fmt.Println(charles)
  fmt.Println(bolden)
  
  charlse = "Charles Bolden"
  fmt.Println(charles == bolden)
  fmt.Println(&charles == &bolden)
}
```

- ä¸¤ä¸ªæŒ‡é’ˆå˜é‡æŒæœ‰ç›¸åŒçš„å†…å­˜åœ°å€ï¼Œé‚£ä¹ˆå®ƒä»¬å°±æ˜¯ç›¸ç­‰ã€‚

### å°æµ‹è¯•

1. ä¾‹å­ä¸­ä½¿ç”¨æŒ‡é’ˆçš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ
2. è¯·è¯´æ˜è¯­å¥major := administratorå’ŒCharles := *majorçš„ä½œç”¨ã€‚

### æŒ‡å‘ç»“æ„çš„æŒ‡é’ˆ

- ä¸å­—ç¬¦ä¸²å’Œæ•°å€¼ä¸ä¸€æ ·ï¼Œå¤åˆå­—é¢é‡çš„å‰é¢å¯ä»¥æ”¾ç½®&ã€‚

```go
package main

import "fmt"

func main() {
  type person struct {
    name, superpower string
    age int
  }
  
  timmy := &person {
    name: "Timothy",
    age: 10,
  }
  
  (*timmy).superpower = "flying"
  timmy.superpower = "flying"
  
  fmt.Printf("%+v\n", timmy)
}
```

- è®¿é—®å­—æ®µæ—¶ï¼Œå¯¹ç»“æ„ä½“è¿›è¡Œè§£å¼•ç”¨å¹¶ä¸æ˜¯å¿…é¡»çš„ã€‚

### å°æµ‹è¯•

1. ä»¥ä¸‹å“ªäº›æ˜¯&æ“ä½œç¬¦çš„åˆæ³•ä½¿ç”¨ï¼Ÿ
   1. A.æ”¾ç½®åœ¨å­—ç¬¦ä¸²å­—é¢å€¼çš„å‰é¢ï¼Œä¾‹å¦‚&â€œTimâ€
   2. B.æ”¾ç½®åœ¨æ•´æ•°å­—é¢å€¼çš„å‰é¢ï¼Œä¾‹å¦‚&10
   3. C.æ”¾ç½®åœ¨å¤åˆå­—é¢å€¼çš„å‰é¢ï¼Œä¾‹å¦‚&person{name: â€œTimâ€}
   4. D.ä»¥ä¸Šå…¨éƒ¨éƒ½æ˜¯
2. è¯­å¥timmy.superpowerå’Œ(*timmy).superpoweræœ‰ä½•åŒºåˆ«ï¼Ÿ

### æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆ

- å’Œç»“æ„ä½“ä¸€æ ·ï¼Œå¯ä»¥æŠŠ&æ”¾åœ¨æ•°ç»„çš„å¤åˆå­—é¢å€¼å‰é¢æ¥åˆ›å»ºæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆã€‚

```go
package main

import "fmt"

func main() {
  superpowers := &[3]string{"flight", "invisibility", "super strength"}
  
  fmt.Println(superpowers[0])
  fmt.Println(superpowers[1:2])
}
```

- æ•°ç»„åœ¨æ‰§è¡Œç´¢å¼•æˆ–åˆ‡ç‰‡æ“ä½œæ—¶ä¼šè‡ªåŠ¨è§£å¼•ç”¨ã€‚æ²¡æœ‰å¿…è¦å†™`(*superpower)[0]`è¿™ç§å½¢å¼ã€‚
- ä¸Cè¯­è¨€ä¸ä¸€æ ·ï¼ŒGoé‡Œé¢æ•°ç»„å’ŒæŒ‡é’ˆæ˜¯ä¸¤ç§å®Œå…¨ç‹¬ç«‹çš„ç±»å‹ã€‚
- Sliceå’Œmapçš„å¤åˆå­—é¢å€¼å‰é¢ä¹Ÿå¯ä»¥æ”¾ç½®&æ“ä½œç¬¦ï¼Œä½†æ˜¯Goå¹¶æ²¡æœ‰ä¸ºå®ƒä»¬æä¾›è‡ªåŠ¨è§£å¼•ç”¨çš„åŠŸèƒ½ã€‚

### å°æµ‹è¯•

- å½“superpoweræ˜¯ä¸€ä¸ªæŒ‡é’ˆæˆ–è€…æ•°ç»„æ—¶ï¼Œæœ‰ä»€ä¹ˆè¯­å¥å¯ä»¥å’Œ[*superpower](2:)å…·æœ‰åŒæ ·çš„æ‰§è¡Œæ•ˆæœå‘¢ï¼Ÿ

### å®ç°ä¿®æ”¹

- Goè¯­è¨€çš„å‡½æ•°å’Œæ–¹æ³•éƒ½æ˜¯æŒ‰å€¼ä¼ é€’å‚æ•°çš„ï¼Œè¿™æ„å‘³ç€å‡½æ•°æ€»æ˜¯æ“ä½œäºè¢«ä¼ é€’å‚æ•°çš„å‰¯æœ¬ã€‚
- å½“æŒ‡é’ˆè¢«ä¼ é€’åˆ°å‡½æ•°æ—¶ï¼Œå‡½æ•°å°†æ¥æ”¶ä¼ å…¥çš„å†…å­˜åœ°å€çš„å‰¯æœ¬ã€‚ä¹‹åå‡½æ•°å¯ä»¥é€šè¿‡è§£å¼•ç”¨å†…å­˜åœ°å€æ¥ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘çš„å€¼ã€‚

ä¾‹å­ä¸€ä¸ª

```go
package main

type person struct {
  name, superpower string
  age int
}

func birthday(p *person) {
  p.age++
}

func main() {
  
}
```

ä¾‹å­äºŒ

```go
package main

type person struct {
  name, superpower string
  age int
}

func birthday(p *person) {
  p.age++
}

func main() {
  rebecca := person{
    name: "Rebecca",
    superpower: "imagination",
    age: 14,
  }
  
  birthday(&rebecca)
  
  fmt.Printf("%+v\n", rebecca)
}
```

å°æµ‹è¯•

1. å¯¹ä¾‹å­26.6æ¥è¯´ï¼Œä¸‹åˆ—å“ªè¡Œä»£ç ä¼šè¿”å›Timothy 11ï¼Ÿ
   1. A.birthday(&timmy
   2. )B.birthday(timmy)
   3. C.birthday(*timmy)
2. å¯¹äºä¾‹å­26.9å’Œ26.10æ¥è¯´ï¼Œå¦‚æœbirthday(p person)å‡½æ•°ä¸ä½¿ç”¨æŒ‡é’ˆï¼Œé‚£ä¹ˆRebeccaçš„å²æ•°ï¼ˆageï¼‰å°†æ˜¯å¤šå°‘ï¼Ÿ

### æŒ‡é’ˆæ¥æ”¶è€…

- æ–¹æ³•çš„æ¥æ”¶è€…å’Œæ–¹æ³•çš„å‚æ•°åœ¨å¤„ç†æŒ‡é’ˆæ–¹é¢æ˜¯å¾ˆç›¸ä¼¼çš„ã€‚

```go
package main

type person struct {
  name string
  age int
}

func (p *person) birthday() {
  p.age++
}

func main() {
  terry := &person{
    name: "Terry",
    age: 15,
  }
  
  terry.birthday()
  
  fmt.Printf("%+v\n", terry)
  
  nathan := person{
    name: "Nathan",
    age: 17,
  }
  nathan.birthday()
  fmt.Printf("%+v\n", nathan)
}
```

- Goè¯­è¨€åœ¨å˜é‡é€šè¿‡ç‚¹æ ‡è®°æ³•è¿›è¡Œè°ƒç”¨çš„æ—¶å€™ï¼Œè‡ªåŠ¨ä½¿ç”¨ & å–å¾—å˜é‡çš„å†…å­˜åœ°å€ã€‚
  - æ‰€ä»¥ä¸ç”¨å†™(&nathan).birthday()è¿™ç§å½¢å¼ä¹Ÿå¯ä»¥æ­£å¸¸è¿è¡Œã€‚

```go
package main

type person struct {
  name string
  age int
}

func (p *person) birthday() {
  p.age++
}

func main() {
  terry := &person{
    name: "Terry",
    age: 15,
  }
  
  terry.birthday()
  
  fmt.Printf("%+v\n", terry)
  
  nathan := person{
    name: "Nathan",
    age: 17,
  }
  nathan.birthday()
  (&nathan).birthday()
  fmt.Printf("%+v\n", nathan)
  
  const layout = "Mon, Jan 2, 2006"
  day := time.Now()
  tomorrow := day.Add(24 * time.Hour)
  
  fmt.Println(day.Format(layout))
  fmt.Println(tomorrow.Format(layout))
}
```

### æ³¨æ„

- ä½¿ç”¨æŒ‡é’ˆä½œä¸ºæ¥æ”¶è€…çš„ç­–ç•¥åº”è¯¥å§‹ç»ˆå¦‚ä¸€ï¼š
- å¦‚æœä¸€ç§ç±»å‹çš„æŸäº›æ–¹æ³•éœ€è¦ç”¨åˆ°æŒ‡é’ˆä½œä¸ºæ¥æ”¶è€…ï¼Œå°±åº”è¯¥ä¸ºè¿™ç§ç±»å‹çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯ç”¨æŒ‡é’ˆä½œä¸ºæ¥æ”¶è€…ã€‚

### å°æµ‹è¯•

- æ€æ ·æ‰èƒ½åˆ¤æ–­time.Timeç±»å‹æ‰€æœ‰çš„æ–¹æ³•æ˜¯å¦éƒ½æ²¡æœ‰ä½¿ç”¨æŒ‡é’ˆä½œä¸ºæ¥æ”¶è€…ã€‚

### å†…éƒ¨æŒ‡é’ˆ

- Goè¯­è¨€æä¾›äº† å†…éƒ¨æŒ‡é’ˆ è¿™ç§ç‰¹æ€§ã€‚
- å®ƒç”¨äºç¡®å®šç»“æ„ä½“ä¸­æŒ‡å®šå­—æ®µçš„å†…å­˜åœ°å€ã€‚

```go
package main

type stats struct {
  level int
  endurance, health int
}

func levelUp(s *stats) {
  s.level ++
  s.endurance = 42 + (14 * s.level)
  s.health = 5 * s.endurance
}

type character struct {
  name string
  stats stats
}

func main() {
  player := character(name: "Matthias")
  levelUp(&player.stats)
  
  fmt.Printf("%+v\n", player.stats)
}
```

- &æ“ä½œç¬¦ä¸ä»…å¯ä»¥è·å¾—ç»“æ„ä½“çš„å†…å­˜åœ°å€ï¼Œè¿˜å¯ä»¥è·å¾—ç»“æ„ä½“ä¸­æŒ‡å®šå­—æ®µçš„å†…å­˜åœ°å€ã€‚

### å°æµ‹è¯•

- ä»€ä¹ˆæ˜¯å†…éƒ¨æŒ‡é’ˆï¼Ÿ

### ä¿®æ”¹æ•°ç»„

- å‡½æ•°é€šè¿‡æŒ‡é’ˆå¯¹æ•°ç»„çš„å…ƒç´ è¿›è¡Œä¿®æ”¹ã€‚

```go
package main

import "fmt"

func reset(board *[8][8]rune) {
  board[0][0] = 'r'
  // ...
}

func main() {
  var board [8][8]rune
  reset(&board)
  
  fmt.Printf("%c", board[0][0])
}
```

### å°æµ‹è¯•

- ä»€ä¹ˆæƒ…å†µä¸‹åº”è¯¥ä½¿ç”¨æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆï¼Ÿ

### éšå¼çš„æŒ‡é’ˆ

- Goè¯­è¨€é‡Œä¸€äº›å†…ç½®çš„é›†åˆç±»å‹å°±åœ¨æš—ä¸­ä½¿ç”¨æŒ‡é’ˆã€‚
- mapåœ¨è¢«èµ‹å€¼æˆ–è€…è¢«ä½œä¸ºå‚æ•°ä¼ é€’çš„æ—¶å€™ä¸ä¼šè¢«å¤åˆ¶ã€‚
  - mapå°±æ˜¯ä¸€ç§éšå¼æŒ‡é’ˆã€‚
  - è¿™ç§å†™æ³•å°±æ˜¯å¤šæ­¤ä¸€ä¸¾ï¼š`func demolish(planets *map[string]string)`
- mapçš„é”®å’Œå€¼éƒ½å¯ä»¥æ˜¯æŒ‡é’ˆç±»å‹
- éœ€è¦å°†æŒ‡é’ˆæŒ‡å‘mapçš„æƒ…å†µå¹¶ä¸å¤šè§

### å°æµ‹è¯•

- mapæ˜¯æŒ‡é’ˆå—ï¼Ÿ

### sliceæŒ‡å‘æ•°ç»„

- ä¹‹å‰è¯´è¿‡sliceæ˜¯æŒ‡å‘æ•°ç»„çš„çª—å£ï¼Œå®é™…ä¸Šsliceåœ¨æŒ‡å‘æ•°ç»„å…ƒç´ çš„æ—¶å€™ä¹Ÿä½¿ç”¨äº†æŒ‡é’ˆã€‚
- æ¯ä¸ªsliceå†…éƒ¨éƒ½ä¼šè¢«è¡¨ç¤ºä¸ºä¸€ä¸ªåŒ…å«3ä¸ªå…ƒç´ çš„ç»“æ„ï¼Œå®ƒä»¬åˆ†åˆ«æŒ‡å‘ï¼š
  - æ•°ç»„çš„æŒ‡é’ˆ
  - sliceçš„å®¹é‡
  - sliceçš„é•¿åº¦
- å½“sliceè¢«ç›´æ¥ä¼ é€’è‡³å‡½æ•°æˆ–æ–¹æ³•æ—¶ï¼Œsliceçš„å†…éƒ¨æŒ‡é’ˆå°±å¯ä»¥å¯¹åº•å±‚æ•°æ®è¿›è¡Œä¿®æ”¹ã€‚

- æŒ‡å‘sliceçš„æ˜¾å¼æŒ‡é’ˆçš„å”¯ä¸€ä½œç”¨å°±æ˜¯ä¿®æ”¹sliceæœ¬èº«ï¼šsliceçš„é•¿åº¦ã€å®¹é‡ä»¥åŠèµ·å§‹åç§»é‡ã€‚

```go
package main

import "fmt"

func reclassify(planets *[]string) {
  *planets = (*planets)[0:8]
}

func main() {
  planets := []string{
    "Mercury", "Venus", "Earth", "Mars",
    "Jupiter", "Saturn", "Uranus", "Neptune",
    "Pluto",
  }
  reclassify(&planets)
  
  fmt.Println(planets)
}
```

### å°æµ‹è¯•

- å¦‚æœå‡½æ•°å’Œæ–¹æ³•æƒ³è¦ä¿®æ”¹å®ƒä»¬æ¥æ”¶åˆ°çš„æ•°æ®ï¼Œé‚£ä¹ˆå®ƒä»¬åº”è¯¥ä½¿ç”¨æŒ‡å‘å“ªä¸¤ç§æ•°æ®ç±»å‹çš„æŒ‡é’ˆï¼Ÿ

### æŒ‡é’ˆå’Œæ¥å£

```go
package main

import (
  "fmt"
  "strings"
)

type talker interface {
  talk() string
}

func shout(t talker) {
  louder := strings.ToUper(t.talk())
  fmt.Println(louder)
}

type martian struct {}

func (m martian) talk() string {
  return "nack nakc"
}

fun main() {
  shout(martian{})
  shout(&martian{})
}
```

- æœ¬ä¾‹ä¸­ï¼Œæ— è®ºmartianè¿˜æ˜¯æŒ‡å‘martiançš„æŒ‡é’ˆï¼Œéƒ½å¯ä»¥æ»¡è¶³talkeræ¥å£ã€‚
- å¦‚æœæ–¹æ³•ä½¿ç”¨çš„æ˜¯æŒ‡é’ˆæ¥æ”¶è€…ï¼Œé‚£ä¹ˆæƒ…å†µä¼šæœ‰æ‰€ä¸åŒã€‚

```go
package main

import (
  "fmt"
  "strings"
)

type talker interface {
  talk() string
}

func shout(t talker) {
  louder := strings.ToUper(t.talk())
  fmt.Println(louder)
}

type martian struct {}

func (m martian) talk() string {
  return "nack nakc"
}

type laser int

func (l *laser) talk() string {
  return strings.Repeat("pew ", int(*l))
}

fun main() {
  pew := laser(2)
  shout(&pew)
  shout(pew) // æŠ¥é”™
}
```

### å°æµ‹è¯•

- æŒ‡é’ˆåœ¨ä»€ä¹ˆæƒ…å†µä¸‹æ‰èƒ½æ»¡è¶³æ¥å£ï¼Ÿ

### æ˜æ™ºçš„ä½¿ç”¨æŒ‡é’ˆ

- åº”åˆç†ä½¿ç”¨æŒ‡é’ˆï¼Œä¸è¦è¿‡åº¦ä½¿ç”¨æŒ‡é’ˆã€‚

### ä½œä¸šé¢˜

- ç¼–å†™ä¸€ä¸ªå¯ä»¥è®©æµ·é¾Ÿä¸Šä¸‹å·¦å³ç§»åŠ¨çš„ç¨‹åºï¼š
  - ç¨‹åºä¸­çš„æµ·é¾Ÿéœ€è¦å­˜å‚¨ä¸€ä¸ªä½ç½®ï¼ˆxï¼Œyï¼‰
  - æ­£æ•°åæ ‡è¡¨ç¤ºå‘ä¸‹æˆ–å‘å³
  - é€šè¿‡ä½¿ç”¨æ–¹æ³•å¯¹ç›¸åº”çš„å˜é‡å®æ–½è‡ªå¢å’Œè‡ªå‡æ¥å®ç°ç§»åŠ¨
  - è¯·ä½¿ç”¨mainå‡½æ•°æµ‹è¯•è¿™äº›æ–¹æ³•å¹¶æ‰“å°å‡ºæµ·é¾Ÿçš„æœ€ç»ˆä½ç½®

## äºŒåä¸ƒã€nil

### nil

- Nilæ˜¯ä¸€ä¸ªåè¯ï¼Œè¡¨ç¤ºâ€œæ— â€æˆ–è€…â€œé›¶â€ã€‚
- åœ¨Goé‡Œï¼Œnilæ˜¯ä¸€ä¸ªé›¶å€¼ã€‚
- å¦‚æœä¸€ä¸ªæŒ‡é’ˆæ²¡æœ‰æ˜ç¡®çš„æŒ‡å‘ï¼Œé‚£ä¹ˆå®ƒçš„å€¼å°±æ˜¯nil
- é™¤äº†æŒ‡é’ˆï¼Œnilè¿˜æ˜¯sliceã€mapå’Œæ¥å£çš„é›¶å€¼ã€‚
- Goè¯­è¨€çš„nilï¼Œæ¯”ä»¥å¾€è¯­è¨€ä¸­çš„nullæ›´ä¸ºå‹å¥½ï¼Œå¹¶ä¸”ç”¨çš„æ²¡é‚£ä¹ˆé¢‘ç¹ï¼Œä½†æ˜¯ä»éœ€è°¨æ…ä½¿ç”¨ã€‚

### nilä¼šå¯¼è‡´panic

- å¦‚æœæŒ‡é’ˆæ²¡æœ‰æ˜ç¡®çš„æŒ‡å‘ï¼Œé‚£ä¹ˆç¨‹åºå°†æ— æ³•å¯¹å…¶å®æ–½çš„è§£å¼•ç”¨ã€‚
- å°è¯•è§£å¼•ç”¨ä¸€ä¸ªnilæŒ‡é’ˆå°†å¯¼è‡´ç¨‹åºå´©æºƒã€‚

```go
package main

import "fmt"

func main() {
  var nowhere *int
  
  if nowhere != nil {
    fmt.Println(*nowhere)
  }
  fmt.Println(nowhere)
  
  fmt.Println(*nowhere) // panic
}
```

### å°æµ‹è¯•

- ç±»å‹*stringçš„é›¶å€¼æ˜¯ä»€ä¹ˆï¼Ÿ

### ä¿æŠ¤ä½ çš„æ–¹æ³•

- é¿å…nilå¼•å‘panic

```go
package main

import "fmt"

type person struct {
  age int
}

func (p *person) birthday() {
  p.age++ // æŠ¥é”™
}

func main() {
  var nobody *person
 
  fmt.Println(nobody)
  
  nobody.birthday() // panic
}
```

- å› ä¸ºå€¼ä¸ºnilçš„æ¥æ”¶è€…å’Œå€¼ä¸ºnilçš„å‚æ•°åœ¨è¡Œä¸ºä¸Šå¹¶æ²¡æœ‰åŒºåˆ«ï¼Œæ‰€ä»¥Goè¯­è¨€å³ä½¿åœ¨æ¥æ”¶è€…ä¸ºnilçš„æƒ…å†µä¸‹ï¼Œä¹Ÿä¼šç»§ç»­è°ƒç”¨æ–¹æ³•ã€‚

```go
package main

import "fmt"

type person struct {
  age int
}

func (p *person) birthday() {
  if p == nil {
    return
  }
  p.age++
}

func main() {
  var nobody *person
 
  fmt.Println(nobody)
  
  nobody.birthday() 
}
```

### å°æµ‹è¯•

- å¦‚æœpä¸ºnilï¼Œé‚£ä¹ˆè®¿é—®å­—æ®µp.ageä¼šäº§ç”Ÿä»€ä¹ˆç»“æœï¼Ÿ

### nilå‡½æ•°å€¼

- å½“å˜é‡è¢«å£°æ˜ä¸ºå‡½æ•°ç±»å‹æ—¶ï¼Œå®ƒçš„é»˜è®¤å€¼æ˜¯nilã€‚

```go
package main

import "fmt"

func main() {
  var fn func(a, b int) int
  fmt.Println(fn == nil)
}
```

- æ£€æŸ¥å‡½æ•°å€¼æ˜¯å¦ä¸ºnilï¼Œå¹¶åœ¨æœ‰éœ€è¦æ—¶æä¾›é»˜è®¤è¡Œä¸ºã€‚

```go
package main

import (
  "fmt"
  "sort"
)

func sortStrings(s []string, less func(i, j int) bool) {
  if less == nil {
    less = func(i, j int) bool {return s[i] < s[j]}
  }
  sort.Slice(s, less)
}

func main() {
  food := []string{"onion", "carrot", "celery"}
  sortStrings(food, nil)
  fmt.Println(food)
}
```

### å°æµ‹è¯•

- è¯·ä¸ºä¾‹å­ç¼–å†™ä¸€ä¸ªå•è¡Œå‡½æ•°ï¼Œå®ƒå¯ä»¥æŒ‰ç…§å­—ç¬¦ä¸²ä»çŸ­åˆ°é•¿çš„é¡ºåºå¯¹foodè¿›è¡Œæ’åº

### nil slice

- å¦‚æœsliceåœ¨å£°æ˜ä¹‹åæ²¡æœ‰ä½¿ç”¨å¤åˆå­—é¢å€¼æˆ–å†…ç½®çš„makeå‡½æ•°è¿›è¡Œåˆå§‹åŒ–ï¼Œé‚£ä¹ˆå®ƒçš„å€¼å°±æ˜¯nilã€‚
- å¹¸è¿çš„æ˜¯ï¼Œrangeã€lenã€appendç­‰å†…ç½®å‡½æ•°éƒ½å¯ä»¥æ­£å¸¸å¤„ç†å€¼ä¸ºnilçš„sliceã€‚

```go
package main

import "fmt"

func main() {
  var soup []string
  fmt.Println(soup == nil)
  
  for _, ingredient := range soup {
    fmt.Println(ingredient)
  }
  
  fmt.Println(len(soup))
  
  soup = append(soup, "onion", "carrot", "celery")
  fmt.Println(soup)
}
```

- è™½ç„¶ç©ºsliceå’Œå€¼ä¸ºnilçš„sliceå¹¶ä¸ç›¸ç­‰ï¼Œä½†å®ƒä»¬é€šå¸¸å¯ä»¥æ›¿æ¢ä½¿ç”¨ã€‚

```go
package main

import "fmt"

func mirepoix(ingredients []string) []string {
  return append(ingredients, "onion", "carrot", "celery")
}

func main() {
  soup := mirepoix(nil)
  fmt.Println(soup)
}
```

### å°æµ‹è¯•

- æˆ‘ä»¬å¯ä»¥å®‰å…¨çš„å¯¹nil sliceæ‰§è¡Œå“ªäº›æ“ä½œï¼Ÿ

### nil map

- å’Œsliceä¸€æ ·ï¼Œå¦‚æœmapåœ¨å£°æ˜åæ²¡æœ‰ä½¿ç”¨å¤åˆå­—é¢å€¼æˆ–å†…ç½®çš„makeå‡½æ•°è¿›è¡Œåˆå§‹åŒ–ï¼Œé‚£ä¹ˆå®ƒçš„å€¼å°†ä¼šæ˜¯é»˜è®¤çš„nil

```go
package main

import "fmt"

func main() {
  var soup map[string]int
  fmt.Println(soup == nil)
  
  measurement, ok := soup["onion"] // è¯»å€¼ä¸º nil çš„è¯»å–ä¸ä¼šæŠ¥é”™
  if ok {
    fmt.Println(measurement)
  }
  
  for ingredient, measurement := range soup { // ä¸ä¼šæŠ¥é”™ {} ä¸­çš„ä»£ç ä¸ä¼šèµ°
    fmt.Println(ingredient, measurement)
  }
}
```

### å°æµ‹è¯•

- å¯¹å€¼ä¸ºnilçš„mapæ‰§è¡Œä»€ä¹ˆæ“ä½œä¼šå¼•å‘panicï¼Ÿ

### nilæ¥å£

- å£°æ˜ä¸ºæ¥å£ç±»å‹çš„å˜é‡åœ¨æœªè¢«èµ‹å€¼æ—¶ï¼Œå®ƒçš„é›¶å€¼æ˜¯nilã€‚
- å¯¹äºä¸€ä¸ªæœªè¢«èµ‹å€¼çš„æ¥å£å˜é‡æ¥è¯´ï¼Œå®ƒçš„æ¥å£ç±»å‹å’Œå€¼éƒ½æ˜¯nilï¼Œå¹¶ä¸”å˜é‡æœ¬èº«ä¹Ÿç­‰äºnilã€‚

```go
package main

import "fmt"

func main() {
  var v interface{}
  fmt.Printf("%T %v %v\n", v, v, v == nil)
}
```

- å½“æ¥å£ç±»å‹çš„å˜é‡è¢«èµ‹å€¼åï¼Œæ¥å£å°±ä¼šåœ¨å†…éƒ¨æŒ‡å‘è¯¥å˜é‡çš„ç±»å‹å’Œå€¼ã€‚

```go
package main

import "fmt"

func main() {
  var v interface{}
  fmt.Printf("%T %v %v\n", v, v, v == nil)
  var p *int
  v = p
  fmt.Printf("%T %v %v\n", v, v, v == nil)
}
```

- åœ¨Goä¸­ï¼Œæ¥å£ç±»å‹çš„å˜é‡åªæœ‰åœ¨ç±»å‹å’Œå€¼éƒ½ä¸ºnilæ—¶æ‰ç­‰äºnilã€‚
  - å³ä½¿æ¥å£å˜é‡çš„å€¼ä»ä¸ºnilï¼Œä½†åªè¦å®ƒçš„ç±»å‹ä¸æ˜¯nilï¼Œé‚£ä¹ˆè¯¥å˜é‡å°±ä¸ç­‰äºnilã€‚
- æ£€éªŒæ¥å£å˜é‡çš„å†…éƒ¨è¡¨ç¤º

```go
package main

import "fmt"

func main() {
  var v interface{}
  fmt.Printf("%T %v %v\n", v, v, v == nil)
  var p *int
  v = p
  fmt.Printf("%T %v %v\n", v, v, v == nil)
  
  fmt.Printf("%#v\n", v)
}
```

### å°æµ‹è¯•

- åœ¨æ‰§è¡Œå£°æ˜var s fmt.Stringerä¹‹åï¼Œå˜é‡sçš„å€¼æ˜¯ä»€ä¹ˆï¼Ÿ

### nilä¹‹å¤–çš„å¦ä¸€ä¸ªé€‰æ‹©

```go
package main

import "fmt"

type number struct {
  value int
  valid bool
}

func newNumber(v int) number {
  return number{value: v, valid: true}
}

func (n number) String() string {
  if !n.valid {
    return "not set"
  }
  return fmt.Sprintf("%d", n.value)
}

func main() {
  n := newNumber(42)
  fmt.Println(n)
  
  e := number{}
  fmt.Println(e)
}
```

### å°æµ‹è¯•

- ä¾‹å­ä¸­é‡‡ç”¨çš„ç­–ç•¥æœ‰ä½•ä¼˜åŠ¿ï¼Ÿ

### ä½œä¸šé¢˜

- äºšç‘Ÿè¢«ä¸€ä½éª‘å£«æŒ¡ä½äº†å»è·¯ã€‚æ­£å¦‚leftHand *itemå˜é‡çš„å€¼ä¸ºnilæ‰€ç¤ºï¼Œè¿™ä½è‹±é›„æ‰‹ä¸Šæ­£ç©ºæ— ä¸€ç‰©ã€‚
- è¯·å®ç°ä¸€ä¸ªæ‹¥æœ‰pickup(i *item)å’Œgive(to*character)ç­‰æ–¹æ³•çš„characterç»“æ„ï¼Œç„¶åä½¿ç”¨ä½ åœ¨æœ¬èŠ‚å­¦åˆ°çš„çŸ¥è¯†ç¼–å†™ä¸€ä¸ªè„šæœ¬ï¼Œä½¿å¾—äºšç‘Ÿå¯ä»¥æ‹¿èµ·ä¸€ä»¶ç‰©å“å¹¶å°†å…¶äº¤ç»™éª‘å£«ï¼Œä¸æ­¤åŒæ—¶ä¸ºæ¯ä¸ªåŠ¨ä½œæ‰“å°å‡ºé€‚å½“çš„æè¿°ã€‚

## äºŒåå…«ã€é”™è¯¯

### å¤„ç†é”™è¯¯

- Goè¯­è¨€å…è®¸å‡½æ•°å’Œæ–¹æ³•åŒæ—¶è¿”å›å¤šä¸ªå€¼
- æŒ‰ç…§æƒ¯ä¾‹ï¼Œå‡½æ•°åœ¨è¿”å›é”™è¯¯æ—¶ï¼Œæœ€åè¾¹çš„è¿”å›å€¼åº”ç”¨æ¥è¡¨ç¤ºé”™è¯¯ã€‚
- è°ƒç”¨å‡½æ•°åï¼Œåº”ç«‹å³æ£€æŸ¥æ˜¯å¦å‘ç”Ÿé”™è¯¯ã€‚
- å¦‚æœæ²¡æœ‰é”™è¯¯å‘ç”Ÿï¼Œé‚£ä¹ˆè¿”å›çš„é”™è¯¯å€¼ä¸ºnilã€‚

```go
package main

import (
  "fmt"
  "io/ioutil"
  "os"
)

func main() {
  files, err := ioutil.ReadDir(".")
  if err != nil {
    fmt.Println(err)
    os.Exit(1)
  }
  
  for _, file := range files {
    fmt.Println(file.Name())
  }
}
```

### æ³¨æ„

- å½“é”™è¯¯å‘ç”Ÿæ—¶ï¼Œå‡½æ•°è¿”å›çš„å…¶å®ƒå€¼é€šå¸¸å°±ä¸å†å¯ä¿¡ã€‚

### å°æµ‹è¯•

1. ä¿®æ”¹ä¾‹å­ï¼Œè®©å®ƒè¯»å–ä¸€ä¸ªè™šæ„çš„æ–‡ä»¶å¤¹ï¼Œå¦‚â€œunicornsâ€ï¼Œçœ‹çœ‹ä¼šæ‰“å°å‡ºä»€ä¹ˆé”™è¯¯ä¿¡æ¯ï¼Ÿ
2. å¦‚æœæˆ‘ä»¬ä½¿ç”¨ReadDiræ¥è¯»å–è¯¸å¦‚â€œ/etc/hostsâ€è¿™æ ·çš„æ–‡ä»¶è€Œä¸æ˜¯æ–‡ä»¶å¤¹çš„æ—¶å€™ï¼Œç¨‹åºä¼šæ‰“å°å‡ºä»€ä¹ˆé”™è¯¯ä¿¡æ¯ï¼Ÿ

### ä¼˜é›…çš„é”™è¯¯å¤„ç†

- å‡å°‘é”™è¯¯å¤„ç†ä»£ç çš„ä¸€ç§ç­–ç•¥æ˜¯ï¼šå°†ç¨‹åºä¸­ä¸ä¼šå‡ºé”™çš„éƒ¨åˆ†å’ŒåŒ…å«æ½œåœ¨é”™è¯¯éšæ‚£çš„éƒ¨åˆ†éš”ç¦»å¼€æ¥ã€‚
- å¯¹äºä¸å¾—ä¸è¿”å›é”™è¯¯çš„ä»£ç ï¼Œåº”å°½åŠ›ç®€åŒ–ç›¸åº”çš„é”™è¯¯å¤„ç†ä»£ç ã€‚
- Errors are values.
- Donâ€™t just check errors, handle them gracefully.
- Donâ€™t panic.
- Make the zero value useful.
- The bigger the interface, the weaker the abstraction.
- interface{} says nothing.
- Gofmtâ€™s style is no oneâ€™s favorite, yet gofmt is everyoneâ€™s favorite.
- Documentation is for users.
- A little copying is better than a little dependency.
- Clear is better than clever.
- Concurrency is not parallelism.
- Donâ€™t communicate by sharing memory, share memory bycommunicating.
- Channels orchestrate; mutexes serialize.

### æ–‡ä»¶å†™å…¥

- å†™å…¥æ–‡ä»¶çš„æ—¶å€™å¯èƒ½å‡ºé”™ï¼š
  - è·¯å¾„ä¸æ­£ç¡®
  - æƒé™ä¸å¤Ÿ
  - ç£ç›˜ç©ºé—´ä¸è¶³
  - â€¦
- æ–‡ä»¶å†™å…¥å®Œæ¯•åï¼Œå¿…é¡»è¢«å…³é—­ï¼Œç¡®ä¿æ–‡ä»¶è¢«åˆ·åˆ°ç£ç›˜ä¸Šï¼Œé¿å…èµ„æºçš„æ³„éœ²ã€‚

```go
package main

import (
  "fmt"
  "os"
)

func proverbs(name string) error {
  f, err := os.Create(name)
  if err != nil {
    return err
  }
  
  _, err = fmt.Fprintln(f, "Errors are values.")
  if err != nil {
    f.Close()
    return err
  }
  
  _, err = fmt.Fprintln(f, "Don't just check errors, handle them gracefully.")
  f.Close()
  return err
}

func main() {
  err := proverbs("proverbs.txt")
  if err != nil {
    fmt.Println(err)
    os.Exit(1)
  }
}
```

### å†…ç½®ç±»å‹error

- å†…ç½®ç±»å‹errorç”¨æ¥è¡¨ç¤ºé”™è¯¯ã€‚

### å°æµ‹è¯•

- ä¸ºä»€ä¹ˆå‡½æ•°åº”è¿”å›é”™è¯¯è€Œä¸æ˜¯é€€å‡ºç¨‹åºï¼Ÿ

### deferå…³é”®å­—

- ä½¿ç”¨deferå…³é”®å­—ï¼ŒGoå¯ä»¥ç¡®ä¿æ‰€æœ‰deferredçš„åŠ¨ä½œå¯ä»¥åœ¨å‡½æ•°è¿”å›å‰æ‰§è¡Œã€‚

```go
package main

import (
  "fmt"
  "os"
)

func proverbs(name string) error {
  f, err := os.Create(name)
  if err != nil {
    return err
  }
  defer f.Close()
  
  _, err = fmt.Fprintln(f, "Errors are values.")
  if err != nil {
    return err
  }
  
  _, err = fmt.Fprintln(f, "Don't just check errors, handle them gracefully.")
  return err
}

func main() {
  err := proverbs("proverbs.txt")
  if err != nil {
    fmt.Println(err)
    os.Exit(1)
  }
}
```

- å¯ä»¥deferä»»æ„çš„å‡½æ•°å’Œæ–¹æ³•ã€‚
- deferå¹¶ä¸æ˜¯ä¸“é—¨åšé”™è¯¯å¤„ç†çš„ã€‚
- deferå¯ä»¥æ¶ˆé™¤å¿…é¡»æ—¶åˆ»æƒ¦è®°æ‰§è¡Œèµ„æºé‡Šæ”¾çš„è´Ÿæ‹…

### å°æµ‹è¯•

- deferçš„åŠ¨ä½œä»€ä¹ˆæ—¶å€™ä¼šè¢«æ‰§è¡Œï¼Ÿ

### æœ‰åˆ›æ„çš„é”™è¯¯å¤„ç†

```go
package main

import (
  "fmt"
  "io"
)

type safeWriter struct {
  w io.Writer
  err error
}

func (sw *safeWriter) writeln(s string) {
  if sw.err != nil {
    return
  }
  _, sw.err = fmt.Fprintln(sw.w, s)
}

func proverbs(name string) error {
  f, err := os.Create(name)
  if err != nil {
    return err
  }
  defer f.Close()
  
  sw := safeWriter{w: f}
  sw.writeln("Errors are values.")
  sw.writeln("Donâ€™t just check errors, handle them gracefully.")
  sw.writeln("Donâ€™t panic.")
  sw.writeln("Make the zero value useful.")
  
  return sw.err
}

func main() {
  
}
```

### å°æµ‹è¯•

- åœ¨ä¾‹å­ä¸­ï¼Œå¦‚æœåœ¨å°† â€œClear is better than clever.â€å†™å…¥åˆ°æ–‡ä»¶çš„è¿‡ç¨‹ä¸­å‡ºé”™äº†ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥ä¼šå‘ç”Ÿå“ªäº›äº‹ä»¶ï¼Ÿ

### New error

- errorsåŒ…é‡Œæœ‰ä¸€ä¸ªæ„é€ ç”¨Newå‡½æ•°ï¼Œå®ƒæ¥æ”¶stringä½œä¸ºå‚æ•°ç”¨æ¥è¡¨ç¤ºé”™è¯¯ä¿¡æ¯ã€‚è¯¥å‡½æ•°è¿”å›errorç±»å‹ã€‚

```go
package main

import (
  "errors"
  "fmt"
  "os"
)

const rows, columns = 9, 9

// Grid is a Sudoku grid
type Grid [rows][columns]int8

// Set ...
func (g *Grid) Set(row, column int, digit int8) error {
  if !inBounds(row, column) {
    return errors.New("out of bounds")
  }
  
  g[row][column] = digit
  return nil
}

func inBounds(row, column int) bool {
  if row < 0 || row >= rows {
    return false
  }
  if column < 0 || column >= columns {
    return false
  }
  return true
}

func main() {
  var g Grid
  err := g.Set(10, 0, 5)
  if err != nil {
    fmt.Printf("An error occurred: %v.\n", err)
    os.Exit(1)
  }
}
```

### æç¤º

- é”™è¯¯ä¿¡æ¯åº”å…·æœ‰ä¿¡æ¯æ€§
- å¯ä»¥æŠŠé”™è¯¯ä¿¡æ¯å½“ä½œç”¨æˆ·ç•Œé¢çš„ä¸€éƒ¨åˆ†ï¼Œæ— è®ºå¯¹æœ€ç»ˆç”¨æˆ·è¿˜æ˜¯å¼€å‘è€…ã€‚

### å°æµ‹è¯•

- åœ¨å‡½æ•°é‡Œï¼Œé¦–å…ˆç¼–å†™å¯¹è¾“å…¥å‚æ•°çš„é˜²å«æ€§ä»£ç æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ

### æŒ‰éœ€è¿”å›é”™è¯¯

- æŒ‰ç…§æƒ¯ä¾‹ï¼ŒåŒ…å«é”™è¯¯ä¿¡æ¯çš„å˜é‡ååº”ä»¥Errå¼€å¤´ã€‚

```go
package main

import (
  "errors"
  "fmt"
  "os"
)

const rows, columns = 9, 9

// Grid is a Sudoku grid
type Grid [rows][columns]int8

var (
  // ErrBounds ...
  ErrBounds = errors.New("out of bounds")
  // ErrDigit ...
  ErrDigit = errors.New("invalid digit")
)

// Set ...
func (g *Grid) Set(row, column int, digit int8) error {
  if !inBounds(row, column) {
    return ErrBounds
  }
  
  g[row][column] = digit
  return nil
}

func inBounds(row, column int) bool {
  if row < 0 || row >= rows {
    return false
  }
  if column < 0 || column >= columns {
    return false
  }
  return true
}

func main() {
  var g Grid
  err := g.Set(10, 0, 5)
  if err != nil {
    switch err { // æŒ‡é’ˆ å†…å­˜åœ°å€
      case ErrBounds, ErrDigit:
       fmt.Println("Les erreurs de parametres hors limites.")
      default:
       fmt.Println(err)
    }
    os.Exit(1)
  }
}
```

- errors.Newè¿™ä¸ªæ„é€ å‡½æ•°æ˜¯ä½¿ç”¨æŒ‡é’ˆå®ç°çš„ï¼Œæ‰€ä»¥ä¸Šä¾‹ä¸­çš„switchè¯­å¥æ¯”è¾ƒçš„æ˜¯å†…å­˜åœ°å€ï¼Œè€Œä¸æ˜¯é”™è¯¯åŒ…å«çš„æ–‡å­—ä¿¡æ¯ã€‚

### å°æµ‹è¯•

- ç¼–å†™ä¸€ä¸ªvalidDigitå‡½æ•°ï¼Œç”¨å®ƒæ¥ä¿è¯Setå‡½æ•°åªæ¥å—1åˆ°9ä¹‹é—´çš„æ•°å€¼ã€‚

### è‡ªå®šä¹‰é”™è¯¯ç±»å‹

- errorç±»å‹æ˜¯ä¸€ä¸ªå†…ç½®çš„æ¥å£ï¼šä»»ä½•ç±»å‹åªè¦å®ç°äº†è¿”å›stringçš„Error()æ–¹æ³•å°±æ»¡è¶³äº†è¯¥æ¥å£ã€‚
- å¯ä»¥åˆ›å»ºæ–°çš„é”™è¯¯ç±»å‹ã€‚

```go
package main

import (
  "errors"
  "fmt"
  "os"
)

const rows, columns = 9, 9

// Grid is a Sudoku grid
type Grid [rows][columns]int8

var (
  // ErrBounds ...
  ErrBounds = errors.New("out of bounds")
  // ErrDigit ...
  ErrDigit = errors.New("invalid digit")
)

// SudokuError ...
type SudokuError []error

// Error returns one or more errors separated by commas.
func (se SudokuError) Error() string {
  var s []string
  for _, err := range se {
    s = append(s, err.Error())
  }
  return strings.Join(s, ", ")
}

// Set ...
func (g *Grid) Set(row, column int, digit int8) error {
  var errs SudokuError
  if !inBounds(row, column) {
    errs = append(errs, ErrBounds)
  }
  if !validDight(digit) {
    errs = append(errs, ErrDigit)
  }
  if len(errs) > 0 {
    return errs
  }
  
  g[row][column] = digit
  return nil
}

func inBounds(row, column int) bool {
  if row < 0 || row >= rows {
    return false
  }
  if column < 0 || column >= columns {
    return false
  }
  return true
}

func main() {
  var g Grid
  err := g.Set(12, 0, 15)
  if err != nil {
    switch err { // æŒ‡é’ˆ å†…å­˜åœ°å€
      case ErrBounds, ErrDigit:
       fmt.Println("Les erreurs de parametres hors limites.")
      default:
       fmt.Println(err)
    }
    os.Exit(1)
  }
}
```

- æŒ‰ç…§æƒ¯ä¾‹ï¼Œè‡ªå®šä¹‰é”™è¯¯ç±»å‹çš„åå­—åº”ä»¥Errorç»“å°¾ã€‚
- æœ‰æ—¶å€™åå­—å°±æ˜¯Errorï¼Œä¾‹å¦‚url.Error

### å°æµ‹è¯•

- ä¸Šä¾‹ä¸­ï¼Œå¦‚æœæ“ä½œæˆåŠŸæ—¶ï¼ŒSetæ–¹æ³•è¿”å›ç©ºçš„error sliceï¼Œé‚£ä¹ˆä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ

### ç±»å‹æ–­è¨€

- ä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»å‹æ–­è¨€æ¥è®¿é—®æ¯ä¸€ç§é”™è¯¯ã€‚
- ä½¿ç”¨ç±»å‹æ–­è¨€ï¼Œä½ å¯ä»¥æŠŠæ¥å£ç±»å‹è½¬åŒ–æˆåº•å±‚çš„å…·ä½“ç±»å‹ã€‚
  - ä¾‹å¦‚ï¼šerr.(SudokuError)

```go
package main

import (
  "errors"
  "fmt"
  "os"
)

const rows, columns = 9, 9

// Grid is a Sudoku grid
type Grid [rows][columns]int8

var (
  // ErrBounds ...
  ErrBounds = errors.New("out of bounds")
  // ErrDigit ...
  ErrDigit = errors.New("invalid digit")
)

// SudokuError ...
type SudokuError []error

// Error returns one or more errors separated by commas.
func (se SudokuError) Error() string {
  var s []string
  for _, err := range se {
    s = append(s, err.Error())
  }
  return strings.Join(s, ", ")
}

// Set ...
func (g *Grid) Set(row, column int, digit int8) error {
  var errs SudokuError
  if !inBounds(row, column) {
    errs = append(errs, ErrBounds)
  }
  if !validDight(digit) {
    errs = append(errs, ErrDigit)
  }
  if len(errs) > 0 {
    return errs
  }
  
  g[row][column] = digit
  return nil
}

func inBounds(row, column int) bool {
  if row < 0 || row >= rows {
    return false
  }
  if column < 0 || column >= columns {
    return false
  }
  return true
}

func main() {
  var g Grid
  err := g.Set(12, 0, 15)
  if err != nil {
    if errs, ok := err.(SudokuError); ok {
      fmt.Printf("%d error(s) occurred:\n", len(errs))
      for _, e := range errs {
        fmt.Printf("- %v\n", e)
      }
    }
    os.Exit(1)
  }
}
```

- å¦‚æœç±»å‹æ»¡è¶³å¤šä¸ªæ¥å£ï¼Œé‚£ä¹ˆç±»å‹æ–­è¨€å¯ä½¿å®ƒä»ä¸€ä¸ªæ¥å£ç±»å‹è½¬åŒ–ä¸ºå¦ä¸€ä¸ªæ¥å£ç±»å‹ã€‚

### å°æµ‹è¯•

- è¿™ä¸ªç±»å‹æ–­è¨€err.(SudokuError)åšäº†ä»€ä¹ˆï¼Ÿ

### ä¸è¦ææ…Œï¼ˆdonâ€™t panicï¼‰

- Goæ²¡æœ‰å¼‚å¸¸ï¼Œå®ƒæœ‰ä¸ªç±»ä¼¼æœºåˆ¶panicã€‚
- å½“panicå‘ç”Ÿï¼Œé‚£ä¹ˆç¨‹åºå°±ä¼šå´©æºƒã€‚

### å…¶å®ƒè¯­è¨€çš„å¼‚å¸¸vs Goçš„é”™è¯¯å€¼

- å…¶å®ƒè¯­è¨€çš„å¼‚å¸¸åœ¨è¡Œä¸ºå’Œå®ç°ä¸Šä¸Goè¯­è¨€çš„é”™è¯¯å€¼æœ‰å¾ˆå¤§çš„ä¸åŒï¼š
  - å¦‚æœå‡½æ•°æŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶ä¸”é™„è¿‘æ²¡äººæ•è·å®ƒï¼Œé‚£ä¹ˆå®ƒå°±ä¼šâ€œå†’æ³¡â€åˆ°å‡½æ•°çš„è°ƒç”¨è€…é‚£é‡Œï¼Œå¦‚æœè¿˜æ²¡æœ‰äººè¿›è¡Œæ•è·ï¼Œé‚£ä¹ˆå°±ç»§ç»­â€œå†’æ³¡â€åˆ°æ›´ä¸Šå±‚çš„è°ƒç”¨è€…â€¦ç›´åˆ°è¾¾åˆ°æ ˆï¼ˆStackï¼‰çš„é¡¶éƒ¨ï¼ˆä¾‹å¦‚mainå‡½æ•°ï¼‰ã€‚
  - å¼‚å¸¸è¿™ç§é”™è¯¯å¤„ç†æ–¹å¼å¯è¢«çœ‹ä½œæ˜¯å¯é€‰çš„ï¼š
    - ä¸å¤„ç†å¼‚å¸¸ï¼Œå°±ä¸éœ€è¦åŠ å…¥å…¶å®ƒä»£ç ã€‚
    - æƒ³è¦å¤„ç†å¼‚å¸¸ï¼Œå°±éœ€è¦åŠ å…¥ç›¸å½“æ•°é‡çš„ä¸“ç”¨ä»£ç ã€‚
  - Goè¯­è¨€ä¸­çš„é”™è¯¯å€¼æ›´ç®€å•çµæ´»:
    - å¿½ç•¥é”™è¯¯æ˜¯æœ‰æ„è¯†çš„å†³å®šï¼Œä»ä»£ç ä¸Šçœ‹ä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚

### å°æµ‹è¯•

- å’Œå¼‚å¸¸ç›¸æ¯”ï¼ŒGoçš„é”™è¯¯å€¼æœ‰å“ªä¸¤ä¸ªå¥½å¤„ï¼Ÿ

### å¦‚ä½•panic

- Goé‡Œæœ‰ä¸€ä¸ªå’Œå…¶ä»–è¯­è¨€å¼‚å¸¸ç±»ä¼¼çš„æœºåˆ¶ï¼španicã€‚
- å®é™…ä¸Šï¼Œpanicå¾ˆå°‘å‡ºç°ã€‚
- åˆ›å»ºpanicï¼š
  - panic(â€œI forgot my towelâ€)
    - panicçš„å‚æ•°å¯ä»¥æ˜¯ä»»æ„ç±»å‹

### é”™è¯¯å€¼ã€panicã€os.Exit ?

- é€šå¸¸ï¼Œæ›´æ¨èä½¿ç”¨é”™è¯¯å€¼ï¼Œå…¶æ¬¡æ‰æ˜¯panicã€‚
- panicæ¯”os.Exitæ›´å¥½ï¼španicåä¼šæ‰§è¡Œæ‰€æœ‰deferçš„åŠ¨ä½œï¼Œè€Œos.Exitåˆ™ä¸ä¼šã€‚
- æœ‰æ—¶å€™Goç¨‹åºä¼španicè€Œä¸æ˜¯è¿”å›é”™è¯¯å€¼

```go
package main

import "fmt"

func main() {
  var zero int
  _ = 42 / zero // panic
}
```

### å°æµ‹è¯•

- ä½ çš„ç¨‹åºåº”è¯¥åœ¨ä»€ä¹ˆæ—¶å€™panicï¼Ÿ

### ä¿æŒå†·é™å¹¶ç»§ç»­

- ä¸ºäº†é˜²æ­¢panicå¯¼è‡´ç¨‹åºå´©æºƒï¼ŒGoæä¾›äº† recover å‡½æ•°ã€‚
- deferçš„åŠ¨ä½œä¼šåœ¨å‡½æ•°è¿”å›å‰æ‰§è¡Œï¼Œå³ä½¿å‘ç”Ÿäº†panicã€‚
- ä½†å¦‚æœdeferçš„å‡½æ•°è°ƒç”¨äº†recoverï¼Œpanicå°±ä¼šåœæ­¢ï¼Œç¨‹åºå°†ç»§ç»­è¿è¡Œã€‚

```go
package main

import "fmt"

func main() {
  defer func() {
    if e := recover(); e != nil {
      fmt.Println(e)
    }
  }()
  
  panic("I forgot my towel")
}
```

### å°æµ‹è¯•

- åœ¨å“ªé‡Œå¯ä»¥ä½¿ç”¨å†…ç½®çš„recoverå‡½æ•°ï¼Ÿ

### ä½œä¸šé¢˜

- ç¼–å†™ä¸€ä¸ªç¨‹åºï¼š
  - åœ¨Goæ ‡å‡†åº“é‡Œï¼Œæœ‰ä¸ªå‡½æ•°å¯ä»¥è§£æç½‘å€ï¼ˆgolang.org/pkg/net/url/#Parseï¼‰ï¼š
  - ä½¿ç”¨ä¸€ä¸ªéæ³•ç½‘å€ä¼ é€’åˆ°url.Parseå‡½æ•°ï¼ŒæŠŠå‘ç”Ÿçš„é”™è¯¯æ˜¾ç¤ºå‡ºæ¥ã€‚
  - ä½¿ç”¨%#vå’ŒPrintfæ‰“å°é”™è¯¯ï¼Œçœ‹çœ‹éƒ½æ˜¾ç¤ºä»€ä¹ˆã€‚
  - ç„¶åæ‰§è¡Œ*url.Errorç±»å‹æ–­è¨€ï¼Œæ¥è®¿é—®å’Œæ‰“å°åº•å±‚ç»“æ„ä½“çš„å­—æ®µå’Œå†…å®¹ã€‚

## äºŒåä¹ã€ç¬¬å…­éƒ¨åˆ†ä¹ é¢˜

å•å…ƒå®éªŒï¼šæ•°ç‹¬è§„åˆ™

## ä¸‰åã€goroutineå’Œå¹¶å‘ï¼ˆconcurrentï¼‰

### ä¸€ä¸ªåœ°é¼ ï¼ˆgopherï¼‰å·¥å‚

### goroutine

- åœ¨Goä¸­ï¼Œç‹¬ç«‹çš„ä»»åŠ¡å«åšgoroutine
  - è™½ç„¶goroutineä¸å…¶å®ƒè¯­è¨€ä¸­çš„åç¨‹ã€è¿›ç¨‹ã€çº¿ç¨‹éƒ½æœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œä½†goroutineå’Œå®ƒä»¬å¹¶ä¸å®Œå…¨ç›¸
  - Goroutineåˆ›å»ºæ•ˆç‡éå¸¸é«˜
  - Goèƒ½ç›´æˆªäº†å½“çš„ååŒå¤šä¸ªå¹¶å‘ï¼ˆconcurrentï¼‰æ“ä½œ
- åœ¨æŸäº›è¯­è¨€ä¸­ï¼Œå°†é¡ºåºå¼ä»£ç è½¬åŒ–ä¸ºå¹¶å‘å¼ä»£ç éœ€è¦åšå¤§é‡ä¿®æ”¹
- åœ¨Goé‡Œï¼Œæ— éœ€ä¿®æ”¹ç°æœ‰é¡ºåºå¼çš„ä»£ç ï¼Œå°±å¯ä»¥é€šè¿‡goroutineä»¥å¹¶å‘çš„æ–¹å¼è¿è¡Œä»»æ„æ•°é‡çš„ä»»åŠ¡ã€‚

### å¯åŠ¨goroutine

- åªéœ€åœ¨è°ƒç”¨å‰é¢åŠ ä¸€ä¸ªgoå…³é”®å­—ã€‚

```go
package main

import (
  "fmt"
  "time"
)

func main() {
  go sleepyGopher()
  time.Sleep(4 * time.Second)
}

func sleepyGopher() {
  time.Sleep(3 * time.Second) 
  fmt.Println("...snore...")
}
```

### å°æµ‹è¯•

1. æ€æ ·æ‰èƒ½åœ¨Goè¯­è¨€é‡ŒåŒæ—¶åšä¸æ­¢ä¸€ä»¶äº‹æƒ…ï¼Ÿ
2. ä½¿ç”¨ä»€ä¹ˆå…³é”®å­—å¯ä»¥å¯åŠ¨ä¸€ä¸ªæ–°çš„ã€ç‹¬ç«‹è¿è¡Œçš„ä»»åŠ¡ï¼Ÿ

### ä¸æ­¢ä¸€ä¸ªgoroutine

- æ¯æ¬¡ä½¿ç”¨goå…³é”®å­—éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„goroutineã€‚
- è¡¨é¢ä¸Šçœ‹ï¼Œgoroutineä¼¼ä¹åœ¨åŒæ—¶è¿è¡Œï¼Œä½†ç”±äºè®¡ç®—æœºå¤„ç†å•å…ƒæœ‰é™ï¼Œå…¶å®æŠ€æœ¯ä¸Šæ¥è¯´ï¼Œè¿™äº›goroutineä¸æ˜¯çœŸçš„åœ¨åŒæ—¶è¿è¡Œã€‚
  - è®¡ç®—æœºå¤„ç†å™¨ä¼šä½¿ç”¨â€œåˆ†æ—¶â€æŠ€æœ¯ï¼Œåœ¨å¤šä¸ªgoroutineä¸Šè½®æµèŠ±è´¹ä¸€äº›æ—¶é—´ã€‚
  - åœ¨ä½¿ç”¨goroutineæ—¶ï¼Œå„ä¸ªgoroutineçš„æ‰§è¡Œé¡ºåºæ— æ³•ç¡®å®šã€‚

```go
package main

import (
  "fmt"
  "time"
)

func main() {
  for i := 0; i < 5; i++ {
    go sleepyGopher()
  }
  time.Sleep(4 * time.Second)
}

func sleepyGopher() {
  time.Sleep(3 * time.Second) 
  fmt.Println("...snore...")
}
```

### goroutineçš„å‚æ•°

- å‘goroutineä¼ é€’å‚æ•°å°±è·Ÿå‘å‡½æ•°ä¼ é€’å‚æ•°ä¸€æ ·ï¼Œå‚æ•°éƒ½æ˜¯æŒ‰å€¼ä¼ é€’çš„ï¼ˆä¼ å…¥çš„æ˜¯å‰¯æœ¬ï¼‰

```go
package main

import (
  "fmt"
  "time"
)

func main() {
  for i := 0; i < 5; i++ {
    go sleepyGopher(i)
  }
  time.Sleep(4 * time.Second)
}

func sleepyGopher(id int) {
  time.Sleep(3 * time.Second) 
  fmt.Println("...snore...", id)
}
```

### å°æµ‹è¯•

- å¤šä¸ªä¸åŒçš„goroutineå°†ä»¥ä½•ç§é¡ºåºæ‰§è¡Œï¼Ÿ

### é€šé“channel

- é€šé“ï¼ˆchannelï¼‰å¯ä»¥åœ¨å¤šä¸ªgoroutineä¹‹é—´å®‰å…¨çš„ä¼ å€¼ã€‚
- é€šé“å¯ä»¥ç”¨ä½œå˜é‡ã€å‡½æ•°å‚æ•°ã€ç»“æ„ä½“å­—æ®µâ€¦
- åˆ›å»ºé€šé“ç”¨makeå‡½æ•°ï¼Œå¹¶æŒ‡å®šå…¶ä¼ è¾“æ•°æ®çš„ç±»å‹
  - c := make(chan int)

### é€šé“channelå‘é€ã€æ¥æ”¶

- ä½¿ç”¨å·¦ç®­å¤´æ“ä½œç¬¦ <- å‘é€šé“å‘é€å€¼ æˆ– ä»é€šé“æ¥æ”¶å€¼
  - å‘é€šé“å‘é€å€¼ï¼šc <- 99
  - ä»é€šé“æ¥æ”¶å€¼ï¼šr := <- c
- å‘é€æ“ä½œä¼šç­‰å¾…ç›´åˆ°å¦ä¸€ä¸ªgoroutineå°è¯•å¯¹è¯¥é€šé“è¿›è¡Œæ¥æ”¶æ“ä½œä¸ºæ­¢ã€‚
  - æ‰§è¡Œå‘é€æ“ä½œçš„goroutineåœ¨ç­‰å¾…æœŸé—´å°†æ— æ³•æ‰§è¡Œå…¶å®ƒæ“ä½œ
  - æœªåœ¨ç­‰å¾…é€šé“æ“ä½œçš„goroutineå¯ä»¥ç»§ç»­è‡ªç”±çš„è¿è¡Œ
- æ‰§è¡Œæ¥æ”¶æ“ä½œçš„goroutineå°†ç­‰å¾…ç›´åˆ°å¦ä¸€ä¸ªgoroutineå°è¯•å‘è¯¥é€šé“è¿›è¡Œå‘é€æ“ä½œä¸ºæ­¢ã€‚

```go
package main

import (
  "fmt"
  "time"
)

func main() {
  c := make(chan int)
  for i := 0; i < 5; i++ {
    go sleepyGopher(i, c)
  }
  for i := 0; i < 5; i++ {
    gopherID := <- c
    fmt.Println("gopher ", gopherID, " has finished sleeping")
  }
}

func sleepyGopher(id int, c chan int) {
  time.Sleep(3 * time.Second) 
  fmt.Println("...snore...", id)
  c <- id
}
```

### é€šé“ ä¾‹å­

### å°æµ‹è¯•

1. åº”è¯¥ä½¿ç”¨ä»€ä¹ˆè¯­å¥ï¼Œæ‰èƒ½å°†å­—ç¬¦ä¸²â€œhello worldâ€å‘é€è‡³åä¸ºcçš„é€šé“ï¼Ÿ
2. å¦‚ä½•æ‰èƒ½ä»é€šé“ä¸­æ¥æ”¶å€¼å¹¶å°†å…¶èµ‹ç»™å˜é‡ï¼Ÿ

### ä½¿ç”¨selectå¤„ç†å¤šä¸ªé€šé“

- ç­‰å¾…ä¸åŒç±»å‹çš„å€¼ã€‚
- time.Afterå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªé€šé“ï¼Œè¯¥é€šé“åœ¨æŒ‡å®šæ—¶é—´åä¼šæ¥æ”¶åˆ°ä¸€ä¸ªå€¼ï¼ˆå‘é€è¯¥å€¼çš„goroutineæ˜¯Goè¿è¡Œæ—¶çš„ä¸€éƒ¨åˆ†ï¼‰ã€‚
- selectå’Œswitchæœ‰ç‚¹åƒã€‚
  - è¯¥è¯­å¥åŒ…å«çš„æ¯ä¸ªcaseéƒ½æŒæœ‰ä¸€ä¸ªé€šé“ï¼Œç”¨æ¥å‘é€æˆ–æ¥æ”¶æ•°æ®ã€‚
  - selectä¼šç­‰å¾…ç›´åˆ°æŸä¸ªcaseåˆ†æ”¯çš„æ“ä½œå°±ç»ªï¼Œç„¶åå°±ä¼šæ‰§è¡Œè¯¥caseåˆ†æ”¯ã€‚

```go
package main

import (
  "fmt"
  "time"
)

func main() {
  c := make(chan int)
  for i := 0; i < 5; i++ {
    go sleepyGopher(i, c)
  }
  
  timeout := time.After(2 * time.Second)
  for i := 0; i < 5; i++ {
    select {
      case gopherID := <- c:
       fmt.Println("gopher ", gopherID, " has finished sleeping")
      case <- timeout:
       fmt.Println("my patience ran out")
       return
    }
    
  }
}

func sleepyGopher(id int, c chan int) {
  time.Sleep(time.Duration(rand.Intn(4000)) * time.Millisecond) 
  c <- id
}
```

- æ³¨æ„ï¼šå³ä½¿å·²ç»åœæ­¢ç­‰å¾…goroutineï¼Œä½†åªè¦mainå‡½æ•°è¿˜æ²¡è¿”å›ï¼Œä»åœ¨è¿è¡Œçš„goroutineå°†ä¼šç»§ç»­å ç”¨å†…å­˜ã€‚

### selectè¯­å¥

- selectè¯­å¥åœ¨ä¸åŒ…å«ä»»ä½•caseçš„æƒ…å†µä¸‹å°†æ°¸è¿œç­‰ä¸‹å»ã€‚

### nilé€šé“

- å¦‚æœä¸ä½¿ç”¨makeåˆå§‹åŒ–é€šé“ï¼Œé‚£ä¹ˆé€šé“å˜é‡çš„å€¼å°±æ˜¯nilï¼ˆé›¶å€¼ï¼‰
- å¯¹nilé€šé“è¿›è¡Œå‘é€æˆ–æ¥æ”¶ä¸ä¼šå¼•èµ·panicï¼Œä½†ä¼šå¯¼è‡´æ°¸ä¹…é˜»å¡ã€‚
- å¯¹nilé€šé“æ‰§è¡Œcloseå‡½æ•°ï¼Œé‚£ä¹ˆä¼šå¼•èµ·panic
- nilé€šé“çš„ç”¨å¤„ï¼š
  - å¯¹äºåŒ…å«selectè¯­å¥çš„å¾ªç¯ï¼Œå¦‚æœä¸å¸Œæœ›æ¯æ¬¡å¾ªç¯éƒ½ç­‰å¾…selectæ‰€æ¶‰åŠçš„æ‰€æœ‰é€šé“ï¼Œé‚£ä¹ˆå¯ä»¥å…ˆå°†æŸäº›é€šé“è®¾ä¸ºnilï¼Œç­‰åˆ°å‘é€å€¼å‡†å¤‡å°±ç»ªä¹‹åï¼Œå†å°†é€šé“å˜æˆä¸€ä¸ªénilå€¼å¹¶æ‰§è¡Œå‘é€æ“ä½œã€‚

### å°æµ‹è¯•

1. time.Afterè¿”å›ä»€ä¹ˆç±»å‹çš„å€¼ï¼Ÿ
2. å¯¹å€¼ä¸ºnilçš„é€šé“æ‰§è¡Œå‘é€æˆ–æ¥æ”¶æ“ä½œä¼šäº§ç”Ÿä»€ä¹ˆåæœï¼Ÿ
3. selectè¯­å¥çš„æ¯ä¸ªcaseå¯ä»¥åŒ…å«ä»€ä¹ˆï¼Ÿ

### é˜»å¡å’Œæ­»é”

- å½“goroutineåœ¨ç­‰å¾…é€šé“çš„å‘é€æˆ–æ¥æ”¶æ—¶ï¼Œæˆ‘ä»¬å°±è¯´å®ƒè¢«é˜»å¡äº†ã€‚
- é™¤äº†goroutineæœ¬èº«å ç”¨å°‘é‡çš„å†…å­˜å¤–ï¼Œè¢«é˜»å¡çš„goroutineå¹¶ä¸æ¶ˆè€—ä»»ä½•å…¶å®ƒèµ„æºã€‚
  - goroutineé™é™çš„åœåœ¨é‚£é‡Œï¼Œç­‰å¾…å¯¼è‡´å…¶é˜»å¡çš„äº‹æƒ…æ¥è§£é™¤é˜»å¡ã€‚
- å½“ä¸€ä¸ªæˆ–å¤šä¸ªgoroutineå› ä¸ºæŸäº›æ°¸è¿œæ— æ³•å‘ç”Ÿçš„äº‹æƒ…è¢«é˜»å¡æ—¶ï¼Œæˆ‘ä»¬ç§°è¿™ç§æƒ…å†µä¸ºæ­»é”ã€‚è€Œå‡ºç°æ­»é”çš„ç¨‹åºé€šå¸¸ä¼šå´©æºƒæˆ–æŒ‚èµ·ã€‚
- ï¼ˆå¼•å‘æ­»é”çš„ä¾‹å­ï¼‰

```go
package main

func main() {
  c := make(chan int)
  // go func() {c <- 2} ()
  <- c // deadlock æ­»é”
}
```

### å°æµ‹è¯•

- è¢«é˜»å¡çš„goroutineä¼šåšä»€ä¹ˆï¼Ÿ

### åœ°é¼ è£…é…çº¿

```go
package main

func sourceGopher(downstream chan string) {
  for _, v := range []string{"hello world", "a bad apple", "goodbye all"}
  {
    downstream <- v
  }
  downstream <- ""
}

func filterGopher(upstream, downstream chan string) {
  for {
    item := <-upstream
    if item == "" {
      downstream <- ""
      return
    }
    if !strings.Contains(item, "bad") {
      downstream <- item
    }
  }
}

func printGopher(upstream chan string) {
  for {
    v := <-upstream
    if v == "" {
      return
    }
    fmt.Println(v)
  }
}

func main() {
  c0 := make(chan string)
  c1 := make(chan string)
  go sourceGopher(c0)
  go filterGopher(c0, c1)
  printGopher(c1)
}
```

- Goå…è®¸åœ¨æ²¡æœ‰å€¼å¯ä¾›å‘é€çš„æƒ…å†µä¸‹é€šè¿‡closeå‡½æ•°å…³é—­é€šé“
  - ä¾‹å¦‚close(c)
- é€šé“è¢«å…³é—­åæ— æ³•å†™å…¥ä»»ä½•å€¼ï¼Œå¦‚æœå°è¯•å†™å…¥å°†å¼•å‘panicã€‚
- å°è¯•è¯»å–è¢«å…³é—­çš„é€šé“ä¼šè·å¾—ä¸é€šé“ç±»å‹å¯¹åº”çš„é›¶å€¼ã€‚
- æ³¨æ„ï¼šå¦‚æœå¾ªç¯é‡Œè¯»å–ä¸€ä¸ªå·²å…³é—­çš„é€šé“ï¼Œå¹¶æ²¡æ£€æŸ¥é€šé“æ˜¯å¦å…³é—­ï¼Œé‚£ä¹ˆè¯¥å¾ªç¯å¯èƒ½ä¼šä¸€ç›´è¿è½¬ä¸‹å»ï¼Œè€—è´¹å¤§é‡CPUæ—¶é—´
- æ‰§è¡Œä»¥ä¸‹ä»£ç å¯å¾—çŸ¥é€šé“æ˜¯å¦è¢«å…³é—­ï¼š
  - v, ok := <- c

```go
package main

import (
  "fmt"
  "strings"
)

func sourceGopher(downstream chan string) {
  for _, v := range []string{"hello world", "a bad apple", "goodbye all"}
  {
    downstream <- v
  }
  close(downstream)
}

func filterGopher(upstream, downstream chan string) {
  for {
    item, ok := <-upstream
    if !ok {
      close(downstream)
      return
    }
    if !strings.Contains(item, "bad") {
      downstream <- item
    }
  }
}

func printGopher(upstream chan string) {
  for {
    v := <-upstream
    if v == "" {
      return
    }
    fmt.Println(v)
  }
}

func main() {
  c0 := make(chan string)
  c1 := make(chan string)
  go sourceGopher(c0)
  go filterGopher(c0, c1)
  printGopher(c1)
}
```

### å¸¸ç”¨æ¨¡å¼

- ä»é€šé“é‡Œé¢è¯»å–å€¼ï¼Œç›´åˆ°å®ƒå…³é—­ä¸ºæ­¢ã€‚
  - å¯ä»¥ä½¿ç”¨rangeå…³é”®å­—è¾¾åˆ°è¯¥ç›®çš„

```go
package main

import (
  "fmt"
  "strings"
)

func sourceGopher(downstream chan string) {
  for _, v := range []string{"hello world", "a bad apple", "goodbye all"}
  {
    downstream <- v
  }
  close(downstream)
}

//func filterGopher(upstream, downstream chan string) {
//  for {
//    item, ok := <-upstream
//    if !ok {
//      close(downstream)
//      return
//    }
//    if !strings.Contains(item, "bad") {
//      downstream <- item
//    }
//  }
//}

func filterGopher(upstream, downstream chan string) {
  for item := range upstream {
    if !strings.Contains(item, "bad") {
      downstream <- item
    }
  }
  close(downstream)
}

//func printGopher(upstream chan string) {
//  for {
//    v := <-upstream
//    if v == "" {
//      return
//    }
//    fmt.Println(v)
//  }
//}

func printGopher(upstream chan string) {
  for v := range upstream {
    fmt.Println(v)
  }
}

func main() {
  c0 := make(chan string)
  c1 := make(chan string)
  go sourceGopher(c0)
  go filterGopher(c0, c1)
  printGopher(c1)
}
```

### å°æµ‹è¯•

1. å°è¯•è¯»å–ä¸€ä¸ªå·²ç»å…³é—­çš„é€šé“ä¼šå¾—åˆ°ä»€ä¹ˆå€¼ï¼Ÿ
2. å¦‚ä½•æ‰èƒ½æ£€æµ‹é€šé“æ˜¯å¦å·²ç»å…³é—­ï¼Ÿ

### ä½œä¸šé¢˜

1. ç¼–å†™ä¸€ä¸ªæµæ°´çº¿éƒ¨ä»¶ï¼ˆä¸€ä¸ªgoroutineï¼‰ï¼Œä»–éœ€è¦è®°ä½å‰é¢å‡ºç°çš„æ‰€æœ‰å€¼ï¼Œå¹¶ä¸”åªæœ‰åœ¨å€¼ä¹‹å‰ä»æœªå‡ºç°è¿‡çš„æƒ…å†µä¸‹æ‰ä¼šå°†å€¼ä¼ é€’è‡³æµæ°´çº¿çš„ä¸‹ä¸€ä¸ªé˜¶æ®µã€‚å‡å®šç¬¬ä¸€ä¸ªå€¼æ°¸è¿œä¸æ˜¯ç©ºå­—ç¬¦ä¸²ã€‚
2. ç¼–å†™ä¸€ä¸ªæµæ°´çº¿éƒ¨ä»¶ï¼Œå®ƒæ¥æ”¶å­—ç¬¦ä¸²å¹¶å°†å®ƒä»¬æ‹†åˆ†æˆå•è¯ï¼Œç„¶åå‘æµæ°´çº¿çš„ä¸‹ä¸€é˜¶æ®µä¸€ä¸ªæ¥ä¸€ä¸ªçš„å‘é€è¿™äº›å•è¯ã€‚å¯ä»¥ä½¿ç”¨strings.Fieldså‡½æ•°

## ä¸‰åä¸€ã€å¹¶å‘çŠ¶æ€

### å¹¶å‘çŠ¶æ€

- å…±äº«å€¼
- ç«äº‰æ¡ä»¶ï¼ˆrace conditionï¼‰

### Goçš„äº’æ–¥é”ï¼ˆmutexï¼‰

- mutex = mutual exclusive
- Lock()ï¼ŒUnlock()
- syncåŒ…

```go
package main

import "sync"

var mu sync.Mutex

func main() {
  mu.Lock()
  defer mu.Unlock()
  // The lock is held until we return from the function.
}
```

- äº’æ–¥é”å®šä¹‰åœ¨è¢«ä¿æŠ¤çš„å˜é‡ä¹‹ä¸Š

```go
package main

import "sync"

// Visited tracks whether web pages have been bisited.
// Its methods mya be used concurrently from multiple goroutines.
type Visited struct {
  // mu guards the visited map.
  mu sync.Mutex
  visited map[string]int
}

// VisitLink tracks that the page with the given URL has
// been visited, and returns the updated link count.
func (v *Visited) VisitLink(url string) int {
  v.mu.Lokc()
  defer v.mu.Unlock()
  count := v.visited[url]
  count++
  v.visited[url] = count
  return count
}

func main() {
  
}
```

### å°æµ‹è¯•

1. å½“ä¸¤ä¸ªgoroutineåŒæ—¶ä¿®æ”¹ä¸€ä¸ªå€¼çš„æ—¶å€™ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ
2. å°è¯•å¯¹ä¸€ä¸ªå·²è¢«é”å®šçš„äº’æ–¥é”æ‰§è¡Œé”å®šæ“ä½œï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ
3. å°è¯•å¯¹ä¸€ä¸ªæœªè¢«é”å®šçš„äº’æ–¥é”æ‰§è¡Œè§£é”æ“ä½œï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ
4. åŒæ—¶åœ¨å¤šä¸ªä¸åŒçš„goroutineé‡Œé¢è°ƒç”¨ç›¸åŒç±»å‹çš„æ–¹æ³•æ˜¯å®‰å…¨çš„å—ï¼Ÿ

### äº’æ–¥é”çš„éšæ‚£

- æ­»é”
- ä¸ºä¿è¯äº’æ–¥é”çš„å®‰å…¨ä½¿ç”¨ï¼Œæˆ‘ä»¬é¡»éµå®ˆä»¥ä¸‹è§„åˆ™ï¼š
  - å°½å¯èƒ½çš„ç®€åŒ–äº’æ–¥é”ä¿æŠ¤çš„ä»£ç 
  - å¯¹æ¯ä¸€ä»½å…±äº«çŠ¶æ€åªä½¿ç”¨ä¸€ä¸ªäº’æ–¥é”

### å°æµ‹è¯•

- å°è¯•é”å®šä¸€ä¸ªäº’æ–¥é”å¯èƒ½ä¼šå¼•èµ·å“ªä¸¤ä¸ªé—®é¢˜ï¼Ÿ

### é•¿æ—¶é—´è¿è¡Œçš„å·¥ä½œè¿›ç¨‹

- å·¥ä½œè¿›ç¨‹ï¼ˆworkerï¼‰
  - é€šå¸¸ä¼šè¢«å†™æˆåŒ…å«selectè¯­å¥çš„forå¾ªç¯ã€‚

```go
package main

import "fmt"

func worker() {
  for {
    select {
      // Wait for channels here.
    }
  }
}

func main() {
  go worker()
}
```

### äº‹ä»¶å¾ªç¯å’Œgoroutine

- äº‹ä»¶å¾ªç¯ï¼ˆevent loopï¼‰
- ä¸­å¿ƒå¾ªç¯ï¼ˆcentral loopï¼‰
- Goé€šè¿‡æä¾›goroutineä½œä¸ºæ ¸å¿ƒæ¦‚å¿µï¼Œæ¶ˆé™¤äº†å¯¹ä¸­å¿ƒå¾ªç¯çš„éœ€æ±‚ã€‚

ä¾‹å­ä¸€

```go
package main

import (
  "fmt"
  "time"
)

func worker() {
  n := 0
  next := time.After(time.Second)
  for {
    select {
     case <- next:
      n++
      fmt.Println(n)
      next = time.After(time.Second)
    }
  }
}

func main() {
  go worker()
}
```

ä¾‹å­äºŒ

```go
package main

import (
  "fmt"
  "image"
  "time"
)

func worker() {
  pos := image.Point{X: 10, Y: 10}
  direction := image.Point{X: 1, Y: 0}
  next := time.After(time.Second)
  for {
    select {
     case <- next:
      pos = pos.Add(direction)
      fmt.Println("current position is ", pos)
      next = time.After(time.Second)
    }
  }
}

type command int

const (
  right = command(0)
  left = command(1)
)

// RoverDriver drives a rover around the surface of Mars.
type RoverDriver struct {
  commandc chan command
}

// NewRoverDriver ...
func NewRoverDriver() *RoverDriver {
  r := &RoverDriver {
    commandc: make(chan command),
  }
  go r.driver()
  return r
}

// drive is responsible for driving the rover. It
// is expected to be started in a goroutine.
func (r *RoverDriver) drive() {
  pos := image.Point{X: 0, Y: 0}
  direction := image.Point{X: 1, Y: 0}
  updateInterval := 250 * time.Millisecond
  nextMove := time.After(updateInterval)
  for {
    select {
    case c := <-r.commandc:
      switch c {
      case right:
        direction = image.Point {
          X: -direction.Y,
          Y: direction.X,
        }
      case left:
        direction = image.Point {
          X: direction.Y,
          Y: -direction.X,
        }
      }
      log.Printf("new direction %v", direction)
    case <- nextMove:
      pos = pos.Add(direction)
      log.Printf("moved to %v", pos)
      nextMove = time.After(updateInterval)
    }
  }
}

// Left turns the rover left (90Â° counterclockwise).
func (r *RoverDriver) Left() {
  r.commandc <- left
}

// Right turns the rover fight (90Â° clockwise).
func (r *RoverDriver) Right() {
  r.commandc <- right
}

func main() {
  r := NewRoverDriver()
  time.Sleep(3 * time.Second)
  r.Left()
  time.Sleep(3 * time.Second)
  r.Right()
  time.Sleep(3 * time.Second)
}
```

### å°æµ‹è¯•

1. Goæä¾›äº†ä»€ä¹ˆæ¥æ›¿ä»£äº‹ä»¶å¾ªç¯ï¼Ÿ
2. Goæ ‡å‡†åº“ä¸­çš„å“ªä¸ªåŒ…æä¾›äº†Pointæ•°æ®ç±»å‹ï¼Ÿ
3. åœ¨å®ç°é•¿æ—¶é—´è¿è¡Œçš„å·¥ä½œè¿›ç¨‹goroutineæ—¶ï¼Œä½ ä¼šä½¿ç”¨Goä¸­çš„å“ªäº›è¯­å¥ï¼Ÿ
4. å¦‚ä½•éšè—ä½¿ç”¨é€šé“æ—¶çš„å†…éƒ¨ç»†èŠ‚ï¼Ÿ
5. Goçš„é€šé“å¯ä»¥å‘é€å“ªäº›å€¼ï¼Ÿ

### ä½œä¸šé¢˜

1. ä»¥ä¾‹å­ä¸ºåŸºç¡€ï¼Œä¿®æ”¹ä»£ç ä½¿å¾—æ¯æ¬¡ç§»åŠ¨ä¹‹é—´çš„é—´éš”å¢åŠ åŠç§’ã€‚
2. ä»¥RoverDriverç±»å‹ä¸ºåŸºç¡€ï¼Œå®šä¹‰Startæ–¹æ³•ã€Stopæ–¹æ³•å’Œå¯¹åº”çš„å‘½ä»¤ï¼Œç„¶åä¿®æ”¹ä»£ç ä½¿å¾—æ¢æµ‹å™¨å¯ä»¥æ¥å—è¿™ä¸¤ä¸ªæ–°å‘½ä»¤ã€‚

## ä¸‰åäºŒã€ç¬¬ä¸ƒéƒ¨åˆ†ä¹ é¢˜

å•å…ƒå®éªŒï¼šå¯»æ‰¾ç«æ˜Ÿç”Ÿå‘½
