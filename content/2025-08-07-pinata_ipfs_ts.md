+++
title = "TypeScript NFT å¼€å‘å®æˆ˜ï¼šä»é›¶æ„å»º Pinata IPFS è‡ªåŠ¨åŒ–ä¸Šä¼ å·¥å…· (é™„å®Œæ•´æºç )"
description = "TypeScript NFT å¼€å‘å®æˆ˜ï¼šä»é›¶æ„å»º Pinata IPFS è‡ªåŠ¨åŒ–ä¸Šä¼ å·¥å…· (é™„å®Œæ•´æºç )"
date = 2025-08-07T03:35:28Z
[taxonomies]
categories = ["Web3", "NFT", "Pinata", "IPFS"]
tags = ["Web3", "NFT", "Pinata", "IPFS"]
+++

<!-- more -->

# **TypeScript NFT å¼€å‘å®æˆ˜ï¼šä»é›¶æ„å»º Pinata IPFS è‡ªåŠ¨åŒ–ä¸Šä¼ å·¥å…· (é™„å®Œæ•´æºç )**

å¯¹äºæ¯ä¸€ä½NFTé¡¹ç›®å¼€å‘è€…æ¥è¯´ï¼Œå°†æˆç™¾ä¸Šåƒçš„å›¾ç‰‡å’Œå¯¹åº”çš„å…ƒæ•°æ®ï¼ˆMetadataï¼‰ä¸Šä¼ åˆ°IPFSéƒ½æ˜¯ä¸€ä¸ªç›¸å½“ç¹çä¸”å®¹æ˜“å‡ºé”™çš„ç¯èŠ‚ã€‚æ‰‹åŠ¨ä¸€ä¸ªä¸ªä¸Šä¼ ä¸ä»…è€—æ—¶è€—åŠ›ï¼Œè¿˜å¯èƒ½å› ä¸ºç½‘ç»œé—®é¢˜æˆ–æ“ä½œå¤±è¯¯å¯¼è‡´æ•°æ®æ··ä¹±ã€‚

æˆ‘ä»¬æœ€åˆåœ¨ã€ŠNFT å¼€å‘æ ¸å¿ƒæ­¥éª¤ã€‹ä¸€æ–‡ä¸­ï¼Œæ¼”ç¤ºäº†å¦‚ä½•ä¸**æœ¬åœ°IPFSèŠ‚ç‚¹**äº¤äº’ï¼Œè¿™ä¸ºç†è§£å…¶åŸç†æ‰“ä¸‹äº†åŸºç¡€ã€‚ä½†è¦å°†æµç¨‹çœŸæ­£æŠ•å…¥**ç”Ÿäº§ç¯å¢ƒ**ï¼Œæˆ‘ä»¬éœ€è¦æ›´ä¸“ä¸šçš„è§£å†³æ–¹æ¡ˆã€‚

ä¸ºäº†å½»åº•è§£å†³è¿™ä¸ªç—›ç‚¹ï¼Œæˆ‘ç”¨ TypeScript å¼€å‘å¹¶å¼€æºäº†ä¸€æ¬¾ä¸“ä¸º **Pinata** è®¾è®¡çš„è‡ªåŠ¨åŒ–ä¸Šä¼ å·¥å…· ğŸ§°ã€‚å®ƒä¸ä»…èƒ½å®ç°å›¾ç‰‡å’Œå…ƒæ•°æ®çš„ä¸€é”®æ‰¹é‡ä¸Šä¼ ï¼Œè¿˜èƒ½è‡ªåŠ¨ç”Ÿæˆå…¼å®¹ä¸åŒæ™ºèƒ½åˆçº¦çš„å…ƒæ•°æ®æ–‡ä»¶ã€‚

è¿™ç¯‡æ–‡ç« å°†å¸¦ä½ ä»é…ç½®ã€ä»£ç å®ç°åˆ°å®æˆ˜æµ‹è¯•ï¼Œå…¨é¢è§£æè¿™æ¬¾å·¥å…·ï¼Œè®©ä½ å½»åº•å‘Šåˆ«ç¹ççš„ä¸Šä¼ å·¥ä½œï¼Œä¸“æ³¨äºæ›´æœ‰åˆ›é€ æ€§çš„å¼€å‘ï¼ğŸš€

ä¸€æ¬¾é«˜æ•ˆçš„ TypeScript NFT å…ƒæ•°æ®ä¸Šä¼ å·¥å…·ï¼Œä¸“ä¸º Pinata IPFS æ‰“é€ ã€‚æ”¯æŒå•æ–‡ä»¶ä¸æ‰¹é‡ä¸Šä¼ ï¼Œè‡ªåŠ¨ç”Ÿæˆå›¾ç‰‡å’Œå…ƒæ•°æ®ï¼Œå¹¶å…¼å®¹å¸¦/ä¸å¸¦åç¼€çš„åˆçº¦ã€‚å†…ç½®æ—¥å¿—ã€é‡è¯•ã€è¿›åº¦è·Ÿè¸ªç­‰åŠŸèƒ½ï¼Œæå¤§ç®€åŒ–NFTå‘å¸ƒæµç¨‹ï¼Œæ˜¯å¼€å‘è€…çš„æ•ˆç‡åˆ©å™¨ã€‚

## é¡¹ç›®æ¦‚è§ˆ

è¿™æ˜¯ä¸€ä¸ªç”¨äºå°† NFT å›¾ç‰‡å’Œå…ƒæ•°æ®è‡ªåŠ¨åŒ–ä¸Šä¼ åˆ° Pinata IPFS çš„ TypeScript å·¥å…·ã€‚åœ¨æ·±å…¥ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹å®ƒçš„æ•´ä½“ç»“æ„å’Œç¯å¢ƒé…ç½®ã€‚

### æŸ¥çœ‹é¡¹ç›®ç›®å½•ç»“æ„

```bash
âœ tree . -L 6 -I "migrations|mochawesome-report|.anchor|docs|target|node_modules"
.
â”œâ”€â”€ package.json
â”œâ”€â”€ pnpm-lock.yaml
â”œâ”€â”€ README.md
â”œâ”€â”€ src
â”‚   â””â”€â”€ index.ts
â””â”€â”€ tsconfig.json

2 directories, 5 files

```

### ç¯å¢ƒé…ç½®

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
# Pinata é…ç½®
PINATA_JWT=your_pinata_jwt_here
PINATA_GATEWAY=your_pinata_gateway_here

# å…ƒæ•°æ®é…ç½®ï¼ˆå¯é€‰ï¼‰
# å¯é€‰å€¼: .json, .txt, .md, .xml ç­‰
# é»˜è®¤å€¼: .json
METADATA_SUFFIX=.json

# ä¸Šä¼ é…ç½®ï¼ˆå¯é€‰ï¼‰
UPLOAD_TIMEOUT=300000    # ä¸Šä¼ è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼Œé»˜è®¤5åˆ†é’Ÿï¼‰
MAX_RETRIES=3           # æœ€å¤§é‡è¯•æ¬¡æ•°ï¼ˆé»˜è®¤3æ¬¡ï¼‰
RETRY_DELAY=5000        # é‡è¯•å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼Œé»˜è®¤5ç§’ï¼‰
```

### `package.json` æ–‡ä»¶

```json
{
  "name": "pinata-nft-uploader",
  "version": "1.0.0",
  "description": "A TypeScript tool for uploading NFT images and metadata to Pinata IPFS",
  "main": "index.js",
  "scripts": {
    "start": "ts-node src/index.ts",
    "batch": "ts-node src/index.ts batch",
    "batch:no-suffix": "ts-node src/index.ts batch --no-suffix",
    "single": "ts-node src/index.ts single",
    "test": "ts-node src/index.ts test",
    "pin": "ts-node src/index.ts pin",
    "queue": "ts-node src/index.ts queue"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "packageManager": "pnpm@10.8.1",
  "dependencies": {
    "dotenv": "^17.2.1",
    "pinata": "^2.4.9"
  },
  "devDependencies": {
    "@types/node": "^24.1.0",
    "ts-node": "^10.9.2",
    "typescript": "^5.8.3"
  }
}

```

### ä»£ç å®ç°`src/index.ts`

```ts
import { PinataSDK } from "pinata";
import * as fs from "fs/promises";
import { existsSync } from "fs";
import * as path from "path";
import * as dotenv from "dotenv";

// --- ç±»å‹å®šä¹‰ ---
interface UploadResult {
  cid: string;
  size?: number;
  timestamp: string;
}

interface BatchUploadResult {
  timestamp: string;
  imagesFolderCid: string;
  metadataWithSuffixCid?: string;
  metadataWithoutSuffixCid?: string;
  imageCount: number;
  metadataFiles: Array<{
    tokenId: string;
    metadataFileWithSuffix: string;
    metadataFileWithoutSuffix: string;
  }>;
  totalSize: number;
  uploadTime: number;
}

interface SingleUploadResult {
  timestamp: string;
  imageCid: string;
  metadataCid: string;
  imageUrl: string;
  metadataUrl: string;
  gatewayImageUrl: string;
  gatewayMetadataUrl: string;
  metadata: any;
  uploadTime: number;
}

interface Config {
  pinataJwt: string;
  pinataGateway: string;
  metadataSuffix: string;
  uploadTimeout: number;
  maxRetries: number;
  retryDelay: number;
  maxFileSize: number;
  maxTotalSize: number;
}

// --- é…ç½®ç®¡ç† ---
class ConfigManager {
  private config: Config;

  constructor() {
    dotenv.config();
    this.config = this.loadConfig();
  }

  private loadConfig(): Config {
    const pinataJwt = process.env.PINATA_JWT;
    const pinataGateway = process.env.PINATA_GATEWAY;

    if (!pinataJwt) {
      throw new Error("âŒ è¯·åœ¨ .env æ–‡ä»¶ä¸­è®¾ç½® PINATA_JWT");
    }
    if (!pinataGateway) {
      throw new Error("âŒ è¯·åœ¨ .env æ–‡ä»¶ä¸­è®¾ç½® PINATA_GATEWAY");
    }

    return {
      pinataJwt,
      pinataGateway,
      metadataSuffix: process.env.METADATA_SUFFIX || ".json",
      uploadTimeout: parseInt(process.env.UPLOAD_TIMEOUT || "300000"),
      maxRetries: parseInt(process.env.MAX_RETRIES || "3"),
      retryDelay: parseInt(process.env.RETRY_DELAY || "5000"),
      maxFileSize: parseInt(process.env.MAX_FILE_SIZE || "52428800"), // 50MB
      maxTotalSize: parseInt(process.env.MAX_TOTAL_SIZE || "524288000"), // 500MB
    };
  }

  getConfig(): Config {
    return this.config;
  }
}

// --- æ—¥å¿—ç®¡ç† ---
class Logger {
  private static instance: Logger;
  private logLevel: "info" | "warn" | "error" | "debug" = "info";

  private constructor() {}

  static getInstance(): Logger {
    if (!Logger.instance) {
      Logger.instance = new Logger();
    }
    return Logger.instance;
  }

  setLogLevel(level: "info" | "warn" | "error" | "debug") {
    this.logLevel = level;
  }

  private shouldLog(level: "info" | "warn" | "error" | "debug"): boolean {
    const levels = { debug: 0, info: 1, warn: 2, error: 3 };
    return levels[level] >= levels[this.logLevel];
  }

  log(message: string, level: "info" | "warn" | "error" | "debug" = "info") {
    if (!this.shouldLog(level)) return;

    const timestamp = new Date().toISOString();
    const logMessage = `[${timestamp}] [${level.toUpperCase()}] ${message}`;

    switch (level) {
      case "error":
        console.error(logMessage);
        break;
      case "warn":
        console.warn(logMessage);
        break;
      case "debug":
        console.debug(logMessage);
        break;
      default:
        console.log(logMessage);
    }
  }

  info(message: string) {
    this.log(message, "info");
  }

  warn(message: string) {
    this.log(message, "warn");
  }

  error(message: string) {
    this.log(message, "error");
  }

  debug(message: string) {
    this.log(message, "debug");
  }
}

// --- è¿›åº¦æ˜¾ç¤º ---
class ProgressTracker {
  private startTime: number;
  private intervalId?: NodeJS.Timeout;
  private logger: Logger;

  constructor() {
    this.startTime = Date.now();
    this.logger = Logger.getInstance();
  }

  startProgress(message: string) {
    this.logger.info(message);
    this.intervalId = setInterval(() => {
      const elapsed = Math.floor((Date.now() - this.startTime) / 1000);
      this.logger.info(`â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: ${elapsed} ç§’`);
    }, 10000); // æ¯10ç§’æ˜¾ç¤ºä¸€æ¬¡è¿›åº¦
  }

  stopProgress() {
    if (this.intervalId) {
      clearInterval(this.intervalId);
      this.intervalId = undefined;
    }
    const totalTime = Math.floor((Date.now() - this.startTime) / 1000);
    this.logger.info(`âœ… å®Œæˆ! æ€»ç”¨æ—¶: ${totalTime} ç§’`);
  }

  getElapsedTime(): number {
    return Math.floor((Date.now() - this.startTime) / 1000);
  }
}

// --- æ–‡ä»¶å·¥å…·ç±» ---
class FileUtils {
  private static logger = Logger.getInstance();

  static async getFileSize(filePath: string): Promise<number> {
    try {
      const stats = await fs.stat(filePath);
      return stats.size;
    } catch (error) {
      this.logger.error(`è·å–æ–‡ä»¶å¤§å°å¤±è´¥: ${filePath} - ${error}`);
      throw error;
    }
  }

  static async validateFiles(
    files: string[],
    maxFileSize: number,
    maxTotalSize: number
  ): Promise<{
    totalSize: number;
    warnings: string[];
  }> {
    let totalSize = 0;
    const warnings: string[] = [];

    for (const file of files) {
      try {
        const size = await this.getFileSize(file);
        totalSize += size;

        if (size > maxFileSize) {
          warnings.push(
            `æ–‡ä»¶ ${path.basename(file)} è¿‡å¤§ (${(size / 1024 / 1024).toFixed(
              2
            )} MB)`
          );
        }
      } catch (error) {
        this.logger.warn(`æ— æ³•è·å–æ–‡ä»¶å¤§å°: ${file}`);
      }
    }

    if (totalSize > maxTotalSize) {
      warnings.push(
        `æ€»æ–‡ä»¶å¤§å°è¿‡å¤§ (${(totalSize / 1024 / 1024).toFixed(2)} MB)`
      );
    }

    return { totalSize, warnings };
  }

  static async createDirectory(dirPath: string): Promise<void> {
    try {
      await fs.mkdir(dirPath, { recursive: true });
    } catch (error) {
      this.logger.error(`åˆ›å»ºç›®å½•å¤±è´¥: ${dirPath} - ${error}`);
      throw error;
    }
  }

  static async cleanupDirectory(dirPath: string): Promise<void> {
    try {
      if (existsSync(dirPath)) {
        await fs.rm(dirPath, { recursive: true, force: true });
      }
    } catch (error) {
      this.logger.warn(`æ¸…ç†ç›®å½•å¤±è´¥: ${dirPath} - ${error}`);
    }
  }
}

// --- Pinata ä¸Šä¼ å™¨ç±» ---
class PinataUploader {
  private pinata: PinataSDK;
  private config: Config;
  private logger: Logger;

  constructor(config: Config) {
    this.config = config;
    this.pinata = new PinataSDK({
      pinataJwt: config.pinataJwt,
      pinataGateway: config.pinataGateway,
    });
    this.logger = Logger.getInstance();
  }

  async testAuthentication(): Promise<boolean> {
    try {
      const result = await this.pinata.testAuthentication();
      this.logger.info("âœ… Pinata è®¤è¯æˆåŠŸ!");
      return true;
    } catch (error) {
      this.logger.error(`Pinata è®¤è¯å¤±è´¥: ${error}`);
      return false;
    }
  }

  async uploadDirectoryWithRetry(dirPath: string): Promise<string> {
    this.logger.info(`ğŸ“ æ­£åœ¨ä¸Šä¼ æ–‡ä»¶å¤¹: ${dirPath}`);

    let lastError: Error | null = null;

    for (let attempt = 1; attempt <= this.config.maxRetries; attempt++) {
      try {
        const files = await this.readDirectoryFiles(dirPath);
        const totalSizeBytes = files.reduce((sum, file) => sum + file.size, 0);
        let sizeDisplay: string;
        if (totalSizeBytes < 1024) {
          sizeDisplay = `${totalSizeBytes} B`;
        } else if (totalSizeBytes < 1024 * 1024) {
          sizeDisplay = `${(totalSizeBytes / 1024).toFixed(2)} KB`;
        } else {
          sizeDisplay = `${(totalSizeBytes / 1024 / 1024).toFixed(2)} MB`;
        }
        this.logger.info(
          `ğŸ“ æ‰¾åˆ° ${files.length} ä¸ªæ–‡ä»¶ï¼Œæ€»å¤§å°: ${sizeDisplay}`
        );

        const progress = new ProgressTracker();
        progress.startProgress("ğŸš€ å¼€å§‹ä¸Šä¼ åˆ° Pinata...");

        try {
          const response = (await Promise.race([
            this.pinata.upload.public.fileArray(files),
            new Promise<never>((_, reject) =>
              setTimeout(
                () =>
                  reject(new Error("ä¸Šä¼ è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–å°è¯•å‹ç¼©æ–‡ä»¶")),
                this.config.uploadTimeout
              )
            ),
          ])) as any;

          progress.stopProgress();
          this.logger.info(`âœ… æ–‡ä»¶å¤¹ä¸Šä¼ æˆåŠŸ! CID: ${response.cid}`);
          return response.cid;
        } catch (error) {
          progress.stopProgress();
          throw error;
        }
      } catch (error) {
        lastError = error as Error;
        this.logger.error(`ç¬¬ ${attempt} æ¬¡ä¸Šä¼ å¤±è´¥: ${error}`);

        if (attempt < this.config.maxRetries) {
          this.logger.info(
            `â³ ${this.config.retryDelay / 1000} ç§’åé‡è¯•... (${attempt}/${
              this.config.maxRetries
            })`
          );
          await new Promise((resolve) =>
            setTimeout(resolve, this.config.retryDelay)
          );
        }
      }
    }

    this.logger.error(`ä¸Šä¼ å¤±è´¥ï¼Œå·²é‡è¯• ${this.config.maxRetries} æ¬¡`);
    throw lastError;
  }

  async uploadSingleFile(
    filePath: string,
    options: { name?: string } = {}
  ): Promise<string> {
    this.logger.info(`ğŸ“ æ­£åœ¨ä¸Šä¼ å•ä¸ªæ–‡ä»¶: ${filePath}`);

    try {
      const content = await fs.readFile(filePath);
      const fileName = options.name || path.basename(filePath);
      const file = new File([content], fileName, {
        type: this.getMimeType(fileName),
      });

      const response = await this.pinata.upload.public.file(file);
      this.logger.info(`âœ… å•ä¸ªæ–‡ä»¶ä¸Šä¼ æˆåŠŸ! CID: ${response.cid}`);
      return response.cid;
    } catch (error) {
      this.logger.error(`å•ä¸ªæ–‡ä»¶ä¸Šä¼ å¤±è´¥: ${error}`);
      throw error;
    }
  }

  async uploadMetadata(metadata: any, fileName: string): Promise<string> {
    this.logger.info(`ğŸ“„ æ­£åœ¨ä¸Šä¼ å…ƒæ•°æ®: ${fileName}`);

    try {
      const content = JSON.stringify(metadata, null, 2);
      const file = new File([content], fileName, {
        type: "application/json",
      });

      const response = await this.pinata.upload.public.file(file);
      this.logger.info(`âœ… å…ƒæ•°æ®ä¸Šä¼ æˆåŠŸ! CID: ${response.cid}`);
      return response.cid;
    } catch (error) {
      this.logger.error(`å…ƒæ•°æ®ä¸Šä¼ å¤±è´¥: ${error}`);
      throw error;
    }
  }

  async pinByCid(cid: string): Promise<any> {
    this.logger.info(`ğŸ“Œ æ­£åœ¨ Pin CID: ${cid}`);

    try {
      const response = await this.pinata.upload.public.cid(cid);
      this.logger.info(`âœ… CID Pin æˆåŠŸ!`);
      return response;
    } catch (error) {
      this.logger.error(`CID Pin å¤±è´¥: ${error}`);
      throw error;
    }
  }

  async checkPinQueue(): Promise<any> {
    this.logger.info(`ğŸ“Š æ£€æŸ¥ Pin é˜Ÿåˆ—çŠ¶æ€`);

    try {
      const jobs = await this.pinata.files.public.queue().status("prechecking");
      this.logger.info(`âœ… é˜Ÿåˆ—çŠ¶æ€è·å–æˆåŠŸ!`);
      return jobs;
    } catch (error) {
      this.logger.error(`é˜Ÿåˆ—çŠ¶æ€è·å–å¤±è´¥: ${error}`);
      throw error;
    }
  }

  async uploadTestFile(): Promise<string> {
    this.logger.info(`ğŸ§ª æ­£åœ¨ä¸Šä¼ æµ‹è¯•æ–‡ä»¶`);

    try {
      const testContent = "Hello Pinata! This is a test file.";
      const testFile = new File([testContent], "test.txt", {
        type: "text/plain",
      });

      const response = await this.pinata.upload.public.file(testFile);
      this.logger.info(`âœ… æµ‹è¯•æ–‡ä»¶ä¸Šä¼ æˆåŠŸ! CID: ${response.cid}`);
      return response.cid;
    } catch (error) {
      this.logger.error(`æµ‹è¯•æ–‡ä»¶ä¸Šä¼ å¤±è´¥: ${error}`);
      throw error;
    }
  }

  private async readDirectoryFiles(dirPath: string): Promise<File[]> {
    const files: File[] = [];
    const entries = await fs.readdir(dirPath, { withFileTypes: true });

    for (const entry of entries) {
      const fullPath = path.join(dirPath, entry.name);
      if (entry.isDirectory()) {
        files.push(...(await this.readDirectoryFiles(fullPath)));
      } else {
        const content = await fs.readFile(fullPath);
        const fileName = entry.name;
        const file = new File([content], fileName, {
          type: this.getMimeType(fileName),
        });
        files.push(file);
      }
    }
    return files;
  }

  private async readDirectoryFilesWithCustomName(
    dirPath: string,
    customName?: string
  ): Promise<File[]> {
    const files: File[] = [];
    const entries = await fs.readdir(dirPath, { withFileTypes: true });

    for (const entry of entries) {
      const fullPath = path.join(dirPath, entry.name);
      if (entry.isDirectory()) {
        files.push(
          ...(await this.readDirectoryFilesWithCustomName(fullPath, customName))
        );
      } else {
        const content = await fs.readFile(fullPath);
        const fileName = entry.name;
        const file = new File([content], fileName, {
          type: this.getMimeType(fileName),
        });
        files.push(file);
      }
    }
    return files;
  }

  private getMimeType(fileName: string): string {
    const ext = path.extname(fileName).toLowerCase();
    const mimeTypes: Record<string, string> = {
      ".png": "image/png",
      ".jpg": "image/jpeg",
      ".jpeg": "image/jpeg",
      ".gif": "image/gif",
      ".json": "application/json",
      ".txt": "text/plain",
      ".md": "text/markdown",
    };
    return mimeTypes[ext] || "application/octet-stream";
  }
}

// --- æ‰¹é‡å¤„ç†ç±» ---
class BatchProcessor {
  private uploader: PinataUploader;
  private config: Config;
  private logger: Logger;

  constructor(uploader: PinataUploader, config: Config) {
    this.uploader = uploader;
    this.config = config;
    this.logger = Logger.getInstance();
  }

  async processBatchCollection(
    generateBothVersions: boolean = true
  ): Promise<BatchUploadResult> {
    this.logger.info("ğŸš€ å¼€å§‹å¤„ç†æ‰¹é‡ NFT é›†åˆ");

    const assetsDir = path.resolve(__dirname, "..", "..", "assets");
    const imagesInputDir = path.join(assetsDir, "batch_images");

    if (!existsSync(imagesInputDir)) {
      throw new Error(`âŒ è¾“å…¥ç›®å½•ä¸å­˜åœ¨: ${imagesInputDir}`);
    }

    // 1. ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶å¤¹
    this.logger.info("ğŸ“ æ­£åœ¨ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶å¤¹...");
    const imagesFolderCid = await this.uploader.uploadDirectoryWithRetry(
      imagesInputDir
    );
    this.logger.info(`âœ… å›¾ç‰‡æ–‡ä»¶å¤¹ä¸Šä¼ å®Œæˆ! CID: ${imagesFolderCid}`);
    this.logger.info(`ğŸ“ æ–‡ä»¶å¤¹åç§°è¯´æ˜:`);
    this.logger.info(`   - Pinata ç•Œé¢æ˜¾ç¤º: 'folder_from_sdk' (SDK é»˜è®¤è¡Œä¸º)`);
    this.logger.info(`   - å®é™…è®¿é—®è·¯å¾„: ipfs://${imagesFolderCid}/æ–‡ä»¶å`);
    this.logger.info(
      `   - ä¾‹å¦‚: ipfs://${imagesFolderCid}/1.png, ipfs://${imagesFolderCid}/2.png`
    );
    this.logger.info(
      `   - Gateway è®¿é—®: https://gateway.pinata.cloud/ipfs/${imagesFolderCid}/`
    );

    // 2. ç”Ÿæˆå…ƒæ•°æ®
    const imageFiles = (await fs.readdir(imagesInputDir)).filter((f) =>
      /\.(png|jpg|jpeg|gif)$/i.test(f)
    );

    // éªŒè¯æ–‡ä»¶
    const { totalSize, warnings } = await FileUtils.validateFiles(
      imageFiles.map((f) => path.join(imagesInputDir, f)),
      this.config.maxFileSize,
      this.config.maxTotalSize
    );

    warnings.forEach((warning) => this.logger.warn(warning));

    // 3. ç”Ÿæˆå…ƒæ•°æ®æ–‡ä»¶
    const timestamp = new Date().toISOString().replace(/[:.]/g, "-");
    const outputDir = path.join(
      __dirname,
      "..",
      "output",
      `batch-upload-${timestamp}`
    );
    const resultsDir = path.join(outputDir, "results");

    await FileUtils.createDirectory(outputDir);
    await FileUtils.createDirectory(resultsDir);

    // é‡æ–°æ’åºå›¾ç‰‡æ–‡ä»¶
    imageFiles.sort(
      (a, b) => parseInt(path.parse(a).name) - parseInt(path.parse(b).name)
    );

    let metadataWithSuffixCid: string | undefined;
    let metadataWithoutSuffixCid: string | undefined;

    if (generateBothVersions) {
      const { withSuffixCid, withoutSuffixCid } =
        await this.generateBothMetadataVersions(
          imageFiles,
          imagesFolderCid,
          outputDir
        );
      metadataWithSuffixCid = withSuffixCid;
      metadataWithoutSuffixCid = withoutSuffixCid;
    } else {
      metadataWithoutSuffixCid = await this.generateSingleMetadataVersion(
        imageFiles,
        imagesFolderCid,
        outputDir
      );
    }

    // 4. ä¿å­˜ç»“æœ
    const uploadResult: BatchUploadResult = {
      timestamp: new Date().toISOString(),
      imagesFolderCid,
      metadataWithSuffixCid,
      metadataWithoutSuffixCid,
      imageCount: imageFiles.length,
      metadataFiles: imageFiles.map((fileName) => ({
        tokenId: path.parse(fileName).name,
        metadataFileWithSuffix: `${path.parse(fileName).name}${
          this.config.metadataSuffix
        }`,
        metadataFileWithoutSuffix: `${path.parse(fileName).name}`,
      })),
      totalSize,
      uploadTime: Date.now(),
    };

    await this.saveResults(
      uploadResult,
      resultsDir,
      outputDir,
      generateBothVersions
    );

    this.logger.info("âœ¨ æ‰¹é‡æµç¨‹å®Œæˆ");
    this.logger.info(`ğŸ“Š ä¸Šä¼ ç»Ÿè®¡:`);
    this.logger.info(`   - å›¾ç‰‡æ•°é‡: ${uploadResult.imageCount}`);
    this.logger.info(`   - å›¾ç‰‡æ–‡ä»¶å¤¹ CID: ${uploadResult.imagesFolderCid}`);
    if (generateBothVersions) {
      this.logger.info(
        `   - å¸¦${this.config.metadataSuffix}åç¼€å…ƒæ•°æ® CID: ${uploadResult.metadataWithSuffixCid}`
      );
      this.logger.info(
        `   - ä¸å¸¦åç¼€å…ƒæ•°æ® CID: ${uploadResult.metadataWithoutSuffixCid}`
      );
      this.logger.info(`ğŸ“ æ ¹æ®ä½ çš„ NFT åˆçº¦éœ€æ±‚é€‰æ‹© Base URI:`);
      this.logger.info(
        `   - éœ€è¦${this.config.metadataSuffix}åç¼€: ipfs://${uploadResult.metadataWithSuffixCid}/`
      );
      this.logger.info(
        `   - ä¸éœ€è¦åç¼€: ipfs://${uploadResult.metadataWithoutSuffixCid}/`
      );
    } else {
      this.logger.info(
        `   - ä¸å¸¦åç¼€å…ƒæ•°æ® CID: ${uploadResult.metadataWithoutSuffixCid}`
      );
      this.logger.info(
        `ğŸ“ åœ¨åˆçº¦ä¸­å°† Base URI è®¾ç½®ä¸º: ipfs://${uploadResult.metadataWithoutSuffixCid}/`
      );
    }
    this.logger.info(
      `ğŸ“„ è¯¦ç»†ç»“æœå·²ä¿å­˜åˆ°: ${path.join(resultsDir, "upload-result.json")}`
    );

    return uploadResult;
  }

  private async generateBothMetadataVersions(
    imageFiles: string[],
    imagesFolderCid: string,
    outputDir: string
  ): Promise<{ withSuffixCid: string; withoutSuffixCid: string }> {
    const metadataWithSuffixDir = path.join(outputDir, "metadata-json");
    const metadataWithoutSuffixDir = path.join(outputDir, "metadata");

    await FileUtils.cleanupDirectory(metadataWithSuffixDir);
    await FileUtils.cleanupDirectory(metadataWithoutSuffixDir);
    await FileUtils.createDirectory(metadataWithSuffixDir);
    await FileUtils.createDirectory(metadataWithoutSuffixDir);

    // ç”Ÿæˆä¸¤ç§ç‰ˆæœ¬çš„å…ƒæ•°æ®æ–‡ä»¶
    for (const fileName of imageFiles) {
      const tokenId = path.parse(fileName).name;
      const metadata = this.createMetadata(tokenId, imagesFolderCid, fileName);

      await fs.writeFile(
        path.join(
          metadataWithSuffixDir,
          `${tokenId}${this.config.metadataSuffix}`
        ),
        JSON.stringify(metadata, null, 2)
      );

      await fs.writeFile(
        path.join(metadataWithoutSuffixDir, `${tokenId}`),
        JSON.stringify(metadata, null, 2)
      );
    }

    this.logger.info(
      `ğŸ“ æ­£åœ¨ä¸Šä¼ å¸¦${this.config.metadataSuffix}åç¼€çš„å…ƒæ•°æ®æ–‡ä»¶å¤¹...`
    );
    const withSuffixCid = await this.uploader.uploadDirectoryWithRetry(
      metadataWithSuffixDir
    );
    this.logger.info(
      `âœ… å¸¦${this.config.metadataSuffix}åç¼€å…ƒæ•°æ®æ–‡ä»¶å¤¹ä¸Šä¼ å®Œæˆ! CID: ${withSuffixCid}`
    );

    this.logger.info("ğŸ“ æ­£åœ¨ä¸Šä¼ ä¸å¸¦åç¼€çš„å…ƒæ•°æ®æ–‡ä»¶å¤¹...");
    const withoutSuffixCid = await this.uploader.uploadDirectoryWithRetry(
      metadataWithoutSuffixDir
    );
    this.logger.info(
      `âœ… ä¸å¸¦åç¼€å…ƒæ•°æ®æ–‡ä»¶å¤¹ä¸Šä¼ å®Œæˆ! CID: ${withoutSuffixCid}`
    );

    // æ¸…ç†ä¸´æ—¶æ–‡ä»¶å¤¹
    await FileUtils.cleanupDirectory(metadataWithSuffixDir);
    await FileUtils.cleanupDirectory(metadataWithoutSuffixDir);

    return { withSuffixCid, withoutSuffixCid };
  }

  private async generateSingleMetadataVersion(
    imageFiles: string[],
    imagesFolderCid: string,
    outputDir: string
  ): Promise<string> {
    const metadataWithoutSuffixDir = path.join(outputDir, "metadata");

    await FileUtils.cleanupDirectory(metadataWithoutSuffixDir);
    await FileUtils.createDirectory(metadataWithoutSuffixDir);

    for (const fileName of imageFiles) {
      const tokenId = path.parse(fileName).name;
      const metadata = this.createMetadata(tokenId, imagesFolderCid, fileName);

      await fs.writeFile(
        path.join(metadataWithoutSuffixDir, `${tokenId}`),
        JSON.stringify(metadata, null, 2)
      );
    }

    this.logger.info("ğŸ“ æ­£åœ¨ä¸Šä¼ ä¸å¸¦åç¼€çš„å…ƒæ•°æ®æ–‡ä»¶å¤¹...");
    const withoutSuffixCid = await this.uploader.uploadDirectoryWithRetry(
      metadataWithoutSuffixDir
    );

    await FileUtils.cleanupDirectory(metadataWithoutSuffixDir);
    return withoutSuffixCid;
  }

  private createMetadata(
    tokenId: string,
    imagesFolderCid: string,
    fileName: string
  ) {
    return {
      name: `MetaCore #${tokenId}`,
      description: "MetaCore é›†åˆä¸­çš„ä¸€ä¸ªç‹¬ç‰¹æˆå‘˜ã€‚",
      image: `ipfs://${imagesFolderCid}/${fileName}`,
      attributes: [{ trait_type: "ID", value: parseInt(tokenId) }],
    };
  }

  private async saveResults(
    uploadResult: BatchUploadResult,
    resultsDir: string,
    outputDir: string,
    generateBothVersions: boolean
  ): Promise<void> {
    const resultFilePath = path.join(resultsDir, "upload-result.json");
    await fs.writeFile(resultFilePath, JSON.stringify(uploadResult, null, 2));
    this.logger.info(`ğŸ“„ ä¸Šä¼ ç»“æœå·²ä¿å­˜åˆ°: ${resultFilePath}`);

    const readmeContent = this.generateReadmeContent(
      uploadResult,
      generateBothVersions
    );
    const readmePath = path.join(outputDir, "README.md");
    await fs.writeFile(readmePath, readmeContent);
    this.logger.info(`ğŸ“„ è¯´æ˜æ–‡æ¡£å·²ä¿å­˜åˆ°: ${readmePath}`);
  }

  private generateReadmeContent(
    uploadResult: BatchUploadResult,
    generateBothVersions: boolean
  ): string {
    return `# Pinata æ‰¹é‡ä¸Šä¼ ç»“æœ

## ğŸ“… ä¸Šä¼ æ—¶é—´
${new Date().toLocaleString()}

## ğŸ“Š ä¸Šä¼ ç»Ÿè®¡
- å›¾ç‰‡æ•°é‡: ${uploadResult.imageCount}
- å›¾ç‰‡æ–‡ä»¶å¤¹ CID: ${uploadResult.imagesFolderCid}
${
  generateBothVersions
    ? `- å¸¦${this.config.metadataSuffix}åç¼€å…ƒæ•°æ®æ–‡ä»¶å¤¹ CID: ${uploadResult.metadataWithSuffixCid}
- ä¸å¸¦åç¼€å…ƒæ•°æ®æ–‡ä»¶å¤¹ CID: ${uploadResult.metadataWithoutSuffixCid}
- æ–‡ä»¶æ ¼å¼: å¸¦${this.config.metadataSuffix}åç¼€ + ä¸å¸¦åç¼€ï¼ˆå…¼å®¹æ‰€æœ‰ NFT åˆçº¦ï¼‰`
    : `- ä¸å¸¦åç¼€å…ƒæ•°æ®æ–‡ä»¶å¤¹ CID: ${uploadResult.metadataWithoutSuffixCid}
- æ–‡ä»¶æ ¼å¼: ä¸å¸¦åç¼€ï¼ˆæ ‡å‡† NFT åˆçº¦æ ¼å¼ï¼‰`
}

## ğŸ”— è®¿é—®é“¾æ¥
${
  generateBothVersions
    ? `- å¸¦${this.config.metadataSuffix}åç¼€ Base URI: ipfs://${uploadResult.metadataWithSuffixCid}/
- ä¸å¸¦åç¼€ Base URI: ipfs://${uploadResult.metadataWithoutSuffixCid}/
- å¸¦${this.config.metadataSuffix}åç¼€ Gateway: https://gateway.pinata.cloud/ipfs/${uploadResult.metadataWithSuffixCid}/
- ä¸å¸¦åç¼€ Gateway: https://gateway.pinata.cloud/ipfs/${uploadResult.metadataWithoutSuffixCid}/`
    : `- Base URI: ipfs://${uploadResult.metadataWithoutSuffixCid}/
- Gateway URL: https://gateway.pinata.cloud/ipfs/${uploadResult.metadataWithoutSuffixCid}/`
}

## ğŸš€ ä½¿ç”¨æ–¹æ³•
${
  generateBothVersions
    ? `æ ¹æ®ä½ çš„ NFT åˆçº¦éœ€æ±‚é€‰æ‹©ï¼š
- éœ€è¦${this.config.metadataSuffix}åç¼€: ä½¿ç”¨ \`ipfs://${uploadResult.metadataWithSuffixCid}/\`
- ä¸éœ€è¦åç¼€: ä½¿ç”¨ \`ipfs://${uploadResult.metadataWithoutSuffixCid}/\``
    : `åœ¨æ™ºèƒ½åˆçº¦ä¸­è®¾ç½® Base URI ä¸º: \`ipfs://${uploadResult.metadataWithoutSuffixCid}/\``
}
`;
  }
}

// --- å•ä¸ªæ–‡ä»¶å¤„ç†ç±» ---
class SingleFileProcessor {
  private uploader: PinataUploader;
  private logger: Logger;

  constructor(uploader: PinataUploader) {
    this.uploader = uploader;
    this.logger = Logger.getInstance();
  }

  async processSingleFile(): Promise<SingleUploadResult> {
    this.logger.info("ğŸš€ å¼€å§‹å¤„ç†å•ä¸ªæ–‡ä»¶ä¸Šä¼ ");

    const assetsDir = path.resolve(__dirname, "..", "..", "assets");
    const singleImageDir = path.join(assetsDir, "image");

    if (!existsSync(singleImageDir)) {
      throw new Error(`âš ï¸  å›¾ç‰‡ç›®å½•ä¸å­˜åœ¨: ${singleImageDir}`);
    }

    const imageFiles = (await fs.readdir(singleImageDir)).filter((f) =>
      /\.(png|jpg|jpeg|gif)$/i.test(f)
    );

    if (imageFiles.length === 0) {
      throw new Error("âš ï¸  image ç›®å½•ä¸‹æ²¡æœ‰æ‰¾åˆ°å›¾ç‰‡æ–‡ä»¶");
    }

    const firstImage = imageFiles[0];
    const singleImagePath = path.join(singleImageDir, firstImage);
    const imageName = path.parse(firstImage).name;
    this.logger.info(`ğŸ“ é€‰æ‹©å›¾ç‰‡è¿›è¡Œæµ‹è¯•: ${firstImage}`);

    const imageCid = await this.uploader.uploadSingleFile(singleImagePath);

    const metadata = {
      name: `MetaCore #${imageName}`,
      description: "å•ä¸ª NFT ç¤ºä¾‹",
      image: `ipfs://${imageCid}`,
      attributes: [{ trait_type: "Type", value: "Single" }],
    };

    const metadataFileName = `${imageName}-metadata.json`;
    const metadataCid = await this.uploader.uploadMetadata(
      metadata,
      metadataFileName
    );

    const uploadResult: SingleUploadResult = {
      timestamp: new Date().toISOString(),
      imageCid,
      metadataCid,
      imageUrl: `ipfs://${imageCid}`,
      metadataUrl: `ipfs://${metadataCid}`,
      gatewayImageUrl: `https://gateway.pinata.cloud/ipfs/${imageCid}`,
      gatewayMetadataUrl: `https://gateway.pinata.cloud/ipfs/${metadataCid}`,
      metadata,
      uploadTime: Date.now(),
    };

    await this.saveSingleFileResults(uploadResult);

    return uploadResult;
  }

  private async saveSingleFileResults(
    uploadResult: SingleUploadResult
  ): Promise<void> {
    const timestamp = new Date().toISOString().replace(/[:.]/g, "-");
    const outputDir = path.join(
      __dirname,
      "..",
      "output",
      `single-upload-${timestamp}`
    );
    const resultsDir = path.join(outputDir, "results");

    await FileUtils.createDirectory(outputDir);
    await FileUtils.createDirectory(resultsDir);

    const singleResultFilePath = path.join(resultsDir, "upload-result.json");
    await fs.writeFile(
      singleResultFilePath,
      JSON.stringify(uploadResult, null, 2)
    );
    this.logger.info(`ğŸ“„ å•ä¸ªæ–‡ä»¶ä¸Šä¼ ç»“æœå·²ä¿å­˜åˆ°: ${singleResultFilePath}`);

    const readmeContent = this.generateSingleFileReadme(uploadResult);
    const readmePath = path.join(outputDir, "README.md");
    await fs.writeFile(readmePath, readmeContent);
    this.logger.info(`ğŸ“„ è¯´æ˜æ–‡æ¡£å·²ä¿å­˜åˆ°: ${readmePath}`);
  }

  private generateSingleFileReadme(uploadResult: SingleUploadResult): string {
    return `# Pinata å•ä¸ªæ–‡ä»¶ä¸Šä¼ ç»“æœ

## ğŸ“… ä¸Šä¼ æ—¶é—´
${new Date().toLocaleString()}

## ğŸ“Š ä¸Šä¼ ä¿¡æ¯
- å›¾ç‰‡ CID: ${uploadResult.imageCid}
- å…ƒæ•°æ® CID: ${uploadResult.metadataCid}

## ğŸ”— è®¿é—®é“¾æ¥
- å›¾ç‰‡: https://gateway.pinata.cloud/ipfs/${uploadResult.imageCid}
- å…ƒæ•°æ®: https://gateway.pinata.cloud/ipfs/${uploadResult.metadataCid}

## ğŸ“ æ–‡ä»¶ç»“æ„
\`\`\`
${path.dirname(uploadResult.gatewayImageUrl)}/
â”œâ”€â”€ results/
â”‚   â””â”€â”€ upload-result.json     # è¯¦ç»†ä¸Šä¼ ç»“æœ
â””â”€â”€ README.md                  # è¯´æ˜æ–‡æ¡£
\`\`\`
`;
  }
}

// --- ä¸»ç¨‹åº ---
async function main() {
  const startTime = Date.now();
  const logger = Logger.getInstance();

  try {
    // 1. åŠ è½½é…ç½®
    const configManager = new ConfigManager();
    const config = configManager.getConfig();

    // 2. åˆå§‹åŒ–ä¸Šä¼ å™¨
    const uploader = new PinataUploader(config);

    // 3. æµ‹è¯•è®¤è¯
    const authSuccess = await uploader.testAuthentication();
    if (!authSuccess) {
      logger.error("Pinata è®¤è¯å¤±è´¥ï¼Œç¨‹åºé€€å‡º");
      return;
    }

    // 4. è§£æå‘½ä»¤è¡Œå‚æ•°
    const mode = process.argv[2] || "batch";
    const noSuffix = process.argv.includes("--no-suffix");

    logger.info("ğŸ“‹ ä¸Šä¼ æ¨¡å¼è¯´æ˜:");
    logger.info("  ğŸ¯ single: å•ä¸ªæ–‡ä»¶æ¨¡å¼ - ä¸Šä¼ å•ä¸ªå›¾ç‰‡ + å•ä¸ª JSON");
    logger.info("  ğŸ“¦ batch: æ‰¹é‡æ¨¡å¼ - ä¸Šä¼ æ•´ä¸ªæ–‡ä»¶å¤¹ + æ‰¹é‡ JSON");
    logger.info("  ğŸ§ª test: æµ‹è¯•æ¨¡å¼ - ä¸Šä¼ æµ‹è¯•æ–‡ä»¶");
    logger.info("  ğŸ“Œ pin: Pin by CID æ¨¡å¼");
    logger.info("  ğŸ“Š queue: æ£€æŸ¥ Pin é˜Ÿåˆ—çŠ¶æ€");

    // 5. æ‰§è¡Œç›¸åº”çš„æ¨¡å¼
    switch (mode) {
      case "single":
        logger.info("ğŸ¯ é€‰æ‹©: å•ä¸ªæ–‡ä»¶æ¨¡å¼");
        const singleProcessor = new SingleFileProcessor(uploader);
        await singleProcessor.processSingleFile();
        break;

      case "test":
        logger.info("ğŸ§ª é€‰æ‹©: æµ‹è¯•æ¨¡å¼");
        await uploader.uploadTestFile();
        break;

      case "pin":
        logger.info("ğŸ“Œ é€‰æ‹©: Pin by CID æ¨¡å¼");
        const cid = process.argv[3];
        if (!cid) {
          logger.error("âŒ è¯·æä¾› CID å‚æ•°ï¼Œä¾‹å¦‚: pnpm pin <CID>");
          return;
        }
        await uploader.pinByCid(cid);
        break;

      case "queue":
        logger.info("ğŸ“Š é€‰æ‹©: æ£€æŸ¥é˜Ÿåˆ—çŠ¶æ€");
        await uploader.checkPinQueue();
        break;

      default:
        logger.info("ğŸ“¦ é€‰æ‹©: æ‰¹é‡æ¨¡å¼");
        const batchProcessor = new BatchProcessor(uploader, config);

        if (noSuffix) {
          logger.info("ğŸ“ æ¨¡å¼: åªç”Ÿæˆä¸å¸¦åç¼€çš„å…ƒæ•°æ®æ–‡ä»¶");
          await batchProcessor.processBatchCollection(false);
        } else {
          logger.info(
            `ğŸ“ æ¨¡å¼: ç”Ÿæˆå¸¦${config.metadataSuffix}åç¼€å’Œä¸å¸¦åç¼€çš„å…ƒæ•°æ®æ–‡ä»¶`
          );
          await batchProcessor.processBatchCollection(true);
        }
        break;
    }
  } catch (error) {
    logger.error(`è„šæœ¬æ‰§è¡Œå¤±è´¥: ${error}`);
    process.exit(1);
  } finally {
    const totalTime = Math.floor((Date.now() - startTime) / 1000);
    logger.info(`è„šæœ¬æ€»æ‰§è¡Œæ—¶é—´: ${totalTime} ç§’`);
    logger.info("ğŸ‰ è„šæœ¬æ‰§è¡Œå®Œæˆï¼Œæ­£åœ¨é€€å‡º...");
    process.exit(0);
  }
}

// å¦‚æœç›´æ¥è¿è¡Œæ­¤æ–‡ä»¶ï¼Œåˆ™æ‰§è¡Œä¸»ç¨‹åº
if (require.main === module) {
  main();
}

export {
  ConfigManager,
  Logger,
  ProgressTracker,
  FileUtils,
  PinataUploader,
  BatchProcessor,
  SingleFileProcessor,
  type UploadResult,
  type BatchUploadResult,
  type SingleUploadResult,
  type Config,
};

```

è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ **NFT å…ƒæ•°æ®ä¸Šä¼ å·¥å…·**ï¼Œä½¿ç”¨ TypeScript å¼€å‘ï¼Œä¸“é—¨ç”¨äºå°† NFT å›¾ç‰‡å’Œå…ƒæ•°æ®æ‰¹é‡ä¸Šä¼ åˆ° Pinata IPFS å¹³å°ã€‚è¯¥å·¥å…·é‡‡ç”¨é¢å‘å¯¹è±¡çš„è®¾è®¡æ¶æ„ï¼ŒåŒ…å«é…ç½®ç®¡ç†ã€æ—¥å¿—ç³»ç»Ÿã€è¿›åº¦è·Ÿè¸ªã€æ–‡ä»¶éªŒè¯ç­‰æ ¸å¿ƒæ¨¡å—ï¼Œæ”¯æŒå•ä¸ªæ–‡ä»¶ä¸Šä¼ å’Œæ‰¹é‡æ–‡ä»¶å¤¹ä¸Šä¼ ä¸¤ç§æ¨¡å¼ã€‚å·¥å…·ä¼šè‡ªåŠ¨ç”Ÿæˆç¬¦åˆ NFT æ ‡å‡†çš„ JSON å…ƒæ•°æ®æ–‡ä»¶ï¼Œæ”¯æŒè‡ªå®šä¹‰æ–‡ä»¶åç¼€ï¼Œå¹¶æä¾›å¸¦åç¼€å’Œä¸å¸¦åç¼€ä¸¤ç§æ ¼å¼ä»¥å…¼å®¹ä¸åŒçš„æ™ºèƒ½åˆçº¦éœ€æ±‚ã€‚æ•´ä¸ªç³»ç»Ÿå…·å¤‡å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶ã€é‡è¯•é€»è¾‘ã€è¶…æ—¶æ§åˆ¶ï¼Œä»¥åŠè¯¦ç»†çš„ä¸Šä¼ ç»“æœä¿å­˜å’Œæ–‡æ¡£ç”ŸæˆåŠŸèƒ½ï¼Œç¡®ä¿ NFT é¡¹ç›®çš„å…ƒæ•°æ®èƒ½å¤Ÿç¨³å®šå¯é åœ°éƒ¨ç½²åˆ°å»ä¸­å¿ƒåŒ–å­˜å‚¨ç½‘ç»œä¸­ã€‚

ç°åœ¨ï¼è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æµ‹è¯•éªŒè¯è„šæœ¬çš„å„ä¸ªåŠŸèƒ½ã€‚

## ç¬¬ä¸€æ­¥ï¼šç¼–è¯‘æ£€æŸ¥

#### TypeScript ç±»å‹æ£€æŸ¥

æ£€æŸ¥ä»£ç è¯­æ³•å’Œç±»å‹é”™è¯¯ï¼Œä½†ä¸ç”Ÿæˆ JavaScript æ–‡ä»¶

ç¡®ä¿ä»£ç å¯ä»¥æ­£å¸¸ç¼–è¯‘ï¼Œç›¸å½“äº"è¯­æ³•æ£€æŸ¥"

```bash
âœ npx tsc --noEmit
```

âœ… ç¼–è¯‘æ£€æŸ¥é€šè¿‡ - æ²¡æœ‰è¯­æ³•é”™è¯¯

## ç¬¬äºŒæ­¥ï¼šæµ‹è¯•æ¨¡å¼ï¼ˆéªŒè¯è¿æ¥ï¼‰

### è¿è¡Œæµ‹è¯•æ¨¡å¼

ä¸Šä¼ ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶åˆ° Pinata

éªŒè¯ Pinata è¿æ¥å’Œè®¤è¯æ˜¯å¦æ­£å¸¸

```bash
âœ pnpm test

> pinata-nft-uploader@1.0.0 test /Users/qiaopengjun/Code/Solidity/YuanqiGenesis/polyglot-pinata-uploader/typescript
> ts-node src/index.ts test

[dotenv@17.2.1] injecting env (6) from .env -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }
[2025-08-07T01:59:34.495Z] [INFO] âœ… Pinata è®¤è¯æˆåŠŸ!
[2025-08-07T01:59:34.495Z] [INFO] ğŸ“‹ ä¸Šä¼ æ¨¡å¼è¯´æ˜:
[2025-08-07T01:59:34.495Z] [INFO]   ğŸ¯ single: å•ä¸ªæ–‡ä»¶æ¨¡å¼ - ä¸Šä¼ å•ä¸ªå›¾ç‰‡ + å•ä¸ª JSON
[2025-08-07T01:59:34.495Z] [INFO]   ğŸ“¦ batch: æ‰¹é‡æ¨¡å¼ - ä¸Šä¼ æ•´ä¸ªæ–‡ä»¶å¤¹ + æ‰¹é‡ JSON
[2025-08-07T01:59:34.495Z] [INFO]   ğŸ§ª test: æµ‹è¯•æ¨¡å¼ - ä¸Šä¼ æµ‹è¯•æ–‡ä»¶
[2025-08-07T01:59:34.495Z] [INFO]   ğŸ“Œ pin: Pin by CID æ¨¡å¼
[2025-08-07T01:59:34.495Z] [INFO]   ğŸ“Š queue: æ£€æŸ¥ Pin é˜Ÿåˆ—çŠ¶æ€
[2025-08-07T01:59:34.495Z] [INFO] ğŸ§ª é€‰æ‹©: æµ‹è¯•æ¨¡å¼
[2025-08-07T01:59:34.496Z] [INFO] ğŸ§ª æ­£åœ¨ä¸Šä¼ æµ‹è¯•æ–‡ä»¶
[2025-08-07T01:59:36.225Z] [INFO] âœ… æµ‹è¯•æ–‡ä»¶ä¸Šä¼ æˆåŠŸ! CID: bafkreibtmw4qacliibxj2uflkm7hf4bpkusaafkcp6g5opnvmyufymcqyy
[2025-08-07T01:59:36.225Z] [INFO] è„šæœ¬æ€»æ‰§è¡Œæ—¶é—´: 2 ç§’
[2025-08-07T01:59:36.225Z] [INFO] ğŸ‰ è„šæœ¬æ‰§è¡Œå®Œæˆï¼Œæ­£åœ¨é€€å‡º...

```

âœ… æµ‹è¯•æ¨¡å¼æˆåŠŸ - Pinata è¿æ¥æ­£å¸¸ï¼Œè„šæœ¬æ­£ç¡®é€€å‡º

## ç¬¬ä¸‰æ­¥ï¼šå•ä¸ªæ–‡ä»¶æ¨¡å¼æµ‹è¯•

### å•ä¸ªæ–‡ä»¶ä¸Šä¼ æ¨¡å¼

ä¸Šä¼ å•ä¸ªå›¾ç‰‡ + å¯¹åº”çš„å…ƒæ•°æ®

å¤„ç†å•ä¸ª NFT çš„ä¸Šä¼ 

```bash
âœ pnpm single

> pinata-nft-uploader@1.0.0 single /Users/qiaopengjun/Code/Solidity/YuanqiGenesis/polyglot-pinata-uploader/typescript
> ts-node src/index.ts single

[dotenv@17.2.1] injecting env (6) from .env -- tip: ğŸ” prevent committing .env to code: https://dotenvx.com/precommit
[2025-08-07T02:28:08.520Z] [INFO] âœ… Pinata è®¤è¯æˆåŠŸ!
[2025-08-07T02:28:08.525Z] [INFO] ğŸ“‹ ä¸Šä¼ æ¨¡å¼è¯´æ˜:
[2025-08-07T02:28:08.525Z] [INFO]   ğŸ¯ single: å•ä¸ªæ–‡ä»¶æ¨¡å¼ - ä¸Šä¼ å•ä¸ªå›¾ç‰‡ + å•ä¸ª JSON
[2025-08-07T02:28:08.525Z] [INFO]   ğŸ“¦ batch: æ‰¹é‡æ¨¡å¼ - ä¸Šä¼ æ•´ä¸ªæ–‡ä»¶å¤¹ + æ‰¹é‡ JSON
[2025-08-07T02:28:08.525Z] [INFO]   ğŸ§ª test: æµ‹è¯•æ¨¡å¼ - ä¸Šä¼ æµ‹è¯•æ–‡ä»¶
[2025-08-07T02:28:08.525Z] [INFO]   ğŸ“Œ pin: Pin by CID æ¨¡å¼
[2025-08-07T02:28:08.525Z] [INFO]   ğŸ“Š queue: æ£€æŸ¥ Pin é˜Ÿåˆ—çŠ¶æ€
[2025-08-07T02:28:08.525Z] [INFO] ğŸ¯ é€‰æ‹©: å•ä¸ªæ–‡ä»¶æ¨¡å¼
[2025-08-07T02:28:08.525Z] [INFO] ğŸš€ å¼€å§‹å¤„ç†å•ä¸ªæ–‡ä»¶ä¸Šä¼ 
[2025-08-07T02:28:08.526Z] [INFO] ğŸ“ é€‰æ‹©å›¾ç‰‡è¿›è¡Œæµ‹è¯•: IMG_20210626_180340.jpg
[2025-08-07T02:28:08.526Z] [INFO] ğŸ“ æ­£åœ¨ä¸Šä¼ å•ä¸ªæ–‡ä»¶: /Users/qiaopengjun/Code/Solidity/YuanqiGenesis/polyglot-pinata-uploader/assets/image/IMG_20210626_180340.jpg
[2025-08-07T02:28:57.759Z] [INFO] âœ… å•ä¸ªæ–‡ä»¶ä¸Šä¼ æˆåŠŸ! CID: bafybeifwvvo7qacd5ksephyxbqkqjih2dmm2ffgqa6u732b2evw5iijppi
[2025-08-07T02:28:57.760Z] [INFO] ğŸ“„ æ­£åœ¨ä¸Šä¼ å…ƒæ•°æ®: IMG_20210626_180340-metadata.json
[2025-08-07T02:28:58.834Z] [INFO] âœ… å…ƒæ•°æ®ä¸Šä¼ æˆåŠŸ! CID: bafkreiddeekjrptrgdtuicyzgtwknvrweiqltlhs7bx7naj7s2mq3fo6um
[2025-08-07T02:28:58.836Z] [INFO] ğŸ“„ å•ä¸ªæ–‡ä»¶ä¸Šä¼ ç»“æœå·²ä¿å­˜åˆ°: /Users/qiaopengjun/Code/Solidity/YuanqiGenesis/polyglot-pinata-uploader/typescript/output/single-upload-2025-08-07T02-28-58-834Z/results/upload-result.json
[2025-08-07T02:28:58.872Z] [INFO] ğŸ“„ è¯´æ˜æ–‡æ¡£å·²ä¿å­˜åˆ°: /Users/qiaopengjun/Code/Solidity/YuanqiGenesis/polyglot-pinata-uploader/typescript/output/single-upload-2025-08-07T02-28-58-834Z/README.md
[2025-08-07T02:28:58.872Z] [INFO] è„šæœ¬æ€»æ‰§è¡Œæ—¶é—´: 51 ç§’
[2025-08-07T02:28:58.872Z] [INFO] ğŸ‰ è„šæœ¬æ‰§è¡Œå®Œæˆï¼Œæ­£åœ¨é€€å‡º...

```

âœ… å•ä¸ªæ–‡ä»¶æ¨¡å¼æµ‹è¯•æˆåŠŸï¼

ä»ç»“æœå¯ä»¥çœ‹åˆ°ï¼š

1. âœ… è®¤è¯æˆåŠŸ - Pinata è¿æ¥æ­£å¸¸
2. âœ… å›¾ç‰‡ä¸Šä¼ æˆåŠŸ - CID: bafybeifwvvo7qacd5ksephyxbqkqjih2dmm2ffgqa6u732b2evw5iijppi
3. âœ… å…ƒæ•°æ®æ–‡ä»¶åå…³è” - IMG_20210626_180340-metadata.json
4. âœ… å…ƒæ•°æ®ä¸Šä¼ æˆåŠŸ - CID: bafkreiddeekjrptrgdtuicyzgtwknvrweiqltlhs7bx7naj7s2mq3fo6um
5. âœ… ç»“æœä¿å­˜ - è‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶
6. âœ… è„šæœ¬æ­£ç¡®é€€å‡º - æ²¡æœ‰å¡ä½

## ç¬¬å››æ­¥ï¼šæ‰¹é‡æ¨¡å¼æµ‹è¯•ï¼ˆä¸å¸¦åç¼€ï¼‰

```bash
âœ pnpm batch:no-suffix

> pinata-nft-uploader@1.0.0 batch:no-suffix /Users/qiaopengjun/Code/Solidity/YuanqiGenesis/polyglot-pinata-uploader/typescript
> ts-node src/index.ts batch --no-suffix

[dotenv@17.2.1] injecting env (6) from .env -- tip: âš™ï¸  enable debug logging with { debug: true }
[2025-08-07T02:33:17.412Z] [INFO] âœ… Pinata è®¤è¯æˆåŠŸ!
[2025-08-07T02:33:17.415Z] [INFO] ğŸ“‹ ä¸Šä¼ æ¨¡å¼è¯´æ˜:
[2025-08-07T02:33:17.415Z] [INFO]   ğŸ¯ single: å•ä¸ªæ–‡ä»¶æ¨¡å¼ - ä¸Šä¼ å•ä¸ªå›¾ç‰‡ + å•ä¸ª JSON
[2025-08-07T02:33:17.415Z] [INFO]   ğŸ“¦ batch: æ‰¹é‡æ¨¡å¼ - ä¸Šä¼ æ•´ä¸ªæ–‡ä»¶å¤¹ + æ‰¹é‡ JSON
[2025-08-07T02:33:17.415Z] [INFO]   ğŸ§ª test: æµ‹è¯•æ¨¡å¼ - ä¸Šä¼ æµ‹è¯•æ–‡ä»¶
[2025-08-07T02:33:17.415Z] [INFO]   ğŸ“Œ pin: Pin by CID æ¨¡å¼
[2025-08-07T02:33:17.415Z] [INFO]   ğŸ“Š queue: æ£€æŸ¥ Pin é˜Ÿåˆ—çŠ¶æ€
[2025-08-07T02:33:17.415Z] [INFO] ğŸ“¦ é€‰æ‹©: æ‰¹é‡æ¨¡å¼
[2025-08-07T02:33:17.415Z] [INFO] ğŸ“ æ¨¡å¼: åªç”Ÿæˆä¸å¸¦åç¼€çš„å…ƒæ•°æ®æ–‡ä»¶
[2025-08-07T02:33:17.416Z] [INFO] ğŸš€ å¼€å§‹å¤„ç†æ‰¹é‡ NFT é›†åˆ
[2025-08-07T02:33:17.416Z] [INFO] ğŸ“ æ­£åœ¨ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶å¤¹...
[2025-08-07T02:33:17.416Z] [INFO] ğŸ“ æ­£åœ¨ä¸Šä¼ æ–‡ä»¶å¤¹: /Users/qiaopengjun/Code/Solidity/YuanqiGenesis/polyglot-pinata-uploader/assets/batch_images
[2025-08-07T02:33:17.430Z] [INFO] ğŸ“ æ‰¾åˆ° 3 ä¸ªæ–‡ä»¶ï¼Œæ€»å¤§å°: 16.40 MB
[2025-08-07T02:33:17.430Z] [INFO] ğŸš€ å¼€å§‹ä¸Šä¼ åˆ° Pinata...
[2025-08-07T02:33:27.431Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 10 ç§’
[2025-08-07T02:33:37.432Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 20 ç§’
[2025-08-07T02:33:47.433Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 30 ç§’
[2025-08-07T02:33:48.234Z] [INFO] âœ… å®Œæˆ! æ€»ç”¨æ—¶: 30 ç§’
[2025-08-07T02:33:48.235Z] [INFO] âœ… æ–‡ä»¶å¤¹ä¸Šä¼ æˆåŠŸ! CID: bafybeia22ed2lhakgwu76ojojhuavlxkccpclciy6hgqsmn6o7ur7cw44e
[2025-08-07T02:33:48.235Z] [INFO] âœ… å›¾ç‰‡æ–‡ä»¶å¤¹ä¸Šä¼ å®Œæˆ! CID: bafybeia22ed2lhakgwu76ojojhuavlxkccpclciy6hgqsmn6o7ur7cw44e
[2025-08-07T02:33:48.235Z] [INFO] ğŸ“ æ–‡ä»¶å¤¹åç§°è¯´æ˜:
[2025-08-07T02:33:48.235Z] [INFO]    - Pinata ç•Œé¢æ˜¾ç¤º: 'folder_from_sdk' (SDK é»˜è®¤è¡Œä¸º)
[2025-08-07T02:33:48.235Z] [INFO]    - å®é™…è®¿é—®è·¯å¾„: ipfs://bafybeia22ed2lhakgwu76ojojhuavlxkccpclciy6hgqsmn6o7ur7cw44e/æ–‡ä»¶å
[2025-08-07T02:33:48.235Z] [INFO]    - ä¾‹å¦‚: ipfs://bafybeia22ed2lhakgwu76ojojhuavlxkccpclciy6hgqsmn6o7ur7cw44e/1.png, ipfs://bafybeia22ed2lhakgwu76ojojhuavlxkccpclciy6hgqsmn6o7ur7cw44e/2.png
[2025-08-07T02:33:48.235Z] [INFO]    - Gateway è®¿é—®: https://gateway.pinata.cloud/ipfs/bafybeia22ed2lhakgwu76ojojhuavlxkccpclciy6hgqsmn6o7ur7cw44e/
[2025-08-07T02:33:48.238Z] [INFO] ğŸ“ æ­£åœ¨ä¸Šä¼ ä¸å¸¦åç¼€çš„å…ƒæ•°æ®æ–‡ä»¶å¤¹...
[2025-08-07T02:33:48.238Z] [INFO] ğŸ“ æ­£åœ¨ä¸Šä¼ æ–‡ä»¶å¤¹: /Users/qiaopengjun/Code/Solidity/YuanqiGenesis/polyglot-pinata-uploader/typescript/output/batch-upload-2025-08-07T02-33-48-236Z/metadata
[2025-08-07T02:33:48.239Z] [INFO] ğŸ“ æ‰¾åˆ° 3 ä¸ªæ–‡ä»¶ï¼Œæ€»å¤§å°: 765 B
[2025-08-07T02:33:48.239Z] [INFO] ğŸš€ å¼€å§‹ä¸Šä¼ åˆ° Pinata...
[2025-08-07T02:33:48.906Z] [INFO] âœ… å®Œæˆ! æ€»ç”¨æ—¶: 0 ç§’
[2025-08-07T02:33:48.906Z] [INFO] âœ… æ–‡ä»¶å¤¹ä¸Šä¼ æˆåŠŸ! CID: bafybeihnyl6zp4q4xusvpt77nzl7ljg3ec6xhbgaflzrn6bzrpo7nivgzq
[2025-08-07T02:33:48.908Z] [INFO] ğŸ“„ ä¸Šä¼ ç»“æœå·²ä¿å­˜åˆ°: /Users/qiaopengjun/Code/Solidity/YuanqiGenesis/polyglot-pinata-uploader/typescript/output/batch-upload-2025-08-07T02-33-48-236Z/results/upload-result.json
[2025-08-07T02:33:48.948Z] [INFO] ğŸ“„ è¯´æ˜æ–‡æ¡£å·²ä¿å­˜åˆ°: /Users/qiaopengjun/Code/Solidity/YuanqiGenesis/polyglot-pinata-uploader/typescript/output/batch-upload-2025-08-07T02-33-48-236Z/README.md
[2025-08-07T02:33:48.948Z] [INFO] âœ¨ æ‰¹é‡æµç¨‹å®Œæˆ
[2025-08-07T02:33:48.948Z] [INFO] ğŸ“Š ä¸Šä¼ ç»Ÿè®¡:
[2025-08-07T02:33:48.948Z] [INFO]    - å›¾ç‰‡æ•°é‡: 3
[2025-08-07T02:33:48.948Z] [INFO]    - å›¾ç‰‡æ–‡ä»¶å¤¹ CID: bafybeia22ed2lhakgwu76ojojhuavlxkccpclciy6hgqsmn6o7ur7cw44e
[2025-08-07T02:33:48.948Z] [INFO]    - ä¸å¸¦åç¼€å…ƒæ•°æ® CID: bafybeihnyl6zp4q4xusvpt77nzl7ljg3ec6xhbgaflzrn6bzrpo7nivgzq
[2025-08-07T02:33:48.948Z] [INFO] ğŸ“ åœ¨åˆçº¦ä¸­å°† Base URI è®¾ç½®ä¸º: ipfs://bafybeihnyl6zp4q4xusvpt77nzl7ljg3ec6xhbgaflzrn6bzrpo7nivgzq/
[2025-08-07T02:33:48.948Z] [INFO] ğŸ“„ è¯¦ç»†ç»“æœå·²ä¿å­˜åˆ°: /Users/qiaopengjun/Code/Solidity/YuanqiGenesis/polyglot-pinata-uploader/typescript/output/batch-upload-2025-08-07T02-33-48-236Z/results/upload-result.json
[2025-08-07T02:33:48.948Z] [INFO] è„šæœ¬æ€»æ‰§è¡Œæ—¶é—´: 33 ç§’
[2025-08-07T02:33:48.948Z] [INFO] ğŸ‰ è„šæœ¬æ‰§è¡Œå®Œæˆï¼Œæ­£åœ¨é€€å‡º...

```

âœ… æ‰¹é‡æ¨¡å¼ï¼ˆä¸å¸¦åç¼€ï¼‰æµ‹è¯•æˆåŠŸï¼

ä»ç»“æœå¯ä»¥çœ‹åˆ°ï¼š

1. âœ… å›¾ç‰‡æ–‡ä»¶å¤¹ä¸Šä¼ æˆåŠŸ - CID: bafybeia22ed2lhakgwu76ojojhuavlxkccpclciy6hgqsmn6o7ur7cw44e
2. âœ… æ–‡ä»¶å¤§å°æ˜¾ç¤ºæ­£ç¡® - 16.40 MB (å›¾ç‰‡) / 765 B (å…ƒæ•°æ®)
3. âœ… æ–‡ä»¶å¤¹åç§°è¯´æ˜ - æ¸…æ¥šè§£é‡Šäº† folder_from_sdk çš„é—®é¢˜
4. âœ… å…ƒæ•°æ®æ–‡ä»¶å¤¹ä¸Šä¼ æˆåŠŸ - CID: bafybeihnyl6zp4q4xusvpt77nzl7ljg3ec6xhbgaflzrn6bzrpo7nivgzq
5. âœ… è¿›åº¦æ˜¾ç¤ºæ­£å¸¸ - æ¯10ç§’æ˜¾ç¤ºä¸€æ¬¡è¿›åº¦
6. âœ… è¯¦ç»†ç»Ÿè®¡ä¿¡æ¯ - æ˜¾ç¤ºæ‰€æœ‰ CID å’Œ Base URI
7. âœ… è„šæœ¬æ­£ç¡®é€€å‡º - æ²¡æœ‰å¡ä½

## ç¬¬äº”æ­¥ï¼šæ‰¹é‡æ¨¡å¼æµ‹è¯•ï¼ˆå¸¦åç¼€ï¼‰

```bash
âœ pnpm batch

> pinata-nft-uploader@1.0.0 batch /Users/qiaopengjun/Code/Solidity/YuanqiGenesis/polyglot-pinata-uploader/typescript
> ts-node src/index.ts batch

[dotenv@17.2.1] injecting env (6) from .env -- tip: ğŸ” prevent committing .env to code: https://dotenvx.com/precommit
[2025-08-07T02:37:34.559Z] [INFO] âœ… Pinata è®¤è¯æˆåŠŸ!
[2025-08-07T02:37:34.563Z] [INFO] ğŸ“‹ ä¸Šä¼ æ¨¡å¼è¯´æ˜:
[2025-08-07T02:37:34.563Z] [INFO]   ğŸ¯ single: å•ä¸ªæ–‡ä»¶æ¨¡å¼ - ä¸Šä¼ å•ä¸ªå›¾ç‰‡ + å•ä¸ª JSON
[2025-08-07T02:37:34.563Z] [INFO]   ğŸ“¦ batch: æ‰¹é‡æ¨¡å¼ - ä¸Šä¼ æ•´ä¸ªæ–‡ä»¶å¤¹ + æ‰¹é‡ JSON
[2025-08-07T02:37:34.563Z] [INFO]   ğŸ§ª test: æµ‹è¯•æ¨¡å¼ - ä¸Šä¼ æµ‹è¯•æ–‡ä»¶
[2025-08-07T02:37:34.563Z] [INFO]   ğŸ“Œ pin: Pin by CID æ¨¡å¼
[2025-08-07T02:37:34.563Z] [INFO]   ğŸ“Š queue: æ£€æŸ¥ Pin é˜Ÿåˆ—çŠ¶æ€
[2025-08-07T02:37:34.563Z] [INFO] ğŸ“¦ é€‰æ‹©: æ‰¹é‡æ¨¡å¼
[2025-08-07T02:37:34.564Z] [INFO] ğŸ“ æ¨¡å¼: ç”Ÿæˆå¸¦.jsonåç¼€å’Œä¸å¸¦åç¼€çš„å…ƒæ•°æ®æ–‡ä»¶
[2025-08-07T02:37:34.564Z] [INFO] ğŸš€ å¼€å§‹å¤„ç†æ‰¹é‡ NFT é›†åˆ
[2025-08-07T02:37:34.564Z] [INFO] ğŸ“ æ­£åœ¨ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶å¤¹...
[2025-08-07T02:37:34.565Z] [INFO] ğŸ“ æ­£åœ¨ä¸Šä¼ æ–‡ä»¶å¤¹: /Users/qiaopengjun/Code/Solidity/YuanqiGenesis/polyglot-pinata-uploader/assets/batch_images
[2025-08-07T02:37:34.583Z] [INFO] ğŸ“ æ‰¾åˆ° 3 ä¸ªæ–‡ä»¶ï¼Œæ€»å¤§å°: 16.40 MB
[2025-08-07T02:37:34.583Z] [INFO] ğŸš€ å¼€å§‹ä¸Šä¼ åˆ° Pinata...
[2025-08-07T02:37:44.584Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 10 ç§’
[2025-08-07T02:37:54.585Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 20 ç§’
[2025-08-07T02:38:04.586Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 30 ç§’
[2025-08-07T02:38:14.587Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 40 ç§’
[2025-08-07T02:38:24.588Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 50 ç§’
[2025-08-07T02:38:34.590Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 60 ç§’
[2025-08-07T02:38:44.591Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 70 ç§’
[2025-08-07T02:38:54.592Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 80 ç§’
[2025-08-07T02:39:04.593Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 90 ç§’
[2025-08-07T02:39:14.594Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 100 ç§’
[2025-08-07T02:39:24.594Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 110 ç§’
[2025-08-07T02:39:34.596Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 120 ç§’
[2025-08-07T02:39:44.597Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 130 ç§’
[2025-08-07T02:39:54.598Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 140 ç§’
[2025-08-07T02:40:04.600Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 150 ç§’
[2025-08-07T02:40:14.601Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 160 ç§’
[2025-08-07T02:40:24.602Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 170 ç§’
[2025-08-07T02:40:34.604Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 180 ç§’
[2025-08-07T02:40:44.604Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 190 ç§’
[2025-08-07T02:40:54.605Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 200 ç§’
[2025-08-07T02:41:04.605Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 210 ç§’
[2025-08-07T02:41:14.553Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 219 ç§’
[2025-08-07T02:41:24.554Z] [INFO] â³ è¿›è¡Œä¸­... å·²ç”¨æ—¶: 229 ç§’
[2025-08-07T02:41:32.290Z] [INFO] âœ… å®Œæˆ! æ€»ç”¨æ—¶: 237 ç§’
[2025-08-07T02:41:32.290Z] [INFO] âœ… æ–‡ä»¶å¤¹ä¸Šä¼ æˆåŠŸ! CID: bafybeia22ed2lhakgwu76ojojhuavlxkccpclciy6hgqsmn6o7ur7cw44e
[2025-08-07T02:41:32.290Z] [INFO] âœ… å›¾ç‰‡æ–‡ä»¶å¤¹ä¸Šä¼ å®Œæˆ! CID: bafybeia22ed2lhakgwu76ojojhuavlxkccpclciy6hgqsmn6o7ur7cw44e
[2025-08-07T02:41:32.290Z] [INFO] ğŸ“ æ–‡ä»¶å¤¹åç§°è¯´æ˜:
[2025-08-07T02:41:32.290Z] [INFO]    - Pinata ç•Œé¢æ˜¾ç¤º: 'folder_from_sdk' (SDK é»˜è®¤è¡Œä¸º)
[2025-08-07T02:41:32.290Z] [INFO]    - å®é™…è®¿é—®è·¯å¾„: ipfs://bafybeia22ed2lhakgwu76ojojhuavlxkccpclciy6hgqsmn6o7ur7cw44e/æ–‡ä»¶å
[2025-08-07T02:41:32.290Z] [INFO]    - ä¾‹å¦‚: ipfs://bafybeia22ed2lhakgwu76ojojhuavlxkccpclciy6hgqsmn6o7ur7cw44e/1.png, ipfs://bafybeia22ed2lhakgwu76ojojhuavlxkccpclciy6hgqsmn6o7ur7cw44e/2.png
[2025-08-07T02:41:32.290Z] [INFO]    - Gateway è®¿é—®: https://gateway.pinata.cloud/ipfs/bafybeia22ed2lhakgwu76ojojhuavlxkccpclciy6hgqsmn6o7ur7cw44e/
[2025-08-07T02:41:32.305Z] [INFO] ğŸ“ æ­£åœ¨ä¸Šä¼ å¸¦.jsonåç¼€çš„å…ƒæ•°æ®æ–‡ä»¶å¤¹...
[2025-08-07T02:41:32.305Z] [INFO] ğŸ“ æ­£åœ¨ä¸Šä¼ æ–‡ä»¶å¤¹: /Users/qiaopengjun/Code/Solidity/YuanqiGenesis/polyglot-pinata-uploader/typescript/output/batch-upload-2025-08-07T02-41-32-295Z/metadata-json
[2025-08-07T02:41:32.307Z] [INFO] ğŸ“ æ‰¾åˆ° 3 ä¸ªæ–‡ä»¶ï¼Œæ€»å¤§å°: 765 B
[2025-08-07T02:41:32.307Z] [INFO] ğŸš€ å¼€å§‹ä¸Šä¼ åˆ° Pinata...
[2025-08-07T02:41:33.014Z] [INFO] âœ… å®Œæˆ! æ€»ç”¨æ—¶: 0 ç§’
[2025-08-07T02:41:33.014Z] [INFO] âœ… æ–‡ä»¶å¤¹ä¸Šä¼ æˆåŠŸ! CID: bafybeiguvcmspmkhyheyh5c7wmixuiiysjpcrw4hjvvydmfhqmwsopvjk4
[2025-08-07T02:41:33.014Z] [INFO] âœ… å¸¦.jsonåç¼€å…ƒæ•°æ®æ–‡ä»¶å¤¹ä¸Šä¼ å®Œæˆ! CID: bafybeiguvcmspmkhyheyh5c7wmixuiiysjpcrw4hjvvydmfhqmwsopvjk4
[2025-08-07T02:41:33.014Z] [INFO] ğŸ“ æ­£åœ¨ä¸Šä¼ ä¸å¸¦åç¼€çš„å…ƒæ•°æ®æ–‡ä»¶å¤¹...
[2025-08-07T02:41:33.014Z] [INFO] ğŸ“ æ­£åœ¨ä¸Šä¼ æ–‡ä»¶å¤¹: /Users/qiaopengjun/Code/Solidity/YuanqiGenesis/polyglot-pinata-uploader/typescript/output/batch-upload-2025-08-07T02-41-32-295Z/metadata
[2025-08-07T02:41:33.015Z] [INFO] ğŸ“ æ‰¾åˆ° 3 ä¸ªæ–‡ä»¶ï¼Œæ€»å¤§å°: 765 B
[2025-08-07T02:41:33.015Z] [INFO] ğŸš€ å¼€å§‹ä¸Šä¼ åˆ° Pinata...
[2025-08-07T02:41:33.591Z] [INFO] âœ… å®Œæˆ! æ€»ç”¨æ—¶: 0 ç§’
[2025-08-07T02:41:33.592Z] [INFO] âœ… æ–‡ä»¶å¤¹ä¸Šä¼ æˆåŠŸ! CID: bafybeihnyl6zp4q4xusvpt77nzl7ljg3ec6xhbgaflzrn6bzrpo7nivgzq
[2025-08-07T02:41:33.592Z] [INFO] âœ… ä¸å¸¦åç¼€å…ƒæ•°æ®æ–‡ä»¶å¤¹ä¸Šä¼ å®Œæˆ! CID: bafybeihnyl6zp4q4xusvpt77nzl7ljg3ec6xhbgaflzrn6bzrpo7nivgzq
[2025-08-07T02:41:33.596Z] [INFO] ğŸ“„ ä¸Šä¼ ç»“æœå·²ä¿å­˜åˆ°: /Users/qiaopengjun/Code/Solidity/YuanqiGenesis/polyglot-pinata-uploader/typescript/output/batch-upload-2025-08-07T02-41-32-295Z/results/upload-result.json
[2025-08-07T02:41:33.641Z] [INFO] ğŸ“„ è¯´æ˜æ–‡æ¡£å·²ä¿å­˜åˆ°: /Users/qiaopengjun/Code/Solidity/YuanqiGenesis/polyglot-pinata-uploader/typescript/output/batch-upload-2025-08-07T02-41-32-295Z/README.md
[2025-08-07T02:41:33.641Z] [INFO] âœ¨ æ‰¹é‡æµç¨‹å®Œæˆ
[2025-08-07T02:41:33.641Z] [INFO] ğŸ“Š ä¸Šä¼ ç»Ÿè®¡:
[2025-08-07T02:41:33.641Z] [INFO]    - å›¾ç‰‡æ•°é‡: 3
[2025-08-07T02:41:33.641Z] [INFO]    - å›¾ç‰‡æ–‡ä»¶å¤¹ CID: bafybeia22ed2lhakgwu76ojojhuavlxkccpclciy6hgqsmn6o7ur7cw44e
[2025-08-07T02:41:33.641Z] [INFO]    - å¸¦.jsonåç¼€å…ƒæ•°æ® CID: bafybeiguvcmspmkhyheyh5c7wmixuiiysjpcrw4hjvvydmfhqmwsopvjk4
[2025-08-07T02:41:33.641Z] [INFO]    - ä¸å¸¦åç¼€å…ƒæ•°æ® CID: bafybeihnyl6zp4q4xusvpt77nzl7ljg3ec6xhbgaflzrn6bzrpo7nivgzq
[2025-08-07T02:41:33.642Z] [INFO] ğŸ“ æ ¹æ®ä½ çš„ NFT åˆçº¦éœ€æ±‚é€‰æ‹© Base URI:
[2025-08-07T02:41:33.642Z] [INFO]    - éœ€è¦.jsonåç¼€: ipfs://bafybeiguvcmspmkhyheyh5c7wmixuiiysjpcrw4hjvvydmfhqmwsopvjk4/
[2025-08-07T02:41:33.642Z] [INFO]    - ä¸éœ€è¦åç¼€: ipfs://bafybeihnyl6zp4q4xusvpt77nzl7ljg3ec6xhbgaflzrn6bzrpo7nivgzq/
[2025-08-07T02:41:33.642Z] [INFO] ğŸ“„ è¯¦ç»†ç»“æœå·²ä¿å­˜åˆ°: /Users/qiaopengjun/Code/Solidity/YuanqiGenesis/polyglot-pinata-uploader/typescript/output/batch-upload-2025-08-07T02-41-32-295Z/results/upload-result.json
[2025-08-07T02:41:33.642Z] [INFO] è„šæœ¬æ€»æ‰§è¡Œæ—¶é—´: 240 ç§’
[2025-08-07T02:41:33.642Z] [INFO] ğŸ‰ è„šæœ¬æ‰§è¡Œå®Œæˆï¼Œæ­£åœ¨é€€å‡º...
```

âœ… æ‰¹é‡æ¨¡å¼ï¼ˆå¸¦åç¼€ï¼‰æµ‹è¯•æˆåŠŸï¼

ä»ç»“æœå¯ä»¥çœ‹åˆ°ï¼š

1. âœ… å›¾ç‰‡æ–‡ä»¶å¤¹ä¸Šä¼ æˆåŠŸ - CID: bafybeia22ed2lhakgwu76ojojhuavlxkccpclciy6hgqsmn6o7ur7cw44e
2. âœ… å¸¦åç¼€å…ƒæ•°æ®ä¸Šä¼ æˆåŠŸ - CID: bafybeiguvcmspmkhyheyh5c7wmixuiiysjpcrw4hjvvydmfhqmwsopvjk4
3. âœ… ä¸å¸¦åç¼€å…ƒæ•°æ®ä¸Šä¼ æˆåŠŸ - CID: bafybeihnyl6zp4q4xusvpt77nzl7ljg3ec6xhbgaflzrn6bzrpo7nivgzq
4. âœ… è¿›åº¦æ˜¾ç¤ºæ­£å¸¸ - æ¯10ç§’æ˜¾ç¤ºä¸€æ¬¡è¿›åº¦
5. âœ… è¯¦ç»†ç»Ÿè®¡ä¿¡æ¯ - æ˜¾ç¤ºæ‰€æœ‰ CID å’Œ Base URI é€‰é¡¹
6. âœ… è„šæœ¬æ­£ç¡®é€€å‡º - æ²¡æœ‰å¡ä½

## ï¿½ï¿½ æµ‹è¯•æ€»ç»“

æ‰€æœ‰åŠŸèƒ½éƒ½æµ‹è¯•æˆåŠŸï¼

### âœ… æµ‹è¯•ç»“æœ

- ç¼–è¯‘æ£€æŸ¥ âœ… - æ— è¯­æ³•é”™è¯¯

- æµ‹è¯•æ¨¡å¼ âœ… - Pinata è¿æ¥æ­£å¸¸

- å•ä¸ªæ–‡ä»¶æ¨¡å¼ âœ… - å›¾ç‰‡å’Œå…ƒæ•°æ®ä¸Šä¼ æˆåŠŸ

- æ‰¹é‡æ¨¡å¼ï¼ˆä¸å¸¦åç¼€ï¼‰ âœ… - æ‰¹é‡ä¸Šä¼ æˆåŠŸ

- æ‰¹é‡æ¨¡å¼ï¼ˆå¸¦åç¼€ï¼‰ âœ… - æ‰¹é‡ä¸Šä¼ æˆåŠŸ

è„šæœ¬ç°åœ¨è¿è¡Œå¾—å¾ˆå¥½ï¼Œæ‰€æœ‰åŠŸèƒ½éƒ½æ­£å¸¸å·¥ä½œï¼

## æ€»ç»“

è¿™ç¯‡æ–‡ç« è¯¦ç»†ä»‹ç»å¹¶æ¼”ç¤ºäº†ä¸€æ¬¾åŠŸèƒ½å®Œå¤‡çš„ Pinata NFT å…ƒæ•°æ®ä¸Šä¼ å·¥å…·ã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªç®€å•çš„è„šæœ¬ï¼Œè€Œæ˜¯ä¸€ä¸ªé‡‡ç”¨ TypeScript æ„å»ºã€åŸºäºé¢å‘å¯¹è±¡æ€æƒ³è®¾è®¡çš„ç»¼åˆè§£å†³æ–¹æ¡ˆã€‚

å…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼š

- **è‡ªåŠ¨åŒ–ä¸é«˜æ•ˆç‡**ï¼šæ— è®ºæ˜¯å•ä¸ª NFT è¿˜æ˜¯ä¸Šåƒä¸ªæ–‡ä»¶çš„é›†åˆï¼Œå·¥å…·éƒ½èƒ½ä¸€é”®å®Œæˆå›¾ç‰‡ä¸Šä¼ ã€å…ƒæ•°æ®ç”Ÿæˆå’Œå…ƒæ•°æ®ä¸Šä¼ çš„å…¨è¿‡ç¨‹ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆæ¸…æ™°çš„ç»“æœæŠ¥å‘Šå’Œè¯´æ˜æ–‡æ¡£ã€‚
- **é«˜åº¦çµæ´»æ€§**ï¼šæ”¯æŒå•ä¸ªæ–‡ä»¶å’Œæ‰¹é‡æ–‡ä»¶å¤¹ä¸¤ç§æ¨¡å¼ï¼Œå¹¶ä¸”åœ¨æ‰¹é‡æ¨¡å¼ä¸‹ï¼Œèƒ½åŒæ—¶ç”Ÿæˆå¸¦ `.json` åç¼€å’Œä¸å¸¦åç¼€çš„ä¸¤ç§å…ƒæ•°æ®æ–‡ä»¶å¤¹ï¼Œçµæ´»é€‚é…å„ç±»æ™ºèƒ½åˆçº¦å¯¹ `baseURI` çš„ä¸åŒè¦æ±‚ã€‚
- **ç¨³å¥å¯é **ï¼šå†…ç½®äº†å®Œå–„çš„é…ç½®ç®¡ç†ã€æ—¥å¿—ç³»ç»Ÿã€è¿›åº¦è·Ÿè¸ªã€ä¸Šä¼ è¶…æ—¶æ§åˆ¶å’Œè‡ªåŠ¨é‡è¯•æœºåˆ¶ï¼Œç¡®ä¿åœ¨å¤„ç†å¤§é‡æ–‡ä»¶æˆ–ç½‘ç»œä¸ç¨³å®šæ—¶ï¼Œä»»åŠ¡ä¾ç„¶èƒ½å¯é åœ°å®Œæˆã€‚

é€šè¿‡æ–‡ä¸­çš„å¤šè½®å®æˆ˜æµ‹è¯•å¯ä»¥çœ‹å‡ºï¼Œè¯¥å·¥å…·åœ¨è¿æ¥è®¤è¯ã€å•æ–‡ä»¶å¤„ç†ã€æ‰¹é‡å¤„ç†ç­‰å„ä¸ªç¯èŠ‚éƒ½è¡¨ç°å‡ºè‰²ï¼Œè¿è¡Œç¨³å®šã€‚å¯¹äºä»»ä½•éœ€è¦å°†NFTèµ„äº§éƒ¨ç½²åˆ° IPFS çš„å¼€å‘è€…æ¥è¯´ï¼Œè¿™éƒ½æ˜¯ä¸€ä¸ªå¯ä»¥**ç›´æ¥ç”¨äºç”Ÿäº§ç¯å¢ƒã€æ˜¾è‘—æå‡å¼€å‘æ•ˆç‡çš„å¼€æºåˆ©å™¨**ã€‚âœ¨

## å‚è€ƒ

- <https://docs.pinata.cloud/tools/community-sdks>
- <https://app.pinata.cloud/ipfs/files>
- <https://github.com/perfectmak/pinata-sdk>
- <https://gitlab.com/benoit74/pinata-cli>
- <https://github.com/Vourhey/pinatapy>
- <https://github.com/qiaopengjun5162/polyglot-ipfs-uploader>

## æ¨èé˜…è¯»

- ã€ŠNFT å¼€å‘æ ¸å¿ƒæ­¥éª¤ï¼šæœ¬åœ° IPFS èŠ‚ç‚¹æ­å»ºä¸å…ƒæ•°æ®ä¸Šä¼ å®æˆ˜ã€‹
- ã€ŠPython x IPFSï¼šæ„å»ºç”Ÿäº§çº§çš„ NFT å…ƒæ•°æ®è‡ªåŠ¨åŒ–æµç¨‹ã€‹
- ã€Šä»å‘½ä»¤è¡Œåˆ°å®˜æ–¹åº“ï¼šç”¨ Go è¯­è¨€ç²¾é€š NFT å…ƒæ•°æ® IPFS ä¸Šä¼ ã€‹
- ã€ŠRust x IPFSï¼šä»å‘½ä»¤è¡Œåˆ°å®˜æ–¹åº“ï¼Œç²¾é€šNFTå…ƒæ•°æ®ä¸Šä¼ ã€‹
