+++
title = "Compound协议简介：去中心化借贷与利率模型基础"
description = "Compound协议简介：去中心化借贷与利率模型基础"
date = 2025-01-11 23:35:50+08:00
[taxonomies]
categories = ["Web3", "DeFi"]
tags = ["Web3", "DeFi"]
+++

<!-- more -->

# Compound协议简介：去中心化借贷与利率模型基础

Compound协议是去中心化金融（DeFi）领域的重要项目之一，允许用户无需中介便可存入加密资产并赚取利息，或借入加密资产。通过智能合约和区块链技术，Compound协议使得传统金融中的借贷功能得以去中心化，实现更高效和透明的资金流动。本篇文章将带领读者了解Compound协议的基本结构，尤其是其独特的利率模型以及去中心化借贷的创新之处。我们将深入探讨Compound协议如何通过cToken机制、抵押品管理和资金利用率来优化借贷体验，为后续更深入的源码分析和技术解读奠定基础。

> 本文对Compound协议进行了简要介绍，重点阐述其在去中心化借贷领域的应用及其创新的利率模型。作为DeFi协议的先驱之一，Compound允许用户通过智能合约进行借贷交易，并通过cToken机制为存款人提供利息收益。我们介绍了Compound协议的基本构成，包括资产存款、借款、抵押品管理以及如何计算资金利用率。此外，文章还讨论了Compound协议在借贷过程中如何通过市场动态调整借款和存款利率，为后续更深入的技术解析和源码分析做铺垫。

## Compound 简介

**Compound** 是一个去中心化的借贷协议，允许用户在无需中介的情况下存入加密资产并赚取利息，同时也可以借入加密资产。它是去中心化金融（DeFi）领域的重要项目之一，使用智能合约和区块链技术实现了传统金融中的借贷功能，所有操作都通过智能合约自动执行。Compound 的核心特点是其创新的 **cToken** 机制，用户通过存入资产获得对应的 cTokens，cTokens 的价值随利息积累而增加，从而确保存款者能够获得利息收益。

贷方可以将抵押品存入 Compound，并从其资产中赚取可变利率，类似于去中心化的加密储蓄账户。为了让存款者获得利息，Compound 发行了 ERC20 代币——cTokens，作为存入抵押品的证明。这些 cTokens 不仅代表存款的所有权，还具备累积利息的功能，其价值随时间增加。cTokens 的增值是基于 cToken 与基础资产（如 DAI 或 USDC）之间的汇率，该汇率每个区块都会有所上升，并且可以用来计算总 APR。

为了确保借款人的借款安全，借入金额必须始终低于其抵押品价值与抵押品系数（Collateral Factor）的乘积。若借款额超过抵押品价值的 50-75%，且未及时还款或追加抵押品，平台可以启动清算机制。此时，借款人可能会被迫以 5% 的折扣清算头寸，以确保平台的健康和稳定。

精细化管理方面，Compound 于 2020 年 6 月推出了其治理代币 COMP，标志着 DeFi 夏季的到来。通过 COMP，Compound 激励平台上的流动性提供者，从而加速了去中心化金融（DeFi）生态的扩展。

2017 年，宾夕法尼亚大学两位校友 Robert Leshner 和 Geoffrey Hayes 创立 Compound，于 2018 年 9 月份上线。

2019 年，著名的以太坊借贷协议 Compound Finance v2 正式上线，标志着 cToken（生息资产）概念的诞生。

2020年6月，Compound推出了其治理代币--Compound（COMP），并且将 Compound 协议的治理权限转交给 DAO 组织。

2020 年 11 月 26 日，Coinbase Pro 上 DAI 的价格上涨至 1.34 美元，导致 Compound 预言机价格异常波动，引发超过 8000 万美元的加密资产被强制清算。

2021 年 9 月 30 日，在第 62 号提案通过并执行后，合约内有一个错误，导致应该缓慢分发的 COMP 代币被错误发放，约 28 万枚 COMP 受到影响，当时价值 8000 万美元。

2022 年 8 月 25 日，Compound Labs 推出 Compound III，新版本取消了生息资产的概念，并引入了每笔借款的抵押物直接存入对应智能合约的机制，抵押物既无法再次借出，也无法产生利息。

## **解读Compound借贷平台的关键财务数据：计算原理与实际影响**

![image-20250111205137444](/images/image-20250111205137444.png)

资金利用率计算公式：
$$
Utilization Rate = \frac{\text{Borrows}}{\text{Cash} + \text{Borrows} - \text{Reserves}}
$$

这里的计算方式是用 **借款总额**（Borrows）除以 **市场中可用的有效资金**，即：

- **Cash**：当前市场上的现金余额（用户存入的资金，但未被借出）。
- **Borrows**：已经借出的资金。
- **Reserves**：平台保留的资金（储备金），通常是为了应对潜在风险和市场不确定性。

公式的目的是衡量 **借款需求** 相对于 **市场可用资金** 的比例，即在市场中借出的资金占总资金（包括现金、借款和储备金）多少。

### 公式说明

- **Borrows（借款）**：已经被借出的资金量。
- **Cash + Borrows - Reserves（市场可用资金）**：这部分表示市场中可以供用户借款的总资金量。也就是说，**Cash** 是市场中未被借出的资金，**Borrows** 是已借出的资金，而 **Reserves** 是平台为确保流动性而保留的资金。

通过这个公式，Compound 协议可以计算出市场中的资金利用率，帮助确定 **借款利率** 和 **存款利率**。

当利用率较高时，借款利率通常较高；当利用率较低时，借款利率可能会较低，反之亦然。

### 例子

假设有以下数据：

- **Borrows（借款）** = 1000 单位
- **Cash（现金）** = 5000 单位
- **Reserves（储备金）** = 500 单位

那么，市场的 **Utilization Rate** 计算如下：
$$
Utilization Rate = \frac{1000}{5000 + 1000 - 500} = \frac{1000}{5500} \approx 0.1818
$$
在这个例子中，**Utilization Rate** 为 **18.18%**，说明市场中只有 18.18% 的资金被借出，剩余的资金处于未使用状态。

![image-20250111223143561](/images/image-20250111223143561.png)

Total Earning：总收入  $36.01M

Total Borrowing：总借款  $30.16M

Collateral Factor：抵押因素  84.50%  （抵押因子，意味着借款人可以借款的最大比例）

Reserve Factor：准备金率  25.00%  （储备因子，协议将借款利息的 25% 保留为储备）

Reserves：储备金  $9.63M

Borrow APR：借款利率  9.96%

Utilization：资金利用率  83.76%

Earn APR：存款利率  6.26%

**Earn Distribution**：0.00%（通常指的是 **COMP** 奖励的分配比例）

**Borrow Distribution**：0.00%（通常指的是 **COMP** 奖励的分配比例给借款人）

**Borrow Cap**：$99.99M（最大可借款额度）

#### 存款利率计算

在 **Compound** 协议中，存款利率的计算公式是：
$$
存款利率= \text{资产利用率} \times \text{借款利率} \times (1 - \text{储备率})
$$
这个公式的含义如下：

##### 1. **资产利用率**（Utilization Rate）

资产利用率是指平台上借出的资金占总存款资金的比例，通常表示为：

资产利用率=借出金额总存款金额\text{资产利用率} = \frac{\text{借出金额}}{\text{总存款金额}}

资产利用率越高，表示借款需求越强，存款利率也会相应增加，因为协议需要更高的激励来吸引更多存款。

##### 2. **借款利率**（Borrowing Rate）

借款利率是指借款人向协议支付的利息率。借款利率通常与资产利用率相关，资产利用率越高，借款利率也会越高。这是因为借款需求增加时，协议通过提高借款利率来鼓励借款人还款或减少借款，从而维持平台的资金平衡。

##### 3. **储备率**（Reserve Factor）

储备率是协议预留的一部分资产，用于应对平台风险、保障流动性等。储备率越高，协议保留的资金比例也越高，因此存款利率会相应减少。储备率的调整可以帮助平台在面临市场波动时，保持一定的安全性。

#### 存款利率计算过程

- **资产利用率**越高，表明更多的存款被借出，存款人通过更高的存款利率获得更多回报。
- **借款利率**越高，表示借款的成本上升，存款人获得的回报也会更高。
- **储备率**越高，协议为风险预留的资金越多，存款人的回报会相应减少。

##### 举个例子

假设：

- 资产利用率为 80%（即借出的资金占总存款的 80%）
- 借款利率为 10%
- 储备率为 20%

则存款利率计算为：
$$
\text{存款利率} = 0.80 \times 0.10 \times (1 - 0.20) = 0.064 \text{ 或 } 6.4\%
$$
这意味着存款人在 Compound 协议中的年化存款利率为 6.4%。

Compound 协议的存款利率受到资产利用率、借款利率和储备率的共同影响。在借款需求高时，存款人将获得更高的利率，但协议也会根据储备率来保持一定的安全性和流动性。

存款利率的计算公式如下：

$$
\text{存款利率} = \text{资产利用率} \times \text{借款利率} \times (1 - \text{储备率})
$$

给定以下数值：

- 资产利用率 = 83.76%（即 0.8376）
- 借款利率 = 9.96%（即 0.0996）
- 储备率 = 25.00%（即 0.25）

代入公式计算：

$$
\text{存款利率} = 0.8376 \times 0.0996 \times (1 - 0.25)
$$

$$
\text{存款利率} = 0.8376 \times 0.0996 \times 0.75 = 0.06256872
$$

最终结果为：

$$
\text{存款利率} = 6.26\%
$$

### **计算 Total Earnings (总收益)**

**Total Earnings** 可能是平台所有存款人通过存款获得的总利息收益。要计算这个总收益，我们可以使用以下公式：
$$
\text{Total Earnings} = \text{Total Deposits} \times \text{Earn APR}
$$
假设平台的 **Total Deposits** 是用户存入的总资产，那么：
$$
\begin{align}
\text{Total Earnings} &= \text{Total Deposits} \times 6.26\% \\
&= 36.01M
\end{align}
$$
因此，根据给定的 **Total Earnings** 数据，我们可以计算出总存款量：

$$
\begin{align}
\text{Total Deposits} &= \frac{\text{Total Earnings}}{\text{Earn APR}} \\ &= \frac{36.01M}{6.26\%} \\ &\approx 575.24M
\end{align}
$$

### 计算借款利息收入

`借款利息收入 = 30.16M * 9.96% =3.003936 ≈ $3.00M`

### 计算存款利息收入

`存款利息收入 = 30.16M * 9.96% * （1 - 25%）= 2.252952 ≈ $2.25M`

### **总结与展望**

Compound 是 DeFi 借贷领域的先锋项目，致力于通过去中心化的方式重新定义传统金融中的借贷市场。从最初的构想到如今的跨链协议，Compound 逐步实现了其去中心化和社区治理的目标。随着 DeFi 市场的不断发展，Compound 将继续在借贷、利率模型、跨链操作和治理方面进行创新，预计将为去中心化金融行业带来更多影响力。

在未来，Compound 可能会继续扩大其市场应用，优化其协议，并与更多区块链平台进行整合，从而提供更为广泛的金融服务。同时，随着 DeFi 行业的不断演进，Compound 将继续面临创新与合规的挑战。

## 参考

- <https://compound.finance/>
- <https://banklessdao.substack.com/p/the-lending-edition-defi-download>
- <https://nigdaemon.gitbook.io/how-to-defi-advanced-zhogn-wen-b/di-5-zhang-qu-zhong-xin-hua-de-jie-dai>
- <https://foresightnews.pro/article/detail/48721>
