+++
title = "Web3 金融：Uniswap V2 资金效率深度剖析"
description = "Web3 金融：Uniswap V2 资金效率深度剖析"
date = 2025-05-21T00:52:46Z
[taxonomies]
categories = ["Web3", "DeFi", "Uniswap"]
tags = ["Web3", "DeFi", "Uniswap"]
+++

<!-- more -->

# Web3 金融：Uniswap V2 资金效率深度剖析

在 Web3 时代，去中心化金融（DeFi）正重塑传统金融格局，而 Uniswap V2 作为自动做市商（AMM）的先锋，以其独特的 x·y=k 模型为市场提供了无限价格区间的流动性。然而，低资金利用率成为其核心痛点：大量资金闲置在非活跃价格区间，限制了流动性提供者的收益效率。本文将深入剖析 Uniswap V2 的资金利用率问题，通过实际案例计算 ETH/DAI 交易对在价格波动下的资金效率，并探讨其局限性及后续优化的方向。无论你是 DeFi 新手还是资深玩家，这场 Web3 金融的深度解析都将为你揭开 Uniswap V2 的效率密码！

Uniswap V2 凭借 x·y=k 的恒定乘积模型，为 Web3 金融市场提供去中心化流动性，但其资金利用率偏低的问题限制了资本效率。本文以 ETH/DAI 交易对为例，通过价格波动（1300 DAI/ETH 和 2200 DAI/ETH）下的资金利用率计算，揭示 DAI 和 ETH 两侧的资金变化规律：价格下降时 DAI 利用率约 6.92%，ETH 增加 7.4%；价格上涨时 DAI 增加 21.24%，ETH 利用率达 17.33%。分析表明，Uniswap V2 的流动性分散在无限价格区间，导致大部分资金未被高效利用，且在单向市场压力下可能出现资产“耗尽”。本文进一步探讨这一局限性如何推动 Uniswap V3 的集中流动性创新，为 Web3 金融的未来提供启示。

## Uniswap V2 的资金利用率

假设 ETH/DAI 交易对的实时价格为 1500 DAI/ETH，交易对的流动性池中共有资金：4500 DAI 和 3 ETH，根据 Uniswap V2 的公式(x *y = k)，x  = 4500，y = 3，k = 4500* 3 = 13500。
假设 x 表示流动性池中的 DAI，y 表示流动性池中的 ETH，k 表示流动性池中 DAI 和 ETH 的乘积。即初始阶段 x1  = 4500，y1 = 3，k1 = 13500。

### 当价格下降到 1300 DAI/ETH 时

$$
x \cdot y = k = L^2 \\
x2 \cdot  y2 = 13500 \\
$$
$$
\frac{x2}{y2} = 1300
$$
计算 x2 和 y2：
$$
x2 = 1300 \cdot y2 = \frac{13500}{y2} \\
$$
$$
y2 = \frac{x2}{1300} = \frac{13500}{x2} \\
$$
因为：
$$
\begin{align*}
x_2 \cdot y_2 &= 13500 \\
x_2 &= 1300 \cdot y_2 \\
1300 \cdot y_2^2 &= 13500 \\
y_2^2 &= \frac{13500}{1300} \\
y_2 &= \sqrt{\frac{13500}{1300}}
\end{align*}
$$
我们来计算：
$$
y_2 = \sqrt{\frac{13500}{1300}}
$$
先算分数：

$$
\frac{13500}{1300} = \frac{1350}{130} = \frac{135}{13} \approx 10.3846
$$

再开根号：

$$
y_2 = \sqrt{10.3846} \approx 3.222
$$

**所以，计算结果是：**

$$
y_2 \approx 3.222
$$

已知：

$$
x_2 = 1300 \cdot y_2
$$

刚才算出：

$$
y_2 \approx 3.222
$$

代入计算：

$$
x_2 = 1300 \times 3.222 \approx 4188.6
$$

**所以：**

$$
x_2 \approx 4188.6
$$

综上可得：
**x2 = 4188.6，y2 = 3.222**

## 资金利用率

我们分别计算 DAI 和 ETH 两侧的资金利用率。

### 1. DAI 侧资金利用率

$$
\text{DAI 侧资金利用率} = \frac{x_1 - x_2}{x_1} \times 100\%
$$

- \( x_1 = 4500 \)
- $( x_2 \approx 4188.6 $)

$$
\begin{align*}
\frac{4500 - 4188.6}{4500} \times 100\% \approx \\ \frac{311.4}{4500} \times 100\% \\ \approx 6.92\%
\end{align*}
$$

### 2. ETH 侧资金利用率

$$
\text{ETH 侧资金利用率} = \frac{y_2 - y_1}{y_1} \times 100\%
$$

注意：这里 \(y_2 > y_1\)，因为 ETH 增加了，实际应该是流出 ETH 的比例（即 ETH 被买走的比例），所以用：

$$
\text{ETH 侧资金利用率} = \frac{y_2 - y_1}{y_2} \times 100\%
$$
或者
$$
\text{ETH 侧资金利用率} = \frac{y_2 - y_1}{y_1} \times 100\%
$$

但通常和 DAI 一样，计算“减少的部分占初始的比例”，所以：

$$
\text{ETH 侧资金利用率} = \frac{y_1 - y_2}{y_1} \times 100\%
$$

- \( y_1 = 3 \)
- \( y_2 \approx 3.222 \)

$$
\begin{align*}
\frac{3 - 3.222}{3} \times 100\% = \frac{-0.222}{3} \times 100\% \\ \approx -7.4\%
\end{align*}
$$

负号表示 ETH 增加了（DAI 换成了 ETH），这和 AMM 的 swap 方向有关。

### 3. 总结

- **DAI 侧资金利用率**：\(\boxed{6.92\%}\)
- **ETH 侧资金利用率**：\(\boxed{-7.4\%}\)（ETH 增加，DAI 减少）

如果你想要 ETH 被“卖出”的比例（即 ETH 减少的情况），那要看价格上涨的场景。

---

DAI 侧资金利用率为：
$$
\frac{4500 - 4188.6}{4500} \times 100\% \approx 6.92\%
$$

ETH 侧资金利用率为：
$$
\frac{3 - 3.222}{3} \times 100\% \approx -7.4\%
$$

### 假设当价格涨到 2200 DAI/ETH 时

$$
\begin{align*}
x \cdot y = k = L^2 \\
x3 \cdot  y3 = 13500 \\
\end{align*}
$$
$$
\frac{x3}{y3} = 2200
$$
计算 x3 和 y3：
$$
x3 = 2200 \cdot y3 = \frac{13500}{y3} \\
$$
$$
y3 = \frac{x3}{2200} = \frac{13500}{x3} \\
$$
因为：
$$
\begin{align*}
x_3 \cdot y_3 &= 13500 \\
x_3 &= 2200 \cdot y_3 \\
2200 \cdot y_3^2 &= 13500 \\
y_3^2 &= \frac{13500}{2200} \\
y_3 &= \sqrt{\frac{13500}{2200}}
\end{align*}
$$
我们来计算：

$$
y_3 = \sqrt{\frac{13500}{2200}}
$$

先算分数：
$$
\frac{13500}{2200} = \frac{1350}{220} = \frac{135}{22} \approx 6.1364
$$

再开根号：

$$
y_3 = \sqrt{6.1364} \approx 2.48
$$

**所以，计算结果是：**

$$
y_3 \approx 2.48
$$

已知：

$$
x3 = 2200 \cdot y3
$$

刚才算出：

$$
y3 \approx 2.48
$$

代入计算：

$$
x3 = 2200 \times 2.48 \approx 5456
$$

**所以：**

$$
x3 \approx 5456
$$

综上可得：**x3 = 5456，y3 = 2.48**

## 资金利用率计算

我们分别计算 DAI 和 ETH 两侧的资金利用率。

### 1. DAI 侧资金利用率

$$
\text{DAI 侧资金利用率} = \frac{x_1 - x_3}{x_1} \times 100\%
$$

- \( x_1 = 4500 \)
- $( x_3 \approx 5456 $)

$$
\begin{align*}
\frac{4500 - 5456}{4500} \times 100\% \approx \frac{-956}{4500} \times 100\% \\ \approx -21.24\%
\end{align*}
$$

### 2. ETH 侧资金利用率

$$
\text{ETH 侧资金利用率} = \frac{y_1 - y_3}{y_1} \times 100\%
$$

- $( y_1 = 3 $)
- $( y_3 \approx 2.48 $)

$$
\frac{3 - 2.48}{3} \times 100\% = \frac{0.52}{3} \times 100\% \approx 17.33\%
$$

### 3. 总结

- **DAI 侧资金利用率**：$\boxed{-21.1\%}$
- **ETH 侧资金利用率**：$\boxed{17.33\%}$

## Uniswap V2 有什么问题？

资金利用率问题
> 基于 x⋅y=k 的恒定乘积自动做市商（AMM）模型，其核心特点是理论上能够在从零到正无穷的整个价格区间内为市场提供流动性。然而，正是因为流动性资金被分散到如此广阔、乃至无限的价格范围上，导致在任何给定时间，只有围绕当前市场价格的很小一部分资金被实际用于促成交易。这就造成了整体资金利用率偏低的问题：大部分存入的资金处于“非活跃”或“闲置”状态，未能被高效利用，这通常会影响流动性提供者（LPs）的资本回报效率。当市场价格发生剧烈且持续的单向变动，导致资金池中某一侧的资产（例如，代币 X）被完全兑换耗尽时，该 AMM 将无法继续提供该种已耗尽资产（代币 X）的兑换服务（即池子无法再卖出代币 X）。这种固有的资本效率限制也是驱动后续 AMM 创新（如集中流动性模型）以寻求更高资金利用率的重要原因之一。

- x⋅y=k 这个公式本身并不能阻止其中一种代币在持续的单向市场压力下被买到接近枯竭。
- 当一种代币（比如X）被大量买走，其在池中的存量 x 变得极小，那么它的价格就会变得极高。
- “耗尽”在实践中意味着该代币的存量小到无法进行有意义的交易，或者其价格高到无人愿意购买。此时，AMM池中几乎只剩下另一种代币（Y）。
- 这种情况正是由“市场价格发生剧烈且持续的单向变动”所驱动的，AMM通过调整内部价格来响应外部市场的变化，直到自身储备达到极限。
  
所以，尽管 k 试图保持不变，但它约束的是 x 和 y 的乘积，而不是它们各自的绝对数量。在极端单向市场条件下，一个变量可以趋向于0，而另一个变量则会相应地趋向于无穷大，从而导致事实上的“耗尽”。

为了解决 Uniswap V2 资金利用率偏低这一核心问题，后续诞生了 Uniswap V3 协议。

## 总结

Uniswap V2 的 x·y=k 模型为 Web3 金融奠定了去中心化交易的基础，但其资金利用率偏低的问题不容忽视。通过对 ETH/DAI 交易对的分析，我们看到价格波动下资金利用率仅在 6.92% 至 17.33% 之间，大量流动性闲置在非活跃价格区间，且单向市场压力可能导致资产耗尽。这一局限性揭示了 AMM 模型的资本效率瓶颈，也推动了 Uniswap V3 集中流动性方案的诞生。未来，Web3 金融的创新将继续聚焦资金效率优化，为流动性提供者和投资者创造更大价值。探索 Uniswap 的效率之道，正是解锁 DeFi 潜力的关键一步！

## 参考

- <https://github.com/Uniswap/v3-core>
- <https://github.com/Uniswap/v3-periphery/tree/main/contracts>
- <https://docs.uniswap.org/contracts/v3/guides/local-environment>
- <https://j1mmy.fi/uniswapv3/pool>
